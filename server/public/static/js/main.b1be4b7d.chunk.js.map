{"version":3,"sources":["actions/meActions.js","utils.js","components/LoadingView.js","urlFactory.js","RoomClient.js","actions/requestActions.js","actions/peerActions.js","actions/peerVolumeActions.js","actions/chatActions.js","actions/fileActions.js","actions/lobbyPeerActions.js","actions/consumerActions.js","actions/producerActions.js","actions/transportActions.js","RoomContext.js","components/ReactLazyPreload.js","deviceInfo.js","components/UnsupportedBrowser.js","components/ChooseRoom.js","serviceWorker.js","index.js","actions/settingsActions.js","actions/roomActions.js","actions/notificationActions.js","reducers/room.js","reducers/me.js","reducers/producers.js","reducers/peers.js","reducers/lobbyPeers.js","reducers/consumers.js","reducers/peerVolumes.js","reducers/notifications.js","reducers/helper.js","reducers/chat.js","reducers/toolarea.js","reducers/files.js","reducers/settings.js","reducers/transports.js","reducers/rootReducer.js","store.js","Logger.js"],"names":["setMe","type","payload","peerId","loginEnabled","setBrowser","browser","loggedIn","flag","addRole","role","removeRole","setPicture","picture","setMediaCapabilities","canSendMic","canSendWebcam","canShareScreen","canShareFiles","setAudioDevices","devices","setAudioOutputDevices","setWebcamDevices","setRaisedHand","setAudioInProgress","setAudioOutputInProgress","setWebcamInProgress","setScreenShareInProgress","setRaisedHandInProgress","setDisplayNameInProgress","setIsSpeaking","setAutoMuted","idle","callback","delay","handle","clearTimeout","setTimeout","SocketTimeoutError","message","name","Error","hasOwnProperty","captureStackTrace","stack","LoadingView","className","getSignalingUrl","roomId","port","window","config","productionPort","location","hostname","createTorrent","WebTorrent","saveAs","mediasoupClient","io","ScreenShare","Spotlights","requestTimeout","transportOptions","lastN","mobileLastN","notify","text","timeout","notification","id","randomString","length","toLowerCase","dispatch","notificationActions","addPeer","peer","removePeer","setPeerDisplayName","displayName","setPeerVideoInProgress","setPeerAudioInProgress","setPeerScreenInProgress","setPeerRaisedHand","raisedHand","raisedHandTimestamp","setPeerRaisedHandInProgress","setPeerPicture","addPeerRole","removePeerRole","setPeerKickInProgress","setMutePeerInProgress","setStopPeerVideoInProgress","setStopPeerScreenSharingInProgress","setPeerVolume","volume","addChatHistory","chatHistory","addFile","magnetUri","addFileHistory","fileHistory","setFileDone","sharedFiles","addLobbyPeer","removeLobbyPeer","setLobbyPeerDisplayName","setLobbyPeerPicture","setLobbyPeerPromotionInProgress","addConsumer","consumer","removeConsumer","consumerId","setConsumerPaused","originator","setConsumerResumed","setConsumerCurrentLayers","spatialLayer","temporalLayer","setConsumerPreferredLayers","setConsumerPriority","priority","setConsumerScore","score","addProducer","producer","removeProducer","producerId","setProducerScore","addTransportStats","transport","store","intl","logger","Logger","ROOM_OPTIONS","VIDEO_CONSTRAINS","width","ideal","aspectRatio","PC_PROPRIETARY_CONSTRAINTS","optional","googDscp","VIDEO_SIMULCAST_ENCODINGS","scaleResolutionDownBy","VIDEO_KSVC_ENCODINGS","scalabilityMode","VIDEO_SVC_ENCODINGS","dtx","RoomClient","accessCode","device","produce","forceTcp","fixed","silenced","muted","basePath","debug","this","_signalingUrl","_closed","_produce","_forceTcp","_basePath","settingsActions","_tracker","_torrentSupport","_useSimulcast","simulcast","_useSharingSimulcast","simulcastSharing","_muted","_device","_peerId","_accessCode","_soundAlert","Audio","_signalingSocket","_roomId","_mediasoupDevice","meActions","_webTorrent","platform","_maxSpotlights","_spotlights","_fixed","_roomType","_silenced","_sendTransport","_recvTransport","_micProducer","_hark","_harkStream","_webcamProducer","_extraVideoProducers","Map","_webcams","_audioDevices","_audioOutputDevices","_consumers","_screenSharing","_screenSharingProducer","_startKeyListener","_startDevicesListener","close","roomActions","document","addEventListener","event","repeat","key","String","fromCharCode","which","source","target","indexOf","tagName","newPeerId","getPrevAsSelected","getState","room","selectedPeerId","setSelectedPeer","getNextAsSelected","requestActions","formatMessage","defaultMessage","setRoomType","paused","unmuteMic","muteMic","updateMic","start","disableWebcam","updateWebcam","preventDefault","navigator","mediaDevices","a","_updateAudioDevices","_updateWebcams","_updateAudioOutputDevices","url","open","data","settings","notificationSounds","alertPromise","play","undefined","then","catch","error","called","interval","method","Promise","resolve","reject","emit","timeoutCallback","err","response","sendRequest","transportId","recv","transportActions","send","requestRetries","tries","_sendRequest","warn","unid","Date","getTime","toString","chatMessage","file","getBlob","blob","fileActions","existingTorrent","get","_handleTorrent","add","torrent","progress","lastMove","on","now","magnetURI","files","_sendFile","seed","announceList","newTorrent","pause","producerActions","resume","maxSpotlights","direction","currentPage","getPage","console","log","setPage","getPeersLength","spotlights","getCurrent","values","kind","displayNameTemp","peers","appData","includes","preferredSpatialLayer","_preferLow","preferredTemporalLayer","cId","_resumeConsumer","_pauseConsumer","getAudioTracks","track","stop","MediaStream","newTrack","clone","addTrack","enabled","hark","threshold","noiseThreshold","history","lastVolume","Math","round","pow","peerVolumeActions","voiceActivatedUnmute","me","isAutoMuted","deviceId","restart","newDeviceId","canProduce","_getAudioDeviceId","sampleRate","channelCount","autoGainControl","echoCancellation","noiseSuppression","sampleSize","disconnectLocalHark","disableMic","getUserMedia","audio","stream","getSettings","trackDeviceId","codecOptions","opusStereo","opusDtx","opusFec","opusPtime","opusMaxPlaybackRate","rtpParameters","codec","codecs","mimeType","split","connectLocalHark","applyConstraints","harkTrack","newResolution","newFrameRate","_getWebcamDeviceId","resolution","frameRate","video","getVideoTracks","firstVideoCodec","rtpCapabilities","find","c","encodings","simulcastEncodings","videoGoogleStartBitrate","setPeerSpotlight","setFixedSpotlight","updateSpotlights","lobbyPeerActions","peerActions","mute","closed","consumerActions","setMaxSpatialLayer","default","joinVideo","_loadDynamicImports","create","reason","clearSpotlights","attemptNumber","request","cb","producerPaused","consume","set","delete","parseScalabilityMode","spatialLayers","temporalLayers","locallyPaused","remotelyLocked","remotelyPaused","turnServers","_turnServers","_joinRoom","_soundNotification","lobbyPeers","forEach","joinByAccessCode","handleActiveSpeaker","oldDisplayName","toolarea","toolAreaOpen","currentToolTab","roles","consumers","disableScreenSharing","WEBRTC_SUPPORT","tracker","rtcConfig","iceServers","Device","routerRtpCapabilities","headerExtensions","filter","ext","uri","load","producing","consuming","transportInfo","iceParameters","iceCandidates","dtlsParameters","createSendTransport","iceTransportPolicy","proprietaryConstraints","errback","createRecvTransport","isScreenShareAvailable","authenticated","roomPermissions","allowWhenRoleMissing","lastNHistory","locked","myRoles","addPeers","chatActions","addSpeakerList","autoMuteThreshold","selectedAudioOutputDevice","Object","keys","code","value","videoDeviceId","deviceLabel","label","disableExtraVideo","screenSharingResolution","screenSharingFrameRate","map","encoding","setThreshold","enumerateDevices","selectedAudioDevice","audioDevices","selectedWebcam","webcams","RoomContext","React","createContext","withRoomContext","Component","props","Consumer","roomClient","ReactLazyPreload","importStatement","lazy","preload","BB","bowser","ua","userAgent","getParser","satisfies","chrome","chromium","firefox","safari","opera","os","getOSName","getPlatformType","getBrowserName","version","getBrowserVersion","dense","supportedBrowsers","vendor","withStyles","theme","dialogPaper","breakpoints","down","list","backgroundColor","palette","background","paper","errorAvatar","spacing","height","webrtcUnavailable","classes","scroll","dividers","container","justify","alignItems","item","xs","md","index","supportedBrowser","supportedVersion","primary","secondary","align","mdDown","color","styles","root","display","backgroundImage","backgroundAttachment","backgroundPosition","backgroundSize","backgroundRepeat","dialogTitle","padding","logo","paddingBottom","loginButton","position","right","top","largeIcon","fontSize","largeAvatar","green","DialogTitle","children","other","disableTypography","alt","src","variant","DialogContent","MuiDialogContent","DialogActions","margin","MuiDialogActions","useState","setRoomId","useIntl","title","gutterBottom","onChange","onBlur","fullWidth","component","Link","to","isElectron","buttonText","Boolean","match","unregister","serviceWorker","ready","registration","App","cache","createIntlCache","messages","messagesNorwegian","messagesGerman","messagesHungarian","messagesPolish","messagesDanish","messagesFrench","messagesGreek","messagesRomanian","messagesPortuguese","messagesChineseSimplified","messagesChineseTraditional","messagesSpanish","messagesCroatian","messagesCzech","messagesItalian","messagesUkrainian","messagesTurkish","messagesLatvian","messagesRussian","messagesKazakh","browserLanguage","language","locale","createIntl","documentElement","lang","process","REACT_APP_DEBUG","enable","init","Router","createMuiTheme","HashRouter","BrowserRouter","domready","parameters","URL","searchParams","pathname","substring","lastIndexOf","deviceInfo","unsupportedBrowser","detectDevice","alert","RTCPeerConnection","render","getElementById","global","CLIENT","loading","persistor","Provider","basename","fallback","Fragment","exact","path","ChooseRoom","run","setSelectedAudioDevice","setSelectedAudioOutputDevice","setSelectedWebcamDevice","setVideoResolution","setVideoFrameRate","setScreenSharingResolution","setScreenSharingFrameRate","setDisplayName","toggleAdvancedMode","togglePermanentTopBar","toggleButtonControlBar","toggleDrawerOverlayed","toggleShowNotifications","setEchoCancellation","setAutoGainControl","setNoiseSuppression","setVoiceActivatedUnmute","setNoiseThreshold","toggleHiddenControls","toggleNotificationSounds","setLastN","setRoomName","setRoomState","state","setRoomActiveSpeaker","setSilenceRoom","setUnsilenceRoom","setRoomLocked","setRoomUnLocked","setInLobby","inLobby","setSignInRequired","signInRequired","setOverRoomLimit","overRoomLimit","setAccessCode","setJoinByAccessCode","setSettingsOpen","settingsOpen","setExtraVideoOpen","extraVideoOpen","setHelpOpen","helpOpen","setAboutOpen","aboutOpen","setSettingsTab","tab","setLockDialogOpen","lockDialogOpen","toggleConsumerWindow","setToolbarsVisible","toolbarsVisible","setDisplayMode","mode","setFixedPeer","setSpotlights","toggleJoined","toggleConsumerFullscreen","setLobbyPeersPromotionInProgress","setMuteAllInProgress","setStopAllVideoInProgress","setStopAllScreenSharingInProgress","setCloseMeetingInProgress","setClearChatInProgress","setClearFileSharingInProgress","setRoomPermissions","setAllowWhenRoleMissing","addNotification","removeNotification","notificationId","removeAllNotifications","initialState","activeSpeakerId","torrentSupport","showSettings","fullScreenConsumer","windowConsumer","defaultLayout","currentSettingsTab","joined","muteAllInProgress","lobbyPeersPromotionInProgress","stopAllVideoInProgress","closeMeetingInProgress","clearChatInProgress","clearFileSharingInProgress","action","roomState","supported","currentConsumer","stopAllScreenSharingInProgress","webcamDevices","webcamInProgress","audioInProgress","screenShareInProgress","displayNameInProgress","raisedHandInProgress","isSpeaking","audioOutputDevices","producers","newState","newProducer","peerVideoInProgress","peerAudioInProgress","peerScreenInProgress","peerKickInProgress","stopPeerAudioInProgress","stopPeerVideoInProgress","stopPeerScreenSharingInProgress","oldPeer","lobbyPeer","promotionInProgress","oldLobbyPeer","newConsumer","currentSpatialLayer","currentTemporalLayer","peerVolumes","dBs","notifications","createNewMessage","sender","time","chat","unreadMessages","unreadFiles","toolTab","newFile","active","newFileHistory","advancedMode","defaultResolution","defaultFrameRate","defaultScreenResolution","defaultScreenSharingFrameRate","permanentTopBar","hiddenControls","showNotifications","buttonControlBar","drawerOverlayed","defaultAudio","transports","combineReducers","persistConfig","storage","stateReconciler","autoMergeLevel2","whitelist","reduxMiddlewares","thunk","reduxLogger","createLogger","predicate","duration","timestamp","level","logErrors","push","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","pReducer","persistReducer","rootReducer","createStore","persistStore","APP_NAME","prefix","_debug","_warn","_error","info","bind"],"mappings":"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","file":"static/js/main.b1be4b7d.chunk.js","sourcesContent":["export const setMe = ({ peerId, loginEnabled }) =>\n\t({\n\t\ttype    : 'SET_ME',\n\t\tpayload : { peerId, loginEnabled }\n\t});\n\nexport const setBrowser = (browser) =>\n\t({\n\t\ttype    : 'SET_BROWSER',\n\t\tpayload : { browser }\n\t});\n\nexport const loggedIn = (flag) =>\n\t({\n\t\ttype    : 'LOGGED_IN',\n\t\tpayload : { flag }\n\t});\n\nexport const addRole = (role) =>\n\t({\n\t\ttype    : 'ADD_ROLE',\n\t\tpayload : { role }\n\t});\n\nexport const removeRole = (role) =>\n\t({\n\t\ttype    : 'REMOVE_ROLE',\n\t\tpayload : { role }\n\t});\n\nexport const setPicture = (picture) =>\n\t({\n\t\ttype    : 'SET_PICTURE',\n\t\tpayload : { picture }\n\t});\n\nexport const setMediaCapabilities = ({\n\tcanSendMic,\n\tcanSendWebcam,\n\tcanShareScreen,\n\tcanShareFiles\n}) =>\n\t({\n\t\ttype    : 'SET_MEDIA_CAPABILITIES',\n\t\tpayload : { canSendMic, canSendWebcam, canShareScreen, canShareFiles }\n\t});\n\nexport const setAudioDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setAudioOutputDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setWebcamDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setRaisedHand = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioOutputInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setWebcamInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setScreenShareInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARE_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRaisedHandInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setDisplayNameInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setIsSpeaking = (flag) =>\n\t({\n\t\ttype    : 'SET_IS_SPEAKING',\n\t\tpayload : { flag }\n\t});\n\nexport const setAutoMuted = (flag) =>\n\t({\n\t\ttype    : 'SET_AUTO_MUTED',\n\t\tpayload : { flag }\n\t});\n","/**\n * Create a function which will call the callback function\n * after the given amount of milliseconds has passed since\n * the last time the callback function was called.\n */\nexport const idle = (callback, delay) =>\n{\n\tlet handle;\n\n\treturn () =>\n\t{\n\t\tif (handle)\n\t\t{\n\t\t\tclearTimeout(handle);\n\t\t}\n\n\t\thandle = setTimeout(callback, delay);\n\t};\n};\n\n/**\n * Error produced when a socket request has a timeout.\n */\nexport class SocketTimeoutError extends Error\n{\n\tconstructor(message)\n\t{\n\t\tsuper(message);\n\n\t\tthis.name = 'SocketTimeoutError';\n\n\t\tif (Error.hasOwnProperty('captureStackTrace')) // Just in V8.\n\t\t\tError.captureStackTrace(this, SocketTimeoutError);\n\t\telse\n\t\t\tthis.stack = (new Error(message)).stack;\n\t}\n}","import React from 'react';\n\nimport './LoadingView.css';\n\nconst LoadingView = () =>\n{\n\treturn (\n\t\t<div className='LoadingView' />\n\t);\n};\n\nexport default LoadingView;\n","export function getSignalingUrl(peerId, roomId)\n{\n\tconst port =\n\t\tprocess.env.NODE_ENV !== 'production' ?\n\t\t\twindow.config.developmentPort\n\t\t\t:\n\t\t\twindow.config.productionPort;\n\n\tconst url = `wss://${window.location.hostname}:${port}/?peerId=${peerId}&roomId=${roomId}`;\n\n\treturn url;\n}\n","import Logger from './Logger';\nimport hark from 'hark';\nimport { getSignalingUrl } from './urlFactory';\nimport { SocketTimeoutError } from './utils';\nimport * as requestActions from './actions/requestActions';\nimport * as meActions from './actions/meActions';\nimport * as roomActions from './actions/roomActions';\nimport * as peerActions from './actions/peerActions';\nimport * as peerVolumeActions from './actions/peerVolumeActions';\nimport * as settingsActions from './actions/settingsActions';\nimport * as chatActions from './actions/chatActions';\nimport * as fileActions from './actions/fileActions';\nimport * as lobbyPeerActions from './actions/lobbyPeerActions';\nimport * as consumerActions from './actions/consumerActions';\nimport * as producerActions from './actions/producerActions';\nimport * as notificationActions from './actions/notificationActions';\nimport * as transportActions from './actions/transportActions';\n\nlet createTorrent;\n\nlet WebTorrent;\n\nlet saveAs;\n\nlet mediasoupClient;\n\nlet io;\n\nlet ScreenShare;\n\nlet Spotlights;\n\nlet requestTimeout,\n\ttransportOptions,\n\tlastN,\n\tmobileLastN;\n\nif (process.env.NODE_ENV !== 'test')\n{\n\t({\n\t\trequestTimeout,\n\t\ttransportOptions,\n\t\tlastN,\n\t\tmobileLastN\n\t} = window.config);\n}\n\nconst logger = new Logger('RoomClient');\n\nconst ROOM_OPTIONS =\n{\n\trequestTimeout   : requestTimeout,\n\ttransportOptions : transportOptions\n};\n\nconst VIDEO_CONSTRAINS =\n{\n\t'low' :\n\t{\n\t\twidth       : { ideal: 320 },\n\t\taspectRatio : 1.334\n\t},\n\t'medium' :\n\t{\n\t\twidth       : { ideal: 640 },\n\t\taspectRatio : 1.334\n\t},\n\t'high' :\n\t{\n\t\twidth       : { ideal: 1280 },\n\t\taspectRatio : 1.334\n\t},\n\t'veryhigh' :\n\t{\n\t\twidth       : { ideal: 1920 },\n\t\taspectRatio : 1.334\n\t},\n\t'ultra' :\n\t{\n\t\twidth       : { ideal: 3840 },\n\t\taspectRatio : 1.334\n\t}\n};\n\nconst PC_PROPRIETARY_CONSTRAINTS =\n{\n\toptional : [ { googDscp: true } ]\n};\n\nconst VIDEO_SIMULCAST_ENCODINGS =\n[\n\t{ scaleResolutionDownBy: 4 },\n\t{ scaleResolutionDownBy: 2 },\n\t{ scaleResolutionDownBy: 1 }\n];\n\n// Used for VP9 webcam video.\nconst VIDEO_KSVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3_KEY' }\n];\n\n// Used for VP9 desktop sharing.\nconst VIDEO_SVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3', dtx: true }\n];\n\nlet store;\n\nlet intl;\n\nexport default class RoomClient\n{\n\t/**\n\t * @param  {Object} data\n\t * @param  {Object} data.store - The Redux store.\n\t * @param  {Object} data.intl - react-intl object\n\t */\n\tstatic init(data)\n\t{\n\t\tstore = data.store;\n\t\tintl = data.intl;\n\t}\n\n\tconstructor(\n\t\t{\n\t\t\tpeerId,\n\t\t\taccessCode,\n\t\t\tdevice,\n\t\t\tproduce,\n\t\t\tforceTcp,\n\t\t\tdisplayName,\n\t\t\tfixed,\n\t\t\tsilenced,\n\t\t\tmuted,\n\t\t\tbasePath\n\t\t} = {})\n\t{\n\t\tif (!peerId)\n\t\t\tthrow new Error('Missing peerId');\n\t\telse if (!device)\n\t\t\tthrow new Error('Missing device');\n\n\t\tlogger.debug(\n\t\t\t'constructor() [peerId: \"%s\", device: \"%s\", produce: \"%s\", forceTcp: \"%s\", displayName \"\"]',\n\t\t\tpeerId, device.flag, produce, forceTcp, displayName);\n\n\t\tthis._signalingUrl = null;\n\n\t\t// Closed flag.\n\t\tthis._closed = false;\n\n\t\t// Whether we should produce.\n\t\tthis._produce = produce;\n\n\t\t// Whether we force TCP\n\t\tthis._forceTcp = forceTcp;\n\n\t\t// URL basepath\n\t\tthis._basePath = basePath;\n\n\t\t// Use displayName\n\t\tif (displayName)\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\tthis._tracker = 'wss://tracker.lab.vvc.niif.hu:443';\n\n\t\t// Torrent support\n\t\tthis._torrentSupport = null;\n\n\t\t// Whether simulcast should be used.\n\t\tthis._useSimulcast = false;\n\n\t\tif ('simulcast' in window.config)\n\t\t\tthis._useSimulcast = window.config.simulcast;\n\n\t\t// Whether simulcast should be used for sharing\n\t\tthis._useSharingSimulcast = false;\n\n\t\tif ('simulcastSharing' in window.config)\n\t\t\tthis._useSharingSimulcast = window.config.simulcastSharing;\n\n\t\tthis._muted = muted;\n\n\t\t// This device\n\t\tthis._device = device;\n\n\t\t// My peer name.\n\t\tthis._peerId = peerId;\n\n\t\t// Access code\n\t\tthis._accessCode = accessCode;\n\n\t\t// Alert sound\n\t\tthis._soundAlert = new Audio('/sounds/notify.mp3');\n\n\t\t// Socket.io peer connection\n\t\tthis._signalingSocket = null;\n\n\t\t// The room ID\n\t\tthis._roomId = null;\n\n\t\t// mediasoup-client Device instance.\n\t\t// @type {mediasoupClient.Device}\n\t\tthis._mediasoupDevice = null;\n\n\t\t// Put the browser info into state\n\t\tstore.dispatch(meActions.setBrowser(device));\n\n\t\t// Our WebTorrent client\n\t\tthis._webTorrent = null;\n\n\t\t// Max spotlights\n\t\tif (device.platform === 'desktop')\n\t\t\tthis._maxSpotlights = lastN;\n\t\telse\n\t\t\tthis._maxSpotlights = mobileLastN;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(this._maxSpotlights));\n\n\t\t// Manager of spotlight\n\t\tthis._spotlights = null;\n\t\tthis._fixed = fixed;\n\t\tthis._roomType = \"democratic\";\n\t\tthis._silenced =silenced;\n\n\t\t// Transport for sending.\n\t\tthis._sendTransport = null;\n\n\t\t// Transport for receiving.\n\t\tthis._recvTransport = null;\n\n\t\t// Local mic mediasoup Producer.\n\t\tthis._micProducer = null;\n\n\t\t// Local mic hark\n\t\tthis._hark = null;\n\n\t\t// Local MediaStream for hark\n\t\tthis._harkStream = null;\n\n\t\t// Local webcam mediasoup Producer.\n\t\tthis._webcamProducer = null;\n\n\t\t// Extra videos being produced\n\t\tthis._extraVideoProducers = new Map();\n\n\t\t// Map of webcam MediaDeviceInfos indexed by deviceId.\n\t\t// @type {Map<String, MediaDeviceInfos>}\n\t\tthis._webcams = {};\n\n\t\tthis._audioDevices = {};\n\n\t\tthis._audioOutputDevices = {};\n\n\t\t// mediasoup Consumers.\n\t\t// @type {Map<String, mediasoupClient.Consumer>}\n\t\tthis._consumers = new Map();\n\n\t\tthis._screenSharing = null;\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._startKeyListener();\n\n\t\tthis._startDevicesListener();\n\t}\n\n\tclose()\n\t{\n\t\tif (this._closed)\n\t\t\treturn;\n\n\t\tthis._closed = true;\n\n\t\tlogger.debug('close()');\n\n\t\tthis._signalingSocket.close();\n\n\t\t// Close mediasoup Transports.\n\t\tif (this._sendTransport)\n\t\t\tthis._sendTransport.close();\n\n\t\tif (this._recvTransport)\n\t\t\tthis._recvTransport.close();\n\n\t\tstore.dispatch(roomActions.setRoomState('closed'));\n\n\t\twindow.location = '/'+this._roomId;\n\t}\n\n\t_startKeyListener()\n\t{\n\t\t// Add keydown event listener on document\n\t\tdocument.addEventListener('keydown', (event) =>\n\t\t{\n\t\t\tif (event.repeat) return;\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyDown() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\t\t\t\t\tcase String.fromCharCode(37):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getPrevAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase String.fromCharCode(39):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getNextAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'A': // Activate advanced mode\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(settingsActions.toggleAdvancedMode());\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.toggleAdvancedMode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Toggled advanced mode'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '1': // Set democratic view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('democratic'));\n\t\t\t\t\t\tthis._spotlights.setRoomType('democratic')\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setDemocraticView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to democratic view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '2': // Set filmstrip view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\t\t\t\t\tthis._spotlights.setRoomType('filmstrip');\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setFilmStripView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to filmstrip view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase ' ': // Push To Talk start\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer && !this._silenced)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'M': // Toggle microphone\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Muted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(!this._silenced) {\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneUnMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unmuted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateMic({ start: true });\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneEnable',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enabled your microphone'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'V': // Toggle video\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.updateWebcam({ start: true });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'H': // Open help dialog\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setHelpOpen(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('keyup', (event) =>\n\t\t{\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyUp() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\t\t\t\t\tcase ' ': // Push To Talk stop\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}, true);\n\n\t}\n\n\t_startDevicesListener()\n\t{\n\t\tnavigator.mediaDevices.addEventListener('devicechange', async () =>\n\t\t{\n\t\t\tlogger.debug('_startDevicesListener() | navigator.mediaDevices.ondevicechange');\n\n\t\t\tawait this._updateAudioDevices();\n\t\t\tawait this._updateWebcams();\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.devicesChanged',\n\t\t\t\t\t\tdefaultMessage : 'Your devices changed, configure your devices in the settings dialog'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t});\n\t}\n\n\tlogin(roomId = this._roomId)\n\t{\n\t\tconst url = `/auth/login?peerId=${this._peerId}&roomId=${roomId}`;\n\n\t\twindow.open(url, 'loginWindow');\n\t}\n\n\tlogout(roomId = this._roomId)\n\t{\n\t\twindow.open(`/auth/logout?peerId=${this._peerId}&roomId=${roomId}`, 'logoutWindow');\n\t}\n\n\treceiveLoginChildWindow(data)\n\t{\n\t\tlogger.debug('receiveFromChildWindow() | [data:\"%o\"]', data);\n\n\t\tconst { displayName, picture } = data;\n\n\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\t\tstore.dispatch(meActions.setPicture(picture));\n\n\t\tstore.dispatch(meActions.loggedIn(true));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedIn',\n\t\t\t\t\tdefaultMessage : 'You are logged in'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\treceiveLogoutChildWindow()\n\t{\n\t\tlogger.debug('receiveLogoutChildWindow()');\n\n\t\tstore.dispatch(meActions.setPicture(null));\n\n\t\tstore.dispatch(meActions.loggedIn(false));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedOut',\n\t\t\t\t\tdefaultMessage : 'You are logged out'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\t_soundNotification()\n\t{\n\t\tconst { notificationSounds } = store.getState().settings;\n\n\t\tif (notificationSounds)\n\t\t{\n\t\t\tconst alertPromise = this._soundAlert.play();\n\n\t\t\tif (alertPromise !== undefined)\n\t\t\t{\n\t\t\t\talertPromise\n\t\t\t\t\t.then()\n\t\t\t\t\t.catch((error) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error('_soundAlert.play() [error:\"%o\"]', error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttimeoutCallback(callback)\n\t{\n\t\tlet called = false;\n\n\t\tconst interval = setTimeout(\n\t\t\t() =>\n\t\t\t{\n\t\t\t\tif (called)\n\t\t\t\t\treturn;\n\t\t\t\tcalled = true;\n\t\t\t\tcallback(new SocketTimeoutError('Request timed out'));\n\t\t\t},\n\t\t\tROOM_OPTIONS.requestTimeout\n\t\t);\n\n\t\treturn (...args) =>\n\t\t{\n\t\t\tif (called)\n\t\t\t\treturn;\n\t\t\tcalled = true;\n\t\t\tclearTimeout(interval);\n\n\t\t\tcallback(...args);\n\t\t};\n\t}\n\n\t_sendRequest(method, data)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!this._signalingSocket)\n\t\t\t{\n\t\t\t\treject('No socket connection');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._signalingSocket.emit(\n\t\t\t\t\t'request',\n\t\t\t\t\t{ method, data },\n\t\t\t\t\tthis.timeoutCallback((err, response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (err)\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\tgetRoomId()\n\t{\n\t\treturn this._roomId;\n\n\t}\n\tasync getTransportStats()\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - recv [transportId: \"%s\"]', this._recvTransport.id);\n\n\t\t\t\tconst recv = await this.sendRequest('getTransportStats', { transportId: this._recvTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(recv, 'recv'));\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - send [transportId: \"%s\"]', this._sendTransport.id);\n\n\t\t\t\tconst send = await this.sendRequest('getTransportStats', { transportId: this._sendTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(send, 'send'));\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('getTransportStats() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendRequest(method, data)\n\t{\n\t\tlogger.debug('sendRequest() [method:\"%s\", data:\"%o\"]', method, data);\n\n\t\tconst {\n\t\t\trequestRetries = 3\n\t\t} = window.config;\n\n\t\tfor (let tries = 0; tries < requestRetries; tries++)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn await this._sendRequest(method, data);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\terror instanceof SocketTimeoutError &&\n\t\t\t\t\ttries < requestRetries\n\t\t\t\t)\n\t\t\t\t\tlogger.warn('sendRequest() | timeout, retrying [attempt:\"%s\"]', tries);\n\t\t\t\telse\n\t\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync changeDisplayName(displayName)\n\t{\n\t\tlogger.debug('changeDisplayName() [displayName:\"%s\"]', displayName);\n\t\tvar unid = (new Date().getTime()).toString(36);\n\t\n\t\tif (!displayName)\n\t\t\tdisplayName = 'Guest ' + unid;\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changedDisplayName',\n\t\t\t\t\t\tdefaultMessage : 'Your display name changed to {displayName}'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tdisplayName\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeDisplayName() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changeDisplayNameError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while changing your display name'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(false));\n\t}\n\n\tasync changePicture(picture)\n\t{\n\t\tlogger.debug('changePicture() [picture: \"%s\"]', picture);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changePicture() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendChatMessage(chatMessage)\n\t{\n\t\tlogger.debug('sendChatMessage() [chatMessage:\"%s\"]', chatMessage);\n\n\t\ttry\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tchatActions.addUserMessage(chatMessage.text));\n\n\t\t\tawait this.sendRequest('chatMessage', { chatMessage });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendChatMessage() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.chatError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to send chat message'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tsaveFile(file)\n\t{\n\t\tfile.getBlob((err, blob) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.saveFileError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to save file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsaveAs(blob, file.name);\n\t\t});\n\t}\n\n\thandleDownload(magnetUri)\n\t{\n\t\tstore.dispatch(\n\t\t\tfileActions.setFileActive(magnetUri));\n\n\t\tconst existingTorrent = this._webTorrent.get(magnetUri);\n\n\t\tif (existingTorrent)\n\t\t{\n\t\t\t// Never add duplicate torrents, use the existing one instead.\n\t\t\tthis._handleTorrent(existingTorrent);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._webTorrent.add(magnetUri, this._handleTorrent);\n\t}\n\n\t_handleTorrent(torrent)\n\t{\n\t\t// Torrent already done, this can happen if the\n\t\t// same file was sent multiple times.\n\t\tif (torrent.progress === 1)\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet lastMove = 0;\n\n\t\ttorrent.on('download', () =>\n\t\t{\n\t\t\tif (Date.now() - lastMove > 1000)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tfileActions.setFileProgress(\n\t\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\t\ttorrent.progress\n\t\t\t\t\t));\n\n\t\t\t\tlastMove = Date.now();\n\t\t\t}\n\t\t});\n\n\t\ttorrent.on('done', () =>\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\t\t});\n\t}\n\n\tasync shareFiles(files)\n\t{\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'filesharing.startingFileShare',\n\t\t\t\t\tdefaultMessage : 'Attempting to share file'\n\t\t\t\t})\n\t\t\t}));\n\n\t\tcreateTorrent(files, (err, torrent) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst existingTorrent = this._webTorrent.get(torrent);\n\n\t\t\tif (existingTorrent)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\tthis._peerId,\n\t\t\t\t\texistingTorrent.magnetURI\n\t\t\t\t));\n\n\t\t\t\tthis._sendFile(existingTorrent.magnetURI);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._webTorrent.seed(\n\t\t\t\tfiles,\n\t\t\t\t{ announceList: [ [ this._tracker ] ] },\n\t\t\t\t(newTorrent) =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\t\tthis._peerId,\n\t\t\t\t\t\tnewTorrent.magnetURI\n\t\t\t\t\t));\n\n\t\t\t\t\tthis._sendFile(newTorrent.magnetURI);\n\t\t\t\t});\n\t\t});\n\t}\n\n\t// { file, name, picture }\n\tasync _sendFile(magnetUri)\n\t{\n\t\tlogger.debug('sendFile() [magnetUri:\"%o\"]', magnetUri);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('sendFile', { magnetUri });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendFile() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync muteMic()\n\t{\n\t\tlogger.debug('muteMic()');\n\n\t\tthis._micProducer.pause();\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'pauseProducer', { producerId: this._micProducer.id });\n\n\t\t\tstore.dispatch(\n\t\t\t\tproducerActions.setProducerPaused(this._micProducer.id));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneMuteError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to mute your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync unmuteMic()\n\t{\n\t\tlogger.debug('unmuteMic()');\n\n\t\tif (!this._micProducer)\n\t\t{\n\t\t\tthis.updateMic({ start: true });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._micProducer.resume();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait this.sendRequest(\n\t\t\t\t\t'resumeProducer', { producerId: this._micProducer.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.setProducerResumed(this._micProducer.id));\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('unmuteMic() [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'devices.microphoneUnMuteError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to unmute your microphone'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tchangeMaxSpotlights(maxSpotlights)\n\t{\n\t\tthis._spotlights.maxSpotlights = maxSpotlights;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(maxSpotlights));\n\t}\n\tasync pageNavigate(direction)\n\t{\n\t\tvar currentPage = this._spotlights.getPage();\n\t\tconsole.log(\"updateSpotlights page at \" + currentPage);\n\n\t\tif(direction == 'previous'){\n\t\t\tif(currentPage == 0){return}\n\t\t\tconsole.log(\"updateSpotlights going to \" + (currentPage-1));\n\n\t\t\tthis._spotlights.setPage(currentPage - 1);\n\t\t}\n\n\t\tif(direction == 'next'){\n\t\t\tconsole.log(\"varun testing going to \" + (currentPage+1));\n\t\t\tconsole.log(this._spotlights.maxSpotlights +\" varun testing multiplication:\"+ this._spotlights.maxSpotlights * (currentPage+1) + \" spotlight length: \" + this._spotlights.getPeersLength());\n\t\t\tif(this._spotlights.maxSpotlights * (currentPage+1)> this._spotlights.getPeersLength() ) {return;}\n\t\t\tthis._spotlights.setPage(currentPage + 1);\n\t\t}\n\n\t}\n\n\t// Updated consumers based on spotlights\n\tasync updateSpotlights(spotlights)\n\t{\n\t\t//console.log(\"varun spotlights before: \" + spotlights);\n\t\tif(typeof spotlights === 'undefined'){spotlights = this._spotlights.getCurrent();}\n\t\tlogger.debug('updateSpotlights()');\n\t\ttry{\n\t\t//console.log(\"varun testing from room client this._fixed: \" + this._fixed + \" \"+ store.getState().peers[this._fixed].displayName+\" roomType \" + this._roomType);\n\t\t} catch (err){ console.log(err);}\n\t\t//console.log(\"varun spotlights after: \" + spotlights);\n\t\tconsole.log(\"varun spotlights length: \" + spotlights.length);\n\t\t\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.kind === 'video')\n\t\t\t\t{\n\t\t\t\t\tvar displayNameTemp = store.getState().peers[consumer.appData.peerId].displayName;\n\t\t\t\t\tconsole.log(\"currently at \"+ displayNameTemp);\n\t\t\t\t\t\t\n\t\t\t\t\tif (spotlights.includes(consumer.appData.peerId)  || this._fixed == consumer.appData.peerId){\n\t\t\t\t\t\tif(this._fixed != consumer.appData.peerId && this._roomType == 'filmstrip') {\n\t\t\t\t\t\t\tconsole.log('varun calling preferred low '+ consumer.preferredSpatialLayer +' for ' + displayNameTemp);\n\t\t\t\t\t\t\tif(consumer.preferredSpatialLayer != 0 || typeof consumer.preferredSpatialLayer === 'undefined') {\n\t\t\t\t\t\t\t\tawait this._preferLow(consumer);\n\t\t\t\t\t\t\t\tconsumer.preferredSpatialLayer = 0;\n\t\t\t\t\t\t\t\tconsumer.preferredTemporalLayer = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(this._fixed == consumer.appData.peerId )\t{\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar cId = consumer.id;\n\t\t\t\t\t\t\t\tconsole.log(\"varun profile applying hight \" + consumer.preferredSpatialLayer + \" for \"  + displayNameTemp);\t\n\t\t\t\t\t\t\tif (consumer.preferredSpatialLayer < 3 || typeof consumer.preferredSpatialLayer === 'undefined'){\t\t\n\t\t\t\t\t\t\t\tawait this.setConsumerPreferredLayers(cId, 3, 3);\n\t\t\t\t\t\t\t\tconsumer.preferredSpatialLayer = 2;\n\t\t\t\t\t\t\t\tconsumer.preferredTemporalLayer = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (err){ console.log(err.message)}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(\"varun spotlight:  room type \" + this._roomType );\n\t\t\t\t\t\tif (spotlights.includes(consumer.appData.peerId)  && this._roomType == 'democratic'){\n\t\t\t\t\t\t\tif(spotlights.length>4){\n\t\t\t\t\t\t\t\tconsole.log(\"varun spotlights legnth greater than 2\");\n\t\t\t\t\t\t\t\tconsole.log(\"varun spotlight current \" + consumer.preferredSpatialLayer +\" for \" + displayNameTemp);\n\t\t\t\t\t\t\t\tif(consumer.preferredSpatialLayer !=0 || typeof consumer.preferredSpatialLayer === 'undefined') {\n\t\t\t\t\t\t\t\t\tconsole.log('varun calling preferred low '+ consumer.preferredSpatialLayer +' for ' + displayNameTemp);\n\t\t\t\t\t\t\t\t\tvar cId = consumer.id;\n\t\t\t\t\t\t\t\t\tawait this.setConsumerPreferredLayers(cId,0, 0);\n\t\t\t\t\t\t\t\t\tconsumer.preferredSpatialLayer = 0;\n\t\t\t\t\t\t\t\t\tconsumer.preferredTemporalLayer = 0;\n\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t   } else if(consumer.preferredSpatialLayer < 3 || typeof consumer.preferredSpatialLayer === 'undefined') {\n\t\t\t\t\t\t\t\t\tvar cId = consumer.id;\n\t\t\t\t\t\t\t\t\tconsole.log('varun calling preferred high '+ consumer.preferredSpatialLayer +' for ' + displayNameTemp);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tawait this.setConsumerPreferredLayers(cId, 3, 3);\n\t\t\t\t\t\t\t\t\tconsumer.preferredSpatialLayer = 3;\n\t\t\t\t\t\t\t\t\tconsumer.preferredTemporalLayer = 3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateSpotlights() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tdisconnectLocalHark()\n\t{\n\t\tlogger.debug('disconnectLocalHark()');\n\n\t\tif (this._harkStream != null)\n\t\t{\n\t\t\tlet [ track ] = this._harkStream.getAudioTracks();\n\n\t\t\ttrack.stop();\n\t\t\ttrack = null;\n\n\t\t\tthis._harkStream = null;\n\t\t}\n\n\t\tif (this._hark != null)\n\t\t\tthis._hark.stop();\n\t}\n\n\tconnectLocalHark(track)\n\t{\n\t\tlogger.debug('connectLocalHark() [track:\"%o\"]', track);\n\n\t\tthis._harkStream = new MediaStream();\n\n\t\tconst newTrack = track.clone();\n\n\t\tthis._harkStream.addTrack(newTrack);\n\n\t\tnewTrack.enabled = true;\n\n\t\tthis._hark = hark(this._harkStream,\n\t\t\t{\n\t\t\t\tplay      : false,\n\t\t\t\tinterval  : 10,\n\t\t\t\tthreshold : store.getState().settings.noiseThreshold,\n\t\t\t\thistory   : 100\n\t\t\t});\n\n\t\tthis._hark.lastVolume = -100;\n\n\t\tthis._hark.on('volume_change', (volume) =>\n\t\t{\n\t\t\tvolume = Math.round(volume);\n\n\t\t\tif (this._micProducer && (volume !== Math.round(this._hark.lastVolume)))\n\t\t\t{\n\t\t\t\tif (volume < this._hark.lastVolume)\n\t\t\t\t{\n\t\t\t\t\tvolume =\n\t\t\t\t\t\tthis._hark.lastVolume -\n\t\t\t\t\t\tMath.pow(\n\t\t\t\t\t\t\t(volume - this._hark.lastVolume) /\n\t\t\t\t\t\t\t(100 + this._hark.lastVolume)\n\t\t\t\t\t\t\t, 4\n\t\t\t\t\t\t) * 2;\n\t\t\t\t}\n\n\t\t\t\tthis._hark.lastVolume = volume;\n\n\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(this._peerId, volume));\n\t\t\t}\n\t\t});\n\n\t\tthis._hark.on('speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(true));\n\n\t\t\tif (\n\t\t\t\t(store.getState().settings.voiceActivatedUnmute ||\n\t\t\t\tstore.getState().me.isAutoMuted) &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\tthis._micProducer.paused\n\t\t\t)\n\t\t\t\tthis._micProducer.resume();\n\n\t\t\tstore.dispatch(meActions.setAutoMuted(false)); // sanity action\n\t\t});\n\n\t\tthis._hark.on('stopped_speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(false));\n\n\t\t\tif (\n\t\t\t\tstore.getState().settings.voiceActivatedUnmute &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\t!this._micProducer.paused\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis._micProducer.pause();\n\n\t\t\t\tstore.dispatch(meActions.setAutoMuted(true));\n\t\t\t}\n\t\t});\n\t}\n\n\tasync changeAudioOutputDevice(deviceId)\n\t{\n\t\tlogger.debug('changeAudioOutputDevice() [deviceId:\"%s\"]', deviceId);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._audioOutputDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('Selected audio output device no longer available');\n\n\t\t\tstore.dispatch(settingsActions.setSelectedAudioOutputDevice(deviceId));\n\n\t\t\tawait this._updateAudioOutputDevices();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeAudioOutputDevice() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(false));\n\t}\n\n\tasync updateMic({ start = false, restart = false, newDeviceId = null } = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateMic() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('audio'))\n\t\t\t\tthrow new Error('cannot produce audio');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(newDeviceId));\n\n\t\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\t\tconst deviceId = await this._getAudioDeviceId();\n\t\t\tconst device = this._audioDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no audio devices');\n\n\t\t\tconst {\n\t\t\t\tsampleRate,\n\t\t\t\tchannelCount,\n\t\t\t\tvolume,\n\t\t\t\tautoGainControl,\n\t\t\t\techoCancellation,\n\t\t\t\tnoiseSuppression,\n\t\t\t\tsampleSize\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (\n\t\t\t\t(restart && this._micProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.disconnectLocalHark();\n\n\t\t\t\tif (this._micProducer)\n\t\t\t\t\tawait this.disableMic();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\taudio : {\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t([ track ] = stream.getAudioTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(trackDeviceId));\n\n\t\t\t\tthis._micProducer = await this._sendTransport.produce(\n\t\t\t\t\t{\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\topusStereo          : false,\n\t\t\t\t\t\t\topusDtx             : true,\n\t\t\t\t\t\t\topusFec             : true,\n\t\t\t\t\t\t\topusPtime           : '3',\n\t\t\t\t\t\t\topusMaxPlaybackRate\t: 48000\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{ source: 'mic' }\n\t\t\t\t\t});\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._micProducer.id,\n\t\t\t\t\t\tsource        : 'mic',\n\t\t\t\t\t\tpaused        : this._micProducer.paused,\n\t\t\t\t\t\ttrack         : this._micProducer.track,\n\t\t\t\t\t\trtpParameters : this._micProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._micProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._micProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._micProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.microphoneDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Microphone disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableMic();\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.volume = 0;\n\n\t\t\t\tthis.connectLocalHark(track);\n\t\t\t}\n\t\t\telse if (this._micProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._micProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\tvolume,\n\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\tsampleSize\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tif (this._harkStream != null)\n\t\t\t\t{\n\t\t\t\t\tconst [ harkTrack ] = this._harkStream.getAudioTracks();\n\n\t\t\t\t\tharkTrack && await harkTrack.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateWebcam({\n\t\tstart = false,\n\t\trestart = false,\n\t\tnewDeviceId = null,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateWebcam() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\", newResolution:\"%s\", newFrameRate:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId,\n\t\t\tnewResolution,\n\t\t\tnewFrameRate\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(newDeviceId));\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setVideoResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setVideoFrameRate(newFrameRate));\n\n\t\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\t\tconst deviceId = await this._getWebcamDeviceId();\n\t\t\tconst device = this._webcams[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst {\n\t\t\t\tresolution,\n\t\t\t\tframeRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (\n\t\t\t\t(restart && this._webcamProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\tawait this.disableWebcam();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\tvideo :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(trackDeviceId));\n\n\t\t\t\tif (this._useSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\t\telse\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._webcamProducer.id,\n\t\t\t\t\t\tsource        : 'webcam',\n\t\t\t\t\t\tpaused        : this._webcamProducer.paused,\n\t\t\t\t\t\ttrack         : this._webcamProducer.track,\n\t\t\t\t\t\trtpParameters : this._webcamProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._webcamProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._webcamProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._webcamProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._webcamProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._webcamProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\tframeRate\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Also change resolution of extra video producers\n\t\t\t\tfor (const producer of this._extraVideoProducers.values())\n\t\t\t\t{\n\t\t\t\t\t({ track } = producer);\n\n\t\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateWebcam() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\tsetSelectedPeer(peerId)\n\t{\n\t\tlogger.debug('setSelectedPeer() [peerId:\"%s\"]', peerId);\n\n\t\tthis._spotlights.setPeerSpotlight(peerId);\n\n\t\tstore.dispatch(\n\t\t\troomActions.setSelectedPeer(peerId));\n\t}\n\n\tasync makeModerator(peerId)\n\t{\n\t\tlogger.debug('setSelectedPeer() [peerId:\"%s\"]', peerId);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:makeModerator', peerId);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\tlogger.error('makeModerator [error:\"%o\"]', error);\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.requestError',\n\t\t\t\t\t\tdefaultMessage : 'makeModerator'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t}\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.newPeer',\n\t\t\t\t\tdefaultMessage : 'Assigned new moderator'\n\t\t\t\t}, {\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t}));\n\n\n\t}\n\n\tasync setFixedPeer(peerId)\n\t{\n\t\tlogger.debug('setSelectedPeer() [peerId:\"%s\"]', peerId);\n\t\tconsole.log(\"varun room remove called \" + peerId);\n\t\tif(peerId == 'none'){\n\t\t\tthis._spotlights.setFixedSpotlight(peerId);\n\t\t\tstore.dispatch(roomActions.setDisplayMode('democratic'));\n\t\t\tthis._spotlights.setRoomType('democratic');\n\t\t\tthis._roomType = 'democratic';\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait this.sendRequest('moderator:setFixedSpotlight', 'none');\n\t\t\t\tconsole.log(\"varun room relay called \");\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\tlogger.error('setFixedPeer [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.requestError',\n\t\t\t\t\t\t\tdefaultMessage : 'setFixedPeer'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\t\t\tthis.updateSpotlights(this._spotlights.getCurrent());\t\n\t\t\treturn;\n\t\t}\n\t\tthis._fixed = peerId;\n\t\tthis._roomType = 'filmstrip';\n\t\tthis._spotlights.setFixedSpotlight(peerId);\n\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\tthis._spotlights.setRoomType('filmstrip');\t\t\t\t\t\t\n\t\t//store.dispatch(roomActions.setFixedPeer(peerId));\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:setFixedSpotlight', peerId);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setFixedPeer [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.requestError',\n\t\t\t\t\t\t\tdefaultMessage : 'setFixedPeer'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t}\n\t\tthis.setSelectedPeer(peerId);\n\t\tthis.updateSpotlights(this._spotlights.getCurrent());\n\t}\n\t\n\tasync promoteAllLobbyPeers()\n\t{\n\t\tlogger.debug('promoteAllLobbyPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promoteAllPeers');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteAllLobbyPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(false));\n\t}\n\n\tasync promoteLobbyPeer(peerId)\n\t{\n\t\tlogger.debug('promoteLobbyPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promotePeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteLobbyPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, false));\n\t}\n\n\tasync clearChat()\n\t{\n\t\tlogger.debug('clearChat()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearChat');\n\n\t\t\tstore.dispatch(chatActions.clearChat());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearChat() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(false));\n\t}\n\n\tasync clearFileSharing()\n\t{\n\t\tlogger.debug('clearFileSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearFileSharing');\n\n\t\t\tstore.dispatch(fileActions.clearFiles());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearFileSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(false));\n\t}\n\n\tasync kickPeer(peerId)\n\t{\n\t\tlogger.debug('kickPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:kickPeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('kickPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, false));\n\t}\n\n\tasync mutePeer(peerId)\n\t{\n\t\tlogger.debug('mutePeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:mute', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('mutePeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, false));\n\t}\n\n\tasync stopPeerVideo(peerId)\n\t{\n\t\tlogger.debug('stopPeerVideo() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopVideo', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, false));\n\t}\n\n\tasync stopPeerScreenSharing(peerId)\n\t{\n\t\tlogger.debug('stopPeerScreenSharing() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopScreenSharing', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, false));\n\t}\n\n\tasync muteAllPeers()\n\t{\n\t\tlogger.debug('muteAllPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:muteAll');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteAllPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(false));\n\t}\n\n\tasync silenceRoom()\n\t{\n\t\tlogger.debug('silenceRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('silenceRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setSilenceRoom());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youSilenced',\n\t\t\t\t\t\tdefaultMessage : 'You silence locked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to silence lock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('silenceRoom() [error:\"%o\"]', error);\n\t\t}\n\t\n\t}\n\n\t\n\tasync unsilenceRoom()\n\t{\n\t\tlogger.debug('unsilenceRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('unsilenceRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setUnsilenceRoom());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youUnSilenced',\n\t\t\t\t\t\tdefaultMessage : 'You silence Unlocked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to silence Unlock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('unsilenceRoom() [error:\"%o\"]', error);\n\t\t}\n\t\n\t}\n\tasync stopAllPeerVideo()\n\t{\n\t\tlogger.debug('stopAllPeerVideo()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllVideo');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(false));\n\t}\n\n\tasync stopAllPeerScreenSharing()\n\t{\n\t\tlogger.debug('stopAllPeerScreenSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllScreenSharing');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(false));\n\t}\n\n\tasync closeMeeting()\n\t{\n\t\tlogger.debug('closeMeeting()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:closeMeeting');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('closeMeeting() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(false));\n\t}\n\n\t// type: mic/webcam/screen\n\t// mute: true/false\n\tasync modifyPeerConsumer(peerId, type, mute)\n\t{\n\t\tlogger.debug(\n\t\t\t'modifyPeerConsumer() [peerId:\"%s\", type:\"%s\"]',\n\t\t\tpeerId,\n\t\t\ttype\n\t\t);\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, true));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, true));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.appData.peerId === peerId && consumer.appData.source === type)\n\t\t\t\t{\n\t\t\t\t\tif (mute)\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t\telse\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('modifyPeerConsumer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, false));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, false));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, false));\n\t}\n\n\tasync _pauseConsumer(consumer)\n\t{\n\t\tlogger.debug('_pauseConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('pauseConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.pause();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerPaused(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_pauseConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _resumeConsumer(consumer)\n\t{\n\t\tlogger.debug('_resumeConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (!consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('resumeConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.resume();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerResumed(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_resumeConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _preferLow(consumer)\n\t{\n\t\tlogger.debug('_resumeConsumer() [consumer:\"%o\"]', consumer);\n\t\tconsole.log(\"varun profile applying profile \" + consumer.preferredSpatialLayer);\t\n\t\tconsole.log(consumer);\n\t\tvar consumerId = consumer.id;\n\t\tif (consumer.paused || consumer.closed)\n\t\t\treturn;\n\t\ttry\n\t\t\t{\n\t\t\t\tawait this.sendRequest('setPreferredProfile', { consumerId });\n\t\t\t}\n\t\t\tcatch (err)\n\t\t\t{\n\t\t\t\tconsole.log(\"varun err stack: \" + err.stack);\n\t\t\t\tconsole.log(\"varun err message: \" + err.message);\n\n\t\t\t\tconsole.log(\"varun err to string: \"+err.toString());\n\t\t\t\tlogger.error('setPreferredProfile() [error:\"%o\"]', err);\n\t\t\t}\n\t\t\n\t}\n\tasync lowerPeerHand(peerId)\n\t{\n\t\tlogger.debug('lowerPeerHand() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:lowerHand', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('lowerPeerHand() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, false));\n\t}\n\n\tasync setRaisedHand(raisedHand)\n\t{\n\t\tlogger.debug('setRaisedHand: ', raisedHand);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('raisedHand', { raisedHand });\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setRaisedHand(raisedHand));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setRaisedHand() [error:\"%o\"]', error);\n\n\t\t\t// We need to refresh the component for it to render changed state\n\t\t\tstore.dispatch(meActions.setRaisedHand(!raisedHand));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(false));\n\t}\n\n\tasync setMaxSendingSpatialLayer(spatialLayer)\n\t{\n\t\tlogger.debug('setMaxSendingSpatialLayer() [spatialLayer:\"%s\"]', spatialLayer);\n\n\t\ttry\n\t\t{\n\t\t\tif (this._webcamProducer)\n\t\t\t\tawait this._webcamProducer.setMaxSpatialLayer(spatialLayer);\n\t\t\tif (this._screenSharingProducer)\n\t\t\t\tawait this._screenSharingProducer.setMaxSpatialLayer(spatialLayer);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setMaxSendingSpatialLayer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPreferredLayers(consumerId, spatialLayer, temporalLayer)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPreferredLayers() [consumerId:\"%s\", spatialLayer:\"%s\", temporalLayer:\"%s\"]',\n\t\t\tconsumerId, spatialLayer, temporalLayer);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'setConsumerPreferedLayers', { consumerId, spatialLayer, temporalLayer });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPreferredLayers(\n\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPreferredLayers() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPriority(consumerId, priority)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPriority() [consumerId:\"%s\", priority:%d]',\n\t\t\tconsumerId, priority);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setConsumerPriority', { consumerId, priority });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPriority(consumerId, priority));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPriority() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync requestConsumerKeyFrame(consumerId)\n\t{\n\t\tlogger.debug('requestConsumerKeyFrame() [consumerId:\"%s\"]', consumerId);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('requestConsumerKeyFrame', { consumerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('requestConsumerKeyFrame() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _loadDynamicImports()\n\t{\n\t\t({ default: createTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"createtorrent\" */\n\t\t\t'create-torrent'\n\t\t));\n\n\t\t({ default: WebTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"webtorrent\" */\n\t\t\t'webtorrent'\n\t\t));\n\n\t\t({ default: saveAs } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"file-saver\" */\n\t\t\t'file-saver'\n\t\t));\n\n\t\t({ default: ScreenShare } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"screensharing\" */\n\t\t\t'./ScreenShare'\n\t\t));\n\n\t\t({ default: Spotlights } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"spotlights\" */\n\t\t\t'./Spotlights'\n\t\t));\n\n\t\tmediasoupClient = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"mediasoup\" */\n\t\t\t'mediasoup-client'\n\t\t);\n\n\t\t({ default: io } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"socket.io\" */\n\t\t\t'socket.io-client'\n\t\t));\n\t}\n\n\tasync join({ roomId, joinVideo })\n\t{\n\t\tawait this._loadDynamicImports();\n\n\t\tthis._roomId = roomId;\n\n\t\tstore.dispatch(roomActions.setRoomName(roomId));\n\n\t\tthis._signalingUrl = getSignalingUrl(this._peerId, roomId);\n\n\t\tthis._screenSharing = ScreenShare.create(this._device);\n\n\t\tthis._signalingSocket = io(this._signalingUrl);\n\n\t\tthis._spotlights = new Spotlights(this._maxSpotlights, this._signalingSocket);\n\n\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\n\t\tthis._signalingSocket.on('connect', () =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"connect\" event');\n\t\t});\n\n\t\tthis._signalingSocket.on('disconnect', (reason) =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"disconnect\" event [reason:\"%s\"]', reason);\n\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tif (reason === 'io server disconnect')\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tthis.close();\n\t\t\t}\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnecting',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected, attempting to reconnect'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\tthis._screenSharingProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t}\n\n\t\t\tif (this._webcamProducer)\n\t\t\t{\n\t\t\t\tthis._webcamProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\t\t\tthis._webcamProducer = null;\n\t\t\t}\n\n\t\t\tif (this._micProducer)\n\t\t\t{\n\t\t\t\tthis._micProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\t\t\tthis._micProducer = null;\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tthis._sendTransport.close();\n\n\t\t\t\tthis._sendTransport = null;\n\t\t\t}\n\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tthis._recvTransport.close();\n\n\t\t\t\tthis._recvTransport = null;\n\t\t\t}\n\n\t\t\tthis._spotlights.clearSpotlights();\n\n\t\t\tstore.dispatch(peerActions.clearPeers());\n\t\t\tstore.dispatch(consumerActions.clearConsumers());\n\t\t\tstore.dispatch(roomActions.clearSpotlights());\n\t\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect_failed', () =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"reconnect_failed\" event');\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect', (attemptNumber) =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"reconnect\" event [attempts:\"%s\"]', attemptNumber);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are reconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\t\t});\n\n\t\tthis._signalingSocket.on('request', async (request, cb) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"request\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\trequest.method, request.data);\n\n\t\t\tswitch (request.method)\n\t\t\t{\n\t\t\t\tcase 'newConsumer':\n\t\t\t\t{\n\t\t\t\t\tconst {\n\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tkind,\n\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tappData,\n\t\t\t\t\t\tproducerPaused\n\t\t\t\t\t} = request.data;\n\n\t\t\t\t\tconst consumer = await this._recvTransport.consume(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\tappData : { ...appData, peerId } // Trick.\n\t\t\t\t\t\t});\n\n\t\t\t\t\t// Store in the map.\n\t\t\t\t\tthis._consumers.set(consumer.id, consumer);\n\n\t\t\t\t\tconsumer.on('transportclose', () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._consumers.delete(consumer.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst { spatialLayers, temporalLayers } =\n\t\t\t\t\t\tmediasoupClient.parseScalabilityMode(\n\t\t\t\t\t\t\tconsumer.rtpParameters.encodings[0].scalabilityMode);\n\n\t\t\t\t\tstore.dispatch(consumerActions.addConsumer(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid                     : consumer.id,\n\t\t\t\t\t\t\tpeerId                 : peerId,\n\t\t\t\t\t\t\tkind                   : kind,\n\t\t\t\t\t\t\ttype                   : type,\n\t\t\t\t\t\t\tlocallyPaused          : false,\n\t\t\t\t\t\t\tremotelyLocked          : false,\n\t\t\t\t\t\t\tremotelyPaused         : producerPaused,\n\t\t\t\t\t\t\trtpParameters          : consumer.rtpParameters,\n\t\t\t\t\t\t\tsource                 : consumer.appData.source,\n\t\t\t\t\t\t\tspatialLayers          : spatialLayers,\n\t\t\t\t\t\t\ttemporalLayers         : temporalLayers,\n\t\t\t\t\t\t\tpreferredSpatialLayer  : spatialLayers - 1,\n\t\t\t\t\t\t\tpreferredTemporalLayer : temporalLayers - 1,\n\t\t\t\t\t\t\tpriority               : 1,\n\t\t\t\t\t\t\tcodec                  : consumer.rtpParameters.codecs[0].mimeType.split('/')[1],\n\t\t\t\t\t\t\ttrack                  : consumer.track\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpeerId));\n\n\t\t\t\t\t// We are ready. Answer the request so the server will\n\t\t\t\t\t// resume this Consumer (which was paused for now).\n\t\t\t\t\tcb(null);\n\n\t\t\t\t\tif (kind === 'audio')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsumer.volume = 0;\n\n\t\t\t\t\t\tconst stream = new MediaStream();\n\n\t\t\t\t\t\tstream.addTrack(consumer.track);\n\n\t\t\t\t\t\tif (!stream.getAudioTracks()[0])\n\t\t\t\t\t\t\tthrow new Error('request.newConsumer | given stream has no audio track');\n\n\t\t\t\t\t\tconsumer.hark = hark(stream, { play: false });\n\n\t\t\t\t\t\tconsumer.hark.on('volume_change', (volume) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvolume = Math.round(volume);\n\n\t\t\t\t\t\t\tif (consumer && volume !== consumer.volume)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsumer.volume = volume;\n\n\t\t\t\t\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(peerId, volume));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tlogger.error('unknown request.method \"%s\"', request.method);\n\n\t\t\t\t\tcb(500, `unknown request.method \"${request.method}\"`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._signalingSocket.on('notification', async (notification) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"notification\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\tnotification.method, notification.data);\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tswitch (notification.method)\n\t\t\t\t{\n\n\t\t\t\t\tcase 'enteredLobby':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(true));\n\n\t\t\t\t\t\tconst { displayName } = store.getState().settings;\n\t\t\t\t\t\tconst { picture } = store.getState().me;\n\n\t\t\t\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\t\t\t\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'signInRequired':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setSignInRequired(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'overRoomLimit':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setOverRoomLimit(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomReady':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { turnServers } = notification.data;\n\n\t\t\t\t\t\tthis._turnServers = turnServers;\n\n\t\t\t\t\t\tstore.dispatch(roomActions.toggleJoined());\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(false));\n\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomBack':\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.locked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now locked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'unlockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.unlocked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now unlocked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'silenceRoom':\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(roomActions.setSilenceRoom());\n\n\t\t\t\t\t\t\tif (this._micProducer && !this._micProducer.paused)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t\t\t\t\tthis._silenced = true;\n\t\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'moderator.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator muted your audio'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t}\n\t\t\n\t\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.locked',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now slienced locked'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tcase 'unsilenceRoom':\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setUnsilenceRoom());\n\t\t\t\t\t\t\t\tthis._silenced = false;\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.unlocked',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now open for speaking'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\tcase 'parkedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peerId));\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'parkedPeers':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { lobbyPeers } = notification.data;\n\n\t\t\t\t\t\tif (lobbyPeers.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlobbyPeers.forEach((peer) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(\n\t\t\t\t\t\t\t\t\t\tpeer.displayName,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(\n\t\t\t\t\t\t\t\t\t\tpeer.picture,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerLeft',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby left'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:promotedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed name to {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(picture, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedPicture',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed picture'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { accessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setAccessCode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room updated'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setJoinByAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { joinByAccessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setJoinByAccessCode(joinByAccessCode));\n\n\t\t\t\t\t\tif (joinByAccessCode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOn',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now activated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOff',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now deactivated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'activeSpeaker':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomActiveSpeaker(peerId));\n\n\t\t\t\t\t\tif (peerId && peerId !== this._peerId)\n\t\t\t\t\t\t\tthis._spotlights.handleActiveSpeaker(peerId);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName, oldDisplayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.peerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{oldDisplayName} is now {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\toldDisplayName,\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(peerActions.setPeerPicture(peerId, picture));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'raisedHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t} = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerRaisedHand(\n\t\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst { displayName } = store.getState().peers[peerId];\n\n\t\t\t\t\t\tlet text;\n\n\t\t\t\t\t\tif (raisedHand)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.raisedHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} raised their hand'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.loweredHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} put their hand down'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (displayName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'chatMessage':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, chatMessage } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tchatActions.addResponseMessage({ ...chatMessage, peerId }));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'chat')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearChat':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(chatActions.clearChat());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearChat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the chat'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'sendFile':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, magnetUri } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(fileActions.addFile(peerId, magnetUri));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newFile',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New file available'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'files')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearFileSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(fileActions.clearFiles());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearFiles',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the files'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcase 'moderator:setFixedFilmStrip':\n\t\t\t\t\t{\n\t\t\t\t\t\t// set here film strip\n\t\t\t\t\t\tconsole.log(\"varun room: \" + notification.data);\n\t\t\t\t\t\tif(notification.data == \"none\")\n\t\t\t\t\t\t {\n\t\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('democratic'));\n\t\t\t\t\t\t\tstore.dispatch(roomActions.setFixedPeer('none'));\n\t\t\t\t\t\t\tthis._spotlights.setRoomType('democratic');\n\t\t\t\t\t\t\tthis._roomType = 'democratic';\n\t\t\t\t\t\t\tthis._fixed = 'none';\n\t\t\t\t\t\t\tthis.setSelectedPeer(notification.data);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\t\t\t\t\tstore.dispatch(roomActions.setFixedPeer(notification.data));\n\t\t\t\t\t\tthis._spotlights.setRoomType('filmstrip');\n\t\t\t\t\t\tthis._fixed = notification.data;\n\t\t\t\t\t\tthis._roomType = 'filmstrip';\n\t\t\t\t\t\tthis.setSelectedPeer(notification.data);\n\t\t\t\t\t\t//store.dispatch(roomActions.setSelectedPeer(notification.data));\n\t\t\t\t\t\tconsole.log(\"err: setting selected peer as \" + notification.data);\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.setFilmStrip',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator changed to FilmStrip view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'producerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { producerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tproducerActions.setProducerScore(producerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'newPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { id, displayName, picture, roles } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.addPeer({ id, displayName, picture, roles, consumers: [] }));\n\n\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t/*\t\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} joined the room'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.removePeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tconsumer.close();\n\n\t\t\t\t\t\tif (consumer.hark != null)\n\t\t\t\t\t\t\tconsumer.hark.stop();\n\n\t\t\t\t\t\tthis._consumers.delete(consumerId);\n\n\t\t\t\t\t\tconst { peerId } = consumer.appData;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.removeConsumer(consumerId, peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerPaused':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerPaused(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerResumed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerResumed(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerLayersChanged':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, spatialLayer, temporalLayer } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(consumerActions.setConsumerCurrentLayers(\n\t\t\t\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerScore(consumerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:mute':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer && !this._micProducer.paused)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'moderator.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator muted your audio'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopVideo':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableWebcam();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.muteVideo',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your video'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopScreenSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableScreenSharing();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.stopScreenSharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your screen sharing'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:kick':\n\t\t\t\t\t{\n\t\t\t\t\t\t// Need some feedback\n\t\t\t\t\t\tthis.close();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:lowerHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setRaisedHand(false);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'gotRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, role } = notification.data;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.addRole(role));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.addPeerRole(peerId, role));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lostRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, role } = notification.data;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.removeRole(role));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.lostRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You lost the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.removePeerRole(peerId, role));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error(\n\t\t\t\t\t\t\t'unknown notification.method \"%s\"', notification.method);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('error on socket \"notification\" event [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.requestError',\n\t\t\t\t\t\t\tdefaultMessage : 'Error on server request'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\n\t\t});\n\t}\n\n\tasync _joinRoom({ joinVideo })\n\t{\n\t\tlogger.debug('_joinRoom()');\n\n\t\tconst { displayName } = store.getState().settings;\n\t\tconst { picture } = store.getState().me;\n\t\t\n\t\ttry\n\t\t{\n\t\t\tthis._torrentSupport = WebTorrent.WEBRTC_SUPPORT;\n\n\t\t\tthis._webTorrent = this._torrentSupport && new WebTorrent({\n\t\t\t\ttracker : {\n\t\t\t\t\trtcConfig : {\n\t\t\t\t\t\ticeServers : this._turnServers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._webTorrent.on('error', (error) =>\n\t\t\t{\n\t\t\t\tlogger.error('Filesharing [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.error',\n\t\t\t\t\t\t\tdefaultMessage : 'There was a filesharing error'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t});\n\n\t\t\tthis._mediasoupDevice = new mediasoupClient.Device();\n\n\t\t\tconst routerRtpCapabilities =\n\t\t\t\tawait this.sendRequest('getRouterRtpCapabilities');\n\n\t\t\trouterRtpCapabilities.headerExtensions = routerRtpCapabilities.headerExtensions\n\t\t\t\t.filter((ext) => ext.uri !== 'urn:3gpp:video-orientation');\n\n\t\t\tawait this._mediasoupDevice.load({ routerRtpCapabilities });\n\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t\t'createWebRtcTransport',\n\t\t\t\t\t{\n\t\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\t\tproducing : true,\n\t\t\t\t\t\tconsuming : false\n\t\t\t\t\t});\n\n\t\t\t\tconst {\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters\n\t\t\t\t} = transportInfo;\n\n\t\t\t\tthis._sendTransport = this._mediasoupDevice.createSendTransport(\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ticeParameters,\n\t\t\t\t\t\ticeCandidates,\n\t\t\t\t\t\tdtlsParameters,\n\t\t\t\t\t\ticeServers             : this._turnServers,\n\t\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\t\ticeTransportPolicy     : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined,\n\t\t\t\t\t\tproprietaryConstraints : PC_PROPRIETARY_CONSTRAINTS\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t\t.catch(errback);\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'produce', async ({ kind, rtpParameters, appData }, callback, errback) =>\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\t\t\tconst { id } = await this.sendRequest(\n\t\t\t\t\t\t\t\t'produce',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\t\t\tappData\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tcallback({ id });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrback(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t'createWebRtcTransport',\n\t\t\t\t{\n\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\tproducing : false,\n\t\t\t\t\tconsuming : true\n\t\t\t\t});\n\n\t\t\tconst {\n\t\t\t\tid,\n\t\t\t\ticeParameters,\n\t\t\t\ticeCandidates,\n\t\t\t\tdtlsParameters\n\t\t\t} = transportInfo;\n\n\t\t\tthis._recvTransport = this._mediasoupDevice.createRecvTransport(\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters,\n\t\t\t\t\ticeServers         : this._turnServers,\n\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\ticeTransportPolicy : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined\n\t\t\t\t});\n\n\t\t\tthis._recvTransport.on(\n\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t{\n\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttransportId : this._recvTransport.id,\n\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t.catch(errback);\n\t\t\t\t});\n\n\t\t\t// Set our media capabilities.\n\t\t\tstore.dispatch(meActions.setMediaCapabilities(\n\t\t\t\t{\n\t\t\t\t\tcanSendMic     : this._mediasoupDevice.canProduce('audio'),\n\t\t\t\t\tcanSendWebcam  : this._mediasoupDevice.canProduce('video'),\n\t\t\t\t\tcanShareScreen : this._mediasoupDevice.canProduce('video') &&\n\t\t\t\t\t\tthis._screenSharing.isScreenShareAvailable(),\n\t\t\t\t\tcanShareFiles : this._torrentSupport\n\t\t\t\t}));\n\n\t\t\tconst {\n\t\t\t\tauthenticated,\n\t\t\t\troles,\n\t\t\t\tpeers,\n\t\t\t\ttracker,\n\t\t\t\troomPermissions,\n\t\t\t\tallowWhenRoleMissing,\n\t\t\t\tchatHistory,\n\t\t\t\tfileHistory,\n\t\t\t\tlastNHistory,\n\t\t\t\tlocked,\n\t\t\t\tsilenced,\n\t\t\t\tfixed,\n\t\t\t\tlobbyPeers,\n\t\t\t\taccessCode\n\t\t\t} = await this.sendRequest(\n\t\t\t\t'join',\n\t\t\t\t{\n\t\t\t\t\tdisplayName     : displayName,\n\t\t\t\t\tpicture         : picture,\n\t\t\t\t\trtpCapabilities : this._mediasoupDevice.rtpCapabilities\n\t\t\t\t});\n\n\t\t\tlogger.debug(\n\t\t\t\t'_joinRoom() joined [authenticated:\"%s\", peers:\"%o\", roles:\"%o\"]',\n\t\t\t\tauthenticated,\n\t\t\t\tpeers,\n\t\t\t\troles\n\t\t\t);\n\n\t\t\ttracker && (this._tracker = tracker);\n\n\t\t\tstore.dispatch(meActions.loggedIn(authenticated));\n\n\t\t\tstore.dispatch(roomActions.setRoomPermissions(roomPermissions));\n\n\t\t\tif (allowWhenRoleMissing)\n\t\t\t\tstore.dispatch(roomActions.setAllowWhenRoleMissing(allowWhenRoleMissing));\n\n\t\t\tconst myRoles = store.getState().me.roles;\n\n\t\t\tfor (const role of roles)\n\t\t\t{\n\t\t\t\tif (!myRoles.includes(role))\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(meActions.addRole(role));\n\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const peer of peers)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tpeerActions.addPeer({ ...peer, consumers: [] }));\n\t\t\t}\n\n\t\t\tthis._spotlights.addPeers(peers);\n\n\t\t\tthis._spotlights.on('spotlights-updated', (spotlights) =>\n\t\t\t{\n\t\t\t\t//console.log(\"varun - update spotlights done from spotlights.js\");\n\t\t\t\tstore.dispatch(roomActions.setSpotlights(spotlights));\n\t\t\t\t//this._spotlights = spotlights;\n\t\t\t\tthis.updateSpotlights(spotlights);\n\t\t\t});\n\n\t\t\t(chatHistory.length > 0) && store.dispatch(\n\t\t\t\tchatActions.addChatHistory(chatHistory));\n\n\t\t\t(fileHistory.length > 0) && store.dispatch(\n\t\t\t\tfileActions.addFileHistory(fileHistory));\n\n\t\t\tif (lastNHistory.length > 0)\n\t\t\t{\n\t\t\t\tlogger.debug('_joinRoom() | got lastN history');\n\n\t\t\t\tthis._spotlights.addSpeakerList(\n\t\t\t\t\tlastNHistory.filter((peerId) => peerId !== this._peerId)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlocked ?\n\t\t\t\tstore.dispatch(roomActions.setRoomLocked()) :\n\t\t\t\tstore.dispatch(roomActions.setRoomUnLocked());\n\n\t\t\t(lobbyPeers.length > 0) && lobbyPeers.forEach((peer) =>\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(peer.displayName, peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(peer.picture, peer.id));\n\t\t\t});\n\n\t\t\t(accessCode != null) && store.dispatch(\n\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t// Don't produce if explicitly requested to not to do it.\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tif (this._mediasoupDevice.canProduce('audio'))\n\t\t\t\t\tif (!this._muted)\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this.updateMic({ start: true });\n\t\t\t\t\t\tlet autoMuteThreshold = 4;\n\n\t\t\t\t\t\tif ('autoMuteThreshold' in window.config)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautoMuteThreshold = window.config.autoMuteThreshold;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ((autoMuteThreshold && peers.length >= autoMuteThreshold) || silenced)\n\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t}\n\n\t\t\t\tif (joinVideo)\n\t\t\t\t\tthis.updateWebcam({ start: true });\n\t\t\t}\n\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tconst { selectedAudioOutputDevice } = store.getState().settings;\n\n\t\t\tif (!selectedAudioOutputDevice && this._audioOutputDevices !== {})\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tsettingsActions.setSelectedAudioOutputDevice(\n\t\t\t\t\t\tObject.keys(this._audioOutputDevices)[0]\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\n\t\t\t// Clean all the existing notifications.\n\t\t\tstore.dispatch(notificationActions.removeAllNotifications());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.joined',\n\t\t\t\t\t\tdefaultMessage : 'You have joined the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis._spotlights.start();\n\t\t\n\t\t\tconsole.log(\"varun is room has fixed: \"+ fixed);\n\t\t\t\n\t\t\tif(fixed != 'none'){\n\t\t\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\t\t\tthis._spotlights.setRoomType('filmstrip');\t\n\t\t\t\tthis._roomType = 'filmstrip';\t\t\n\t\t\t\tthis.setSelectedPeer(fixed);\n\t\t\t\t\n\t\t\t}\n\t\t\tconsole.log(\"varun is room slienced: \"+ silenced);\n\t\t\tif(silenced){\n\t\t\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\t\t\tthis._spotlights.setRoomType('filmstrip');\t\n\t\t\t\tthis._roomType = 'filmstrip';\t\t\n\t\t\t\tthis.setSelectedPeer(fixed);\n\n\t\t\t\tstore.dispatch(roomActions.setSilenceRoom());\n\n\t\t\t\t\t\t\tif (this._micProducer && !this._micProducer.paused)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t\t\t\t\tthis._silenced = true;\n\t\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'moderator.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator muted your audio'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t}\n\t\t\n\t\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.locked',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now slienced locked'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_joinRoom() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantJoin',\n\t\t\t\t\t\tdefaultMessage : 'Unable to join the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tasync lockRoom()\n\t{\n\t\tlogger.debug('lockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('lockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youLocked',\n\t\t\t\t\t\tdefaultMessage : 'You locked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to lock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('lockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync unlockRoom()\n\t{\n\t\tlogger.debug('unlockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('unlockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youUnLocked',\n\t\t\t\t\t\tdefaultMessage : 'You unlocked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantUnLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to unlock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('unlockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setAccessCode(code)\n\t{\n\t\tlogger.debug('setAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setAccessCode', { accessCode: code });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setAccessCode(code));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : 'Access code saved.'\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync setJoinByAccessCode(value)\n\t{\n\t\tlogger.debug('setJoinByAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setJoinByAccessCode', { joinByAccessCode: value });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setJoinByAccessCode(value));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : `You switched Join by access-code to ${value}`\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set join by access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync addExtraVideo(videoDeviceId)\n\t{\n\t\tlogger.debug(\n\t\t\t'addExtraVideo() [videoDeviceId:\"%s\"]',\n\t\t\tvideoDeviceId\n\t\t);\n\n\t\tstore.dispatch(\n\t\t\troomActions.setExtraVideoOpen(false));\n\n\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t{\n\t\t\tlogger.error('addExtraVideo() | cannot produce video');\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet track;\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._webcams[videoDeviceId];\n\t\t\tconst resolution = store.getState().settings.resolution;\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t{\n\t\t\t\t\tvideo :\n\t\t\t\t\t{\n\t\t\t\t\t\tdeviceId : { ideal: videoDeviceId },\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution]\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\tlet producer;\n\n\t\t\tif (this._useSimulcast)\n\t\t\t{\n\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t.codecs\n\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\tlet encodings;\n\n\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\telse\n\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\tproducer = await this._sendTransport.produce(\n\t\t\t\t\t{\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tencodings,\n\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tproducer = await this._sendTransport.produce({\n\t\t\t\t\ttrack,\n\t\t\t\t\tappData :\n\t\t\t\t\t{\n\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._extraVideoProducers.set(producer.id, producer);\n\n\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t{\n\t\t\t\t\tid            : producer.id,\n\t\t\t\t\tdeviceLabel   : device.label,\n\t\t\t\t\tsource        : 'extravideo',\n\t\t\t\t\tpaused        : producer.paused,\n\t\t\t\t\ttrack         : producer.track,\n\t\t\t\t\trtpParameters : producer.rtpParameters,\n\t\t\t\t\tcodec         : producer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t}));\n\n\t\t\t// store.dispatch(settingsActions.setSelectedWebcamDevice(deviceId));\n\n\t\t\tawait this._updateWebcams();\n\n\t\t\tproducer.on('transportclose', () =>\n\t\t\t{\n\t\t\t\tthis._extraVideoProducers.delete(producer.id);\n\n\t\t\t\tproducer = null;\n\t\t\t});\n\n\t\t\tproducer.on('trackended', () =>\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tthis.disableExtraVideo(producer.id)\n\t\t\t\t\t.catch(() => {});\n\t\t\t});\n\n\t\t\tlogger.debug('addExtraVideo() succeeded');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('addExtraVideo() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableMic()\n\t{\n\t\tlogger.debug('disableMic()');\n\n\t\tif (!this._micProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\tthis._micProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._micProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableMic() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._micProducer = null;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateScreenSharing({\n\t\tstart = false,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug('updateScreenSharing() [start:\"%s\"]', start);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tconst available = this._screenSharing.isScreenShareAvailable();\n\n\t\t\tif (!available)\n\t\t\t\tthrow new Error('screen sharing not available');\n\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingFrameRate(newFrameRate));\n\n\t\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\t\tconst {\n\t\t\t\tscreenSharingResolution,\n\t\t\t\tscreenSharingFrameRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (start)\n\t\t\t{\n\t\t\t\tconst stream = await this._screenSharing.start({\n\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tif (this._useSharingSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SVC_ENCODINGS;\n\t\t\t\t\t}\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._screenSharingProducer.id,\n\t\t\t\t\t\tdeviceLabel   : 'screen',\n\t\t\t\t\t\tsource        : 'screen',\n\t\t\t\t\t\tpaused        : this._screenSharingProducer.paused,\n\t\t\t\t\t\ttrack         : this._screenSharingProducer.track,\n\t\t\t\t\t\trtpParameters : this._screenSharingProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._screenSharingProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._screenSharingProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._screenSharingProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.screenSharingDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Screen sharing disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableScreenSharing();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._screenSharingProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateScreenSharing() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.screenSharingError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your screen'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableScreenSharing()\n\t{\n\t\tlogger.debug('disableScreenSharing()');\n\n\t\tif (!this._screenSharingProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\tthis._screenSharingProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._screenSharingProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._screenSharing.stop();\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableExtraVideo(id)\n\t{\n\t\tlogger.debug('disableExtraVideo()');\n\n\t\tconst producer = this._extraVideoProducers.get(id);\n\n\t\tif (!producer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tproducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._extraVideoProducers.delete(id);\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableWebcam()\n\t{\n\t\tlogger.debug('disableWebcam()');\n\n\t\tif (!this._webcamProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tthis._webcamProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._webcamProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._webcamProducer = null;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync _setNoiseThreshold(threshold)\n\t{\n\t\tlogger.debug('_setNoiseThreshold() [threshold:\"%s\"]', threshold);\n\n\t\tthis._hark.setThreshold(threshold);\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setNoiseThreshold(threshold));\n\t}\n\n\tasync _updateAudioDevices()\n\t{\n\t\tlogger.debug('_updateAudioDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audioinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioDevices(this._audioDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateWebcams()\n\t{\n\t\tlogger.debug('_updateWebcams()');\n\n\t\t// Reset the list.\n\t\tthis._webcams = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateWebcams() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'videoinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._webcams[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setWebcamDevices(this._webcams));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateWebcams() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getAudioDeviceId()\n\t{\n\t\tlogger.debug('_getAudioDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getAudioDeviceId() | calling _updateAudioDeviceId()');\n\n\t\t\tawait this._updateAudioDevices();\n\n\t\t\tconst { selectedAudioDevice } = store.getState().settings;\n\n\t\t\tif (selectedAudioDevice && this._audioDevices[selectedAudioDevice])\n\t\t\t\treturn selectedAudioDevice;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst audioDevices = Object.values(this._audioDevices);\n\n\t\t\t\treturn audioDevices[0] ? audioDevices[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getAudioDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getWebcamDeviceId()\n\t{\n\t\tlogger.debug('_getWebcamDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getWebcamDeviceId() | calling _updateWebcams()');\n\n\t\t\tawait this._updateWebcams();\n\n\t\t\tconst { selectedWebcam } = store.getState().settings;\n\n\t\t\tif (selectedWebcam && this._webcams[selectedWebcam])\n\t\t\t\treturn selectedWebcam;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst webcams = Object.values(this._webcams);\n\n\t\t\t\treturn webcams[0] ? webcams[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getWebcamDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateAudioOutputDevices()\n\t{\n\t\tlogger.debug('_updateAudioOutputDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioOutputDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioOutputDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audiooutput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioOutputDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioOutputDevices(this._audioOutputDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioOutputDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n}\n","import randomString from 'random-string';\nimport * as notificationActions from './notificationActions';\n\n// This returns a redux-thunk action (a function).\nexport const notify = ({ type = 'info', text, timeout }) =>\n{\n\tif (!timeout)\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'info':\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t\tcase 'error':\n\t\t\t\ttimeout = 5000;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst notification =\n\t{\n\t\tid      : randomString({ length: 6 }).toLowerCase(),\n\t\ttype    : type,\n\t\ttext    : text,\n\t\ttimeout : timeout\n\t};\n\n\treturn (dispatch) =>\n\t{\n\t\tdispatch(notificationActions.addNotification(notification));\n\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\tdispatch(notificationActions.removeNotification(notification.id));\n\t\t}, timeout);\n\t};\n};\n","export const addPeer = (peer) =>\n\t({\n\t\ttype    : 'ADD_PEER',\n\t\tpayload : { peer }\n\t});\n\nexport const removePeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const clearPeers = () =>\n\t({\n\t\ttype : 'CLEAR_PEERS'\n\t});\n\nexport const setPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerAudioInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerScreenInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_SCREEN_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerRaisedHand = (peerId, raisedHand, raisedHandTimestamp) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND',\n\t\tpayload : { peerId, raisedHand, raisedHandTimestamp }\n\t});\n\nexport const setPeerRaisedHandInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerPicture = (peerId, picture) =>\n\t({\n\t\ttype    : 'SET_PEER_PICTURE',\n\t\tpayload : { peerId, picture }\n\t});\n\nexport const addPeerRole = (peerId, role) =>\n\t({\n\t\ttype    : 'ADD_PEER_ROLE',\n\t\tpayload : { peerId, role }\n\t});\n\nexport const removePeerRole = (peerId, role) =>\n\t({\n\t\ttype    : 'REMOVE_PEER_ROLE',\n\t\tpayload : { peerId, role }\n\t});\n\nexport const setPeerKickInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_KICK_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setMutePeerInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerScreenSharingInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n","export const setPeerVolume = (peerId, volume) =>\n\t({\n\t\ttype    : 'SET_PEER_VOLUME',\n\t\tpayload : { peerId, volume }\n\t});\n","export const addUserMessage = (text) =>\n\t({\n\t\ttype    : 'ADD_NEW_USER_MESSAGE',\n\t\tpayload : { text }\n\t});\n\nexport const addResponseMessage = (message) =>\n\t({\n\t\ttype    : 'ADD_NEW_RESPONSE_MESSAGE',\n\t\tpayload : { message }\n\t});\n\nexport const addChatHistory = (chatHistory) =>\n\t({\n\t\ttype    : 'ADD_CHAT_HISTORY',\n\t\tpayload : { chatHistory }\n\t});\n\nexport const clearChat = () =>\n\t({\n\t\ttype : 'CLEAR_CHAT'\n\t});","export const addFile = (peerId, magnetUri) =>\n\t({\n\t\ttype    : 'ADD_FILE',\n\t\tpayload : { peerId, magnetUri }\n\t});\n\nexport const addFileHistory = (fileHistory) =>\n\t({\n\t\ttype    : 'ADD_FILE_HISTORY',\n\t\tpayload : { fileHistory }\n\t});\n\nexport const setFileActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_ACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileInActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_INACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileProgress = (magnetUri, progress) =>\n\t({\n\t\ttype    : 'SET_FILE_PROGRESS',\n\t\tpayload : { magnetUri, progress }\n\t});\n\nexport const setFileDone = (magnetUri, sharedFiles) =>\n\t({\n\t\ttype    : 'SET_FILE_DONE',\n\t\tpayload : { magnetUri, sharedFiles }\n\t});\n\nexport const clearFiles = () =>\n\t({\n\t\ttype : 'CLEAR_FILES'\n\t});","export const addLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'ADD_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const removeLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setLobbyPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setLobbyPeerPicture = (picture, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PICTURE',\n\t\tpayload : { picture, peerId }\n\t});\n\nexport const setLobbyPeerPromotionInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});","export const addConsumer = (consumer, peerId) =>\n\t({\n\t\ttype    : 'ADD_CONSUMER',\n\t\tpayload : { consumer, peerId }\n\t});\n\nexport const removeConsumer = (consumerId, peerId) =>\n\t({\n\t\ttype    : 'REMOVE_CONSUMER',\n\t\tpayload : { consumerId, peerId }\n\t});\n\nexport const clearConsumers = () =>\n\t({\n\t\ttype : 'CLEAR_CONSUMERS'\n\t});\n\nexport const setConsumerPaused = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PAUSED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setPreferredProfile = (consumerId, profile) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PROFILE',\n\t\tpayload : { consumerId, profile }\n\t});\nexport const setConsumerResumed = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_RESUMED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setConsumerCurrentLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_CURRENT_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPreferredLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PREFERRED_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPriority = (consumerId, priority) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PRIORITY',\n\t\tpayload : { consumerId, priority }\n\t});\n\nexport const setConsumerTrack = (consumerId, track) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_TRACK',\n\t\tpayload : { consumerId, track }\n\t});\n\nexport const setConsumerScore = (consumerId, score) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_SCORE',\n\t\tpayload : { consumerId, score }\n\t});","export const addProducer = (producer) =>\n\t({\n\t\ttype    : 'ADD_PRODUCER',\n\t\tpayload : { producer }\n\t});\n\nexport const removeProducer = (producerId) =>\n\t({\n\t\ttype    : 'REMOVE_PRODUCER',\n\t\tpayload : { producerId }\n\t});\n\nexport const setProducerPaused = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_PAUSED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerResumed = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_RESUMED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerTrack = (producerId, track) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_TRACK',\n\t\tpayload : { producerId, track }\n\t});\n\nexport const setProducerScore = (producerId, score) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_SCORE',\n\t\tpayload : { producerId, score }\n\t});","export const addTransportStats = (transport, type) =>\n\t({\n\t\ttype    : 'ADD_TRANSPORT_STATS',\n\t\tpayload : { transport, type }\n\t});","import React from 'react';\n\nconst RoomContext = React.createContext();\n\nexport default RoomContext;\n\nexport function withRoomContext(Component)\n{\n\treturn (props) => ( // eslint-disable-line react/display-name\n\t\t<RoomContext.Consumer>\n\t\t\t{(roomClient) => <Component {...props} roomClient={roomClient} />}\n\t\t</RoomContext.Consumer>\n\t);\n}","import React from 'react';\n\nexport const ReactLazyPreload = (importStatement) =>\n{\n\tconst Component = React.lazy(importStatement);\n\n\tComponent.preload = importStatement;\n\n\treturn Component;\n};","import bowser from 'bowser';\n\nwindow.BB = bowser;\n\nexport default function()\n{\n\tconst ua = navigator.userAgent;\n\tconst browser = bowser.getParser(ua);\n\n\tlet flag;\n\n\tif (browser.satisfies({ chrome: '>=0', chromium: '>=0' }))\n\t\tflag = 'chrome';\n\telse if (browser.satisfies({ firefox: '>=0' }))\n\t\tflag = 'firefox';\n\telse if (browser.satisfies({ safari: '>=0' }))\n\t\tflag = 'safari';\n\telse if (browser.satisfies({ opera: '>=0' }))\n\t\tflag = 'opera';\n\telse if (browser.satisfies({ 'microsoft edge': '>=0' }))\n\t\tflag = 'edge';\n\telse\n\t\tflag = 'unknown';\n\n\treturn {\n\t\tflag,\n\t\tos       : browser.getOSName(true), // ios, android, linux...\n\t\tplatform : browser.getPlatformType(true), // mobile, desktop, tablet\n\t\tname     : browser.getBrowserName(true),\n\t\tversion  : browser.getBrowserVersion(),\n\t\tbowser   : browser\n\t};\n}\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport WebAssetIcon from '@material-ui/icons/WebAsset';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport Hidden from '@material-ui/core/Hidden';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '40vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t\t// display       : 'flex',\n\t\t\t// flexDirection : 'column'\n\t\t},\n\t\tlist : {\n\t\t\tbackgroundColor : theme.palette.background.paper\n\t\t},\n\t\terrorAvatar : {\n\t\t\twidth  : theme.spacing(20),\n\t\t\theight : theme.spacing(20)\n\t\t}\n\t});\n\nlet dense = false;\n\nconst supportedBrowsers=[\n\t{ name: 'Chrome/Chromium', version: '74', vendor: 'Google' },\n\t{ name: 'Edge', version: '18', vendor: 'Microsoft' },\n\t{ name: 'Firefox', version: '60', vendor: 'Mozilla' },\n\t{ name: 'Safari', version: '12', vendor: 'Apple' },\n\t{ name: 'Opera', version: '62', vendor: '' },\n\t//\t{ name: 'Brave', version: '1.5', vendor: '' },\n\t//  { name: 'Vivaldi', version: '3', vendor: '' },\n\t{ name: 'Samsung Internet', version: '11.1.1.52', vendor: '' }\n];\n\nconst UnsupportedBrowser = ({\n\tplatform,\n\twebrtcUnavailable,\n\tclasses\n}) =>\n{\n\tif (platform !== 'desktop')\n\t\tdense = true;\n\n\treturn (\n\t\t<Dialog\n\t\t\topen\n\t\t\tscroll={'body'}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t{!webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titleUnsupportedBrowser'\n\t\t\t\t\tdefaultMessage={'Browser not supported ' + platform }\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titlewebrtcUnavailable'\n\t\t\t\t\tdefaultMessage='Required functionality not availble in your browser'\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.bodyText'\n\t\t\t\t\tdefaultMessage='If using iPhone or iPad - use SAFARI browser.\n\t\t\t\t\tThis meeting service requires functionality not supported by your browser.\n\t\t\t\t\t\tPlease upgrade, switch to a different browser, or\n\t\t\t\t\t\tcheck your settings. Supported browsers:'\n\t\t\t\t/>\n\t\t\t\t<Grid container spacing={2} justify='center' alignItems='center'>\n\t\t\t\t\t<Grid item xs={12} md={7}>\n\n\t\t\t\t\t\t<div className={classes.list}>\n\t\t\t\t\t\t\t<List dense={dense}>\n\t\t\t\t\t\t\t\t{supportedBrowsers.map((browser, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst supportedBrowser = `${browser.vendor} ${browser.name}`;\n\t\t\t\t\t\t\t\t\tconst supportedVersion = `${browser.version}+`;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<WebAssetIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\tprimary={supportedBrowser}\n\t\t\t\t\t\t\t\t\t\t\t\tsecondary={supportedVersion}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} md={5} align='center'>\n\t\t\t\t\t\t<Hidden mdDown>\n\t\t\t\t\t\t\t<ErrorIcon className={classes.errorAvatar} color='error'/>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nUnsupportedBrowser.propTypes =\n{\n\twebrtcUnavailable : PropTypes.bool.isRequired,\n\tplatform          : PropTypes.string.isRequired,\n\tclasses           : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(UnsupportedBrowser);\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport isElectron from 'is-electron';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport randomString from 'random-string';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport CookieConsent from 'react-cookie-consent';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdialogTitle :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tpadding                        : theme.spacing(2),\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tdisplay       : 'block',\n\t\t\tpaddingBottom : '1vh'\n\t\t},\n\t\tloginButton :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\tright    : theme.spacing(2),\n\t\t\ttop      : theme.spacing(2),\n\t\t\tpadding  : 0\n\t\t},\n\t\tlargeIcon :\n\t\t{\n\t\t\tfontSize : '2em'\n\t\t},\n\t\tlargeAvatar :\n\t\t{\n\t\t\twidth  : 50,\n\t\t\theight : 50\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst DialogTitle = withStyles(styles)((props) =>\n{\n\tconst { children, classes, ...other } = props;\n\n\treturn (\n\t\t<MuiDialogTitle disableTypography className={classes.dialogTitle} {...other}>\n\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t<Typography variant='h5'>{children}</Typography>\n\t\t</MuiDialogTitle>\n\t);\n});\n\nconst DialogContent = withStyles((theme) => ({\n\troot :\n\t{\n\t\tpadding : theme.spacing(2)\n\t}\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n\troot :\n\t{\n\t\tmargin  : 0,\n\t\tpadding : theme.spacing(1)\n\t}\n}))(MuiDialogActions);\n\nconst ChooseRoom = ({\n\tclasses\n}) =>\n{\n\tconst [ roomId, setRoomId ] =\n\t\tuseState(randomString({ length: 8 }).toLowerCase());\n\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Dialog\n\t\t\t\topen\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper : classes.dialogPaper\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<DialogTitle>\n\t\t\t\t\t{ window.config.title ? window.config.title : 'Multiparty meeting' }\n\t\t\t\t\t<hr />\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText gutterBottom>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.chooseRoom'\n\t\t\t\t\t\t\tdefaultMessage='Choose the name of the room you would like to join'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContentText>\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid='roomId'\n\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.roomName',\n\t\t\t\t\t\t\tdefaultMessage : 'Room name'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tvalue={roomId}\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst { value } = event.target;\n\n\t\t\t\t\t\t\tsetRoomId(value.toLowerCase());\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonBlur={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (roomId === '')\n\t\t\t\t\t\t\t\tsetRoomId(randomString({ length: 8 }).toLowerCase());\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t/>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcomponent={Link}\n\t\t\t\t\t\tto={roomId}\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.chooseRoomButton'\n\t\t\t\t\t\t\tdefaultMessage='Continue'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent buttonText={intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.consentUnderstand',\n\t\t\t\t\t\tdefaultMessage : 'I understand'\n\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n};\n\nChooseRoom.propTypes =\n{\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(ChooseRoom);","const isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\twindow.location.hostname === '[::1]' ||\n\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config)\n{\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator)\n\t{\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\n\t\tif (publicUrl.origin !== window.location.origin)\n\t\t\treturn;\n\n\t\twindow.addEventListener('load', () =>\n\t\t{\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost)\n\t\t\t{\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\tnavigator.serviceWorker.ready.then(() =>\n\t\t\t\t{});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config)\n{\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) =>\n\t\t{\n\t\t\tregistration.onupdatefound = () =>\n\t\t\t{\n\t\t\t\tconst installingWorker = registration.installing;\n\n\t\t\t\tif (installingWorker == null)\n\t\t\t\t\treturn;\n\n\t\t\t\tinstallingWorker.onstatechange = () =>\n\t\t\t\t{\n\t\t\t\t\tif (installingWorker.state === 'installed')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (navigator.serviceWorker.controller)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (config && config.onUpdate)\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (config && config.onSuccess)\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(() =>\n\t\t{});\n}\n\nfunction checkValidServiceWorker(swUrl, config)\n{\n\tfetch(swUrl)\n\t\t.then((response) =>\n\t\t{\n\t\t\tconst contentType = response.headers.get('content-type');\n\n\t\t\tif (response.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1))\n\t\t\t{\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) =>\n\t\t\t\t{\n\t\t\t\t\tregistration.unregister().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() =>\n\t\t{});\n}\n\nexport function unregister()\n{\n\tif ('serviceWorker' in navigator)\n\t{\n\t\tnavigator.serviceWorker.ready.then((registration) =>\n\t\t{\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import domready from 'domready';\nimport React, { Suspense } from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport isElectron from 'is-electron';\nimport { createIntl, createIntlCache, RawIntlProvider } from 'react-intl';\nimport { Route, HashRouter, BrowserRouter } from 'react-router-dom';\nimport randomString from 'random-string';\nimport Logger from './Logger';\nimport debug from 'debug';\nimport RoomClient from './RoomClient';\nimport RoomContext from './RoomContext';\nimport deviceInfo from './deviceInfo';\nimport * as meActions from './actions/meActions';\nimport UnsupportedBrowser from './components/UnsupportedBrowser';\nimport ChooseRoom from './components/ChooseRoom';\nimport LoadingView from './components/LoadingView';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { PersistGate } from 'redux-persist/lib/integration/react';\nimport { persistor, store } from './store';\nimport { SnackbarProvider } from 'notistack';\nimport * as serviceWorker from './serviceWorker';\nimport { ReactLazyPreload } from './components/ReactLazyPreload';\nimport { detectDevice } from 'mediasoup-client';\n// import messagesEnglish from './translations/en';\nimport messagesNorwegian from './translations/nb';\nimport messagesGerman from './translations/de';\nimport messagesHungarian from './translations/hu';\nimport messagesPolish from './translations/pl';\nimport messagesDanish from './translations/dk';\nimport messagesFrench from './translations/fr';\nimport messagesGreek from './translations/el';\nimport messagesRomanian from './translations/ro';\nimport messagesPortuguese from './translations/pt';\nimport messagesChineseSimplified from './translations/cn';\nimport messagesChineseTraditional from './translations/tw';\nimport messagesSpanish from './translations/es';\nimport messagesCroatian from './translations/hr';\nimport messagesCzech from './translations/cs';\nimport messagesItalian from './translations/it';\nimport messagesUkrainian from './translations/uk';\nimport messagesTurkish from './translations/tr';\nimport messagesLatvian from './translations/lv';\nimport messagesRussian from './translations/ru';\nimport messagesKazakh from './translations/kk';\n\nimport './index.css';\n\nconst App = ReactLazyPreload(() => import(/* webpackChunkName: \"app\" */ './components/App'));\n\nconst cache = createIntlCache();\n\nconst messages =\n{\n\t// 'en' : messagesEnglish,\n\t'nb'      : messagesNorwegian,\n\t'de'      : messagesGerman,\n\t'hu'      : messagesHungarian,\n\t'pl'      : messagesPolish,\n\t'dk'      : messagesDanish,\n\t'fr'      : messagesFrench,\n\t'el'      : messagesGreek,\n\t'ro'      : messagesRomanian,\n\t'pt'      : messagesPortuguese,\n\t'zh-hans' : messagesChineseSimplified,\n\t'zh-hant' : messagesChineseTraditional,\n\t'es'      : messagesSpanish,\n\t'hr'      : messagesCroatian,\n\t'cs'      : messagesCzech,\n\t'it'      : messagesItalian,\n\t'uk'      : messagesUkrainian,\n\t'tr'      : messagesTurkish,\n\t'lv'      : messagesLatvian,\n\t'ru'      : messagesRussian,\n\t'kk'      : messagesKazakh\n};\n\nconst supportedBrowsers={\n\t'windows' : {\n\t\t'internet explorer' : '>12',\n\t\t'microsoft edge'    : '>18'\n\t},\n\t'safari'                       : '>12',\n\t'firefox'                      : '>=60',\n\t'chrome'                       : '>=74',\n\t'chromium'                     : '>=74',\n\t'opera'                        : '>=62',\n\t'samsung internet for android' : '>=11.1.1.52'\n};\n\nconst browserLanguage = (navigator.language || navigator.browserLanguage).toLowerCase();\n\nlet locale = browserLanguage.split(/[-_]/)[0]; // language without region code\n\nif (locale === 'zh')\n{\n\tif (browserLanguage === 'zh-cn')\n\t\tlocale = 'zh-hans';\n\telse\n\t\tlocale = 'zh-hant';\n}\n\nconst intl = createIntl({\n\tlocale,\n\tmessages : messages[locale]\n}, cache);\n\ndocument.documentElement.lang = locale;\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production')\n{\n\tdebug.enable('* -engine* -socket* -RIE* *WARN* *ERROR*');\n}\n\nconst logger = new Logger();\n\nlet roomClient;\n\nRoomClient.init({ store, intl });\n\nconst theme = createMuiTheme(window.config.theme);\n\nlet Router;\n\nif (isElectron())\n\tRouter = HashRouter;\nelse\n\tRouter = BrowserRouter;\n\ndomready(() =>\n{\n\tlogger.debug('DOM ready');\n\n\trun();\n});\n\nfunction run()\n{\n\tlogger.debug('run() [environment:%s]', process.env.NODE_ENV);\n\n\tconst peerId = randomString({ length: 8 }).toLowerCase();\n\tconst urlParser = new URL(window.location);\n\tconst parameters = urlParser.searchParams;\n\n\tconst accessCode = parameters.get('code');\n\tconst produce = parameters.get('produce') !== 'false';\n\tconst forceTcp = parameters.get('forceTcp') === 'true';\n\tconst displayName = parameters.get('displayName');\n\tconst muted = parameters.get('muted') === 'true';\n\n\tconst { pathname } = window.location;\n\n\tlet basePath = pathname.substring(0, pathname.lastIndexOf('/'));\n\n\tif (!basePath)\n\t\tbasePath = '/';\n\n\t// Get current device.\n\tconst device = deviceInfo();\n\n\tlet unsupportedBrowser = false;\n\n\tlet webrtcUnavailable = false;\n\n\tif (detectDevice() === undefined)\n\t{\n\t\tlogger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\t\talert('Your browser is not supported [deviceInfo:\"%o\"]' + device);\n\n\t\tunsupportedBrowser = true;\n\t}\n\telse if (\n\t\tnavigator.mediaDevices === undefined ||\n\t\tnavigator.mediaDevices.getUserMedia === undefined ||\n\t\twindow.RTCPeerConnection === undefined\n\t)\n\t{\n\t\tlogger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\t\talert('Your browser is not supported due to WebRTC ' + device);\n\n\t\twebrtcUnavailable = true;\n\t}\n\telse if (\n\t\t!device.bowser.satisfies(\n\t\t\twindow.config.supportedBrowsers || supportedBrowsers\n\t\t)\n\t)\n\t{\n\t\tlogger.error(\n\t\t\t'Your browser is not supported [deviceInfo:\"%o\"]',\n\t\t\tdevice\n\t\t);\n\t    alert('Your browser is not supported [deviceInfo:\"%o\"] '+ device)\n\t\tunsupportedBrowser = true;\n\t}\n\telse\n\t{\n\t\tlogger.debug('Your browser is supported [deviceInfo:\"%o\"]', device);\n\t}\n\n\tif (unsupportedBrowser || webrtcUnavailable)\n\t{\n\t\trender(\n\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t<RawIntlProvider value={intl}>\n\t\t\t\t\t<UnsupportedBrowser\n\t\t\t\t\t\twebrtcUnavailable={webrtcUnavailable}\n\t\t\t\t\t\tplatform={device.platform}\n\t\t\t\t\t/>\n\t\t\t\t</RawIntlProvider>\n\t\t\t</MuiThemeProvider>,\n\t\t\tdocument.getElementById('multiparty-meeting')\n\t\t);\n\n\t\treturn;\n\t}\n\n\tstore.dispatch(\n\t\tmeActions.setMe({\n\t\t\tpeerId,\n\t\t\tloginEnabled : window.config.loginEnabled\n\t\t})\n\t);\n\n\troomClient = new RoomClient(\n\t\t{\n\t\t\tpeerId,\n\t\t\taccessCode,\n\t\t\tdevice,\n\t\t\tproduce,\n\t\t\tforceTcp,\n\t\t\tdisplayName,\n\t\t\tmuted,\n\t\t\tbasePath\n\t\t});\n\n\tglobal.CLIENT = roomClient;\n\n\trender(\n\t\t<Provider store={store}>\n\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t<RawIntlProvider value={intl}>\n\t\t\t\t\t<PersistGate loading={<LoadingView />} persistor={persistor}>\n\t\t\t\t\t\t<RoomContext.Provider value={roomClient}>\n\t\t\t\t\t\t\t<SnackbarProvider >\n\t\t\t\t\t\t\t\t<Router basename={basePath}>\n\t\t\t\t\t\t\t\t\t<Suspense fallback={<LoadingView />}>\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<Route exact path='/' component={ChooseRoom} />\n\t\t\t\t\t\t\t\t\t\t\t<Route path='/:id' component={App} />\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t</Router>\n\t\t\t\t\t\t\t</SnackbarProvider>\n\t\t\t\t\t\t</RoomContext.Provider>\n\t\t\t\t\t</PersistGate>\n\t\t\t\t</RawIntlProvider>\n\t\t\t</MuiThemeProvider>\n\t\t</Provider>,\n\t\tdocument.getElementById('multiparty-meeting')\n\t);\n}\n\nserviceWorker.unregister();\n","export const setSelectedAudioDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedAudioOutputDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_OUTPUT_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedWebcamDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_WEBCAM',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setVideoResolution = (resolution) =>\n\t({\n\t\ttype    : 'SET_VIDEO_RESOLUTION',\n\t\tpayload : { resolution }\n\t});\n\nexport const setVideoFrameRate = (frameRate) =>\n\t({\n\t\ttype    : 'SET_VIDEO_FRAME_RATE',\n\t\tpayload : { frameRate }\n\t});\n\nexport const setScreenSharingResolution = (screenSharingResolution) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_RESOLUTION',\n\t\tpayload : { screenSharingResolution }\n\t});\n\nexport const setScreenSharingFrameRate = (screenSharingFrameRate) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_FRAME_RATE',\n\t\tpayload : { screenSharingFrameRate }\n\t});\n\nexport const setDisplayName = (displayName) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME',\n\t\tpayload : { displayName }\n\t});\n\nexport const toggleAdvancedMode = () =>\n\t({\n\t\ttype : 'TOGGLE_ADVANCED_MODE'\n\t});\n\nexport const togglePermanentTopBar = () =>\n\t({\n\t\ttype : 'TOGGLE_PERMANENT_TOPBAR'\n\t});\n\nexport const toggleButtonControlBar = () =>\n\t({\n\t\ttype : 'TOGGLE_BUTTON_CONTROL_BAR'\n\t});\n\nexport const toggleDrawerOverlayed = () =>\n\t({\n\t\ttype : 'TOGGLE_DRAWER_OVERLAYED'\n\t});\n\nexport const toggleShowNotifications = () =>\n\t({\n\t\ttype : 'TOGGLE_SHOW_NOTIFICATIONS'\n\t});\n\nexport const setEchoCancellation = (echoCancellation) =>\n\t({\n\t\ttype    : 'SET_ECHO_CANCELLATION',\n\t\tpayload : { echoCancellation }\n\t});\n\nexport const setAutoGainControl = (autoGainControl) =>\n\t({\n\t\ttype    : 'SET_AUTO_GAIN_CONTROL',\n\t\tpayload : { autoGainControl }\n\t});\n\nexport const setNoiseSuppression = (noiseSuppression) =>\n\t({\n\t\ttype    : 'SET_NOISE_SUPPRESSION',\n\t\tpayload : { noiseSuppression }\n\t});\n\nexport const setVoiceActivatedUnmute = (voiceActivatedUnmute) =>\n\t({\n\t\ttype    : 'SET_VOICE_ACTIVATED_UNMUTE',\n\t\tpayload : { voiceActivatedUnmute }\n\t});\n\nexport const setNoiseThreshold = (noiseThreshold) =>\n\t({\n\t\ttype    : 'SET_NOISE_THRESHOLD',\n\t\tpayload : { noiseThreshold }\n\t});\n\nexport const setDefaultAudio = (audio) =>\n\t({\n\t\ttype    : 'SET_DEFAULT_AUDIO',\n\t\tpayload : { audio }\n\t});\n\nexport const toggleHiddenControls = () =>\n\t({\n\t\ttype : 'TOGGLE_HIDDEN_CONTROLS'\n\t});\n\nexport const toggleNotificationSounds = () =>\n\t({\n\t\ttype : 'TOGGLE_NOTIFICATION_SOUNDS'\n\t});\n\nexport const setLastN = (lastN) =>\n\t({\n\t\ttype    : 'SET_LAST_N',\n\t\tpayload : { lastN }\n\t});","export const setRoomName = (name) =>\n\t({\n\t\ttype    : 'SET_ROOM_NAME',\n\t\tpayload : { name }\n\n\t});\n\nexport const setRoomState = (state) =>\n\t({\n\t\ttype    : 'SET_ROOM_STATE',\n\t\tpayload : { state }\n\n\t});\n\nexport const setRoomActiveSpeaker = (peerId) =>\n\t({\n\t\ttype    : 'SET_ROOM_ACTIVE_SPEAKER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setSilenceRoom = () =>\n\t({\n\t\ttype : 'SET_ROOM_SILENCED'\n\t});\n\nexport const setUnsilenceRoom = () =>\n\t({\n\t\ttype : 'SET_ROOM_UNSILENCED'\n\t});\n\n\nexport const setRoomLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_LOCKED'\n\t});\n\nexport const setRoomUnLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_UNLOCKED'\n\t});\t\nexport const setInLobby = (inLobby) =>\n\t({\n\t\ttype    : 'SET_IN_LOBBY',\n\t\tpayload : { inLobby }\n\t});\n\nexport const setSignInRequired = (signInRequired) =>\n\t({\n\t\ttype    : 'SET_SIGN_IN_REQUIRED',\n\t\tpayload : { signInRequired }\n\t});\n\nexport const setOverRoomLimit = (overRoomLimit) =>\n\t({\n\t\ttype    : 'SET_OVER_ROOM_LIMIT',\n\t\tpayload : { overRoomLimit }\n\t});\n\nexport const setAccessCode = (accessCode) =>\n\t({\n\t\ttype    : 'SET_ACCESS_CODE',\n\t\tpayload : { accessCode }\n\t});\n\nexport const setJoinByAccessCode = (joinByAccessCode) =>\n\t({\n\t\ttype    : 'SET_JOIN_BY_ACCESS_CODE',\n\t\tpayload : { joinByAccessCode }\n\t});\n\nexport const setSettingsOpen = (settingsOpen) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_OPEN',\n\t\tpayload : { settingsOpen }\n\t});\n\nexport const setExtraVideoOpen = (extraVideoOpen) =>\n\t({\n\t\ttype    : 'SET_EXTRA_VIDEO_OPEN',\n\t\tpayload : { extraVideoOpen }\n\t});\n\nexport const setHelpOpen = (helpOpen) =>\n\t({\n\t\ttype    : 'SET_HELP_OPEN',\n\t\tpayload : { helpOpen }\n\t});\n\nexport const setAboutOpen = (aboutOpen) =>\n\t({\n\t\ttype    : 'SET_ABOUT_OPEN',\n\t\tpayload : { aboutOpen }\n\t});\n\nexport const setSettingsTab = (tab) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_TAB',\n\t\tpayload : { tab }\n\t});\n\nexport const setLockDialogOpen = (lockDialogOpen) =>\n\t({\n\t\ttype    : 'SET_LOCK_DIALOG_OPEN',\n\t\tpayload : { lockDialogOpen }\n\t});\n\nexport const setFileSharingSupported = (supported) =>\n\t({\n\t\ttype    : 'FILE_SHARING_SUPPORTED',\n\t\tpayload : { supported }\n\t});\n\nexport const toggleConsumerWindow = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_WINDOW_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setToolbarsVisible = (toolbarsVisible) =>\n\t({\n\t\ttype    : 'SET_TOOLBARS_VISIBLE',\n\t\tpayload : { toolbarsVisible }\n\t});\n\nexport const setDisplayMode = (mode) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_MODE',\n\t\tpayload : { mode }\n\t});\n\nexport const setSelectedPeer = (selectedPeerId) =>\n\t({\n\t\ttype    : 'SET_SELECTED_PEER',\n\t\tpayload : { selectedPeerId }\n\t});\n\nexport const setFixedPeer = (fixed) =>\n\t({\n\t\ttype    : 'SET_FIXED_PEER',\n\t\tpayload : { fixed }\n\t});\n\nexport const pageNavigate = (direction) =>\n\t({\n\t\ttype    : 'DO_PAGE',\n\t\tpayload : { direction }\n\t});\n\nexport const setSpotlights = (spotlights) =>\n\t({\n\t\ttype    : 'SET_SPOTLIGHTS',\n\t\tpayload : { spotlights }\n\t});\n\nexport const clearSpotlights = () =>\n\t({\n\t\ttype : 'CLEAR_SPOTLIGHTS'\n\t});\n\nexport const toggleJoined = () =>\n\t({\n\t\ttype : 'TOGGLE_JOINED'\n\t});\n\nexport const toggleConsumerFullscreen = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_FULLSCREEN_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setLobbyPeersPromotionInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setMuteAllInProgress = (flag) =>\n\t({\n\t\ttype    : 'MUTE_ALL_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllVideoInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_VIDEO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllScreenSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setCloseMeetingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLOSE_MEETING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearChatInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_CHAT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearFileSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_FILE_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRoomPermissions = (roomPermissions) =>\n\t({\n\t\ttype    : 'SET_ROOM_PERMISSIONS',\n\t\tpayload : { roomPermissions }\n\t});\n\nexport const setAllowWhenRoleMissing = (allowWhenRoleMissing) =>\n\t({\n\t\ttype    : 'SET_ALLOW_WHEN_ROLE_MISSING',\n\t\tpayload : { allowWhenRoleMissing }\n\t});\n","export const addNotification = (notification) =>\n\t({\n\t\ttype    : 'ADD_NOTIFICATION',\n\t\tpayload : { notification }\n\t});\n\nexport const removeNotification = (notificationId) =>\n\t({\n\t\ttype    : 'REMOVE_NOTIFICATION',\n\t\tpayload : { notificationId }\n\t});\n\nexport const removeAllNotifications = () =>\n\t({\n\t\ttype : 'REMOVE_ALL_NOTIFICATIONS'\n\t});","const initialState =\n{\n\tname                          : '',\n\t// new/connecting/connected/disconnected/closed,\n\tstate                         : 'new',\n\tlocked                        : false,\n\tsilenced                      : false,\n\tinLobby                       : false,\n\tsignInRequired                : false,\n\toverRoomLimit                 : false,\n\t// access code to the room if locked and joinByAccessCode == true\n\taccessCode                    : '',\n\t// if true: accessCode is a possibility to open the room\n\tjoinByAccessCode              : true,\n\tactiveSpeakerId               : null,\n\ttorrentSupport                : false,\n\tshowSettings                  : false,\n\tfullScreenConsumer            : null, // ConsumerID\n\twindowConsumer                : null, // ConsumerID\n\ttoolbarsVisible               : true,\n\tmode                          : window.config.defaultLayout || 'democratic',\n\tselectedPeerId                : null,\n\tspotlights                    : [],\n\tsettingsOpen                  : false,\n\textraVideoOpen                : false,\n\thelpOpen                      : false,\n\taboutOpen                     : false,\n\tcurrentSettingsTab            : 'media', // media, appearence, advanced\n\tlockDialogOpen                : false,\n\tjoined                        : false,\n\tmuteAllInProgress             : false,\n\tlobbyPeersPromotionInProgress : false,\n\tstopAllVideoInProgress        : false,\n\tcloseMeetingInProgress        : false,\n\tclearChatInProgress           : false,\n\tclearFileSharingInProgress    : false,\n\troomPermissions               : null,\n\tallowWhenRoleMissing          : null,\n\tfixed\t\t\t\t\t\t  : 'none'\n};\n\nconst room = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ROOM_NAME':\n\t\t{\n\t\t\tconst { name } = action.payload;\n\n\t\t\treturn { ...state, name };\n\t\t}\n\n\t\tcase 'SET_ROOM_STATE':\n\t\t{\n\t\t\tconst roomState = action.payload.state;\n\n\t\t\tif (roomState === 'connected')\n\t\t\t\treturn { ...state, state: roomState };\n\t\t\telse\n\t\t\t\treturn { ...state, state: roomState, activeSpeakerId: null };\n\t\t}\n\n\t\tcase 'SET_ROOM_SILENCED':\n\t\t{\n\t\t\tconsole.log(\"room is silence locked\");\n\t\t\treturn { ...state, silenced: true };\n\t\t}\n\n\t\tcase 'SET_ROOM_UNSILENCED':\n\t\t{\n\t\t\treturn { ...state, silenced: false };\n\t\t}\n\n\t\tcase 'SET_ROOM_LOCKED':\n\t\t\t{\n\t\t\t\treturn { ...state, locked: true };\n\t\t\t}\n\t\n\t\t\tcase 'SET_ROOM_UNLOCKED':\n\t\t\t{\n\t\t\t\treturn { ...state, locked: false };\n\t\t\t}\n\t\n\n\t\tcase 'SET_IN_LOBBY':\n\t\t{\n\t\t\tconst { inLobby } = action.payload;\n\n\t\t\treturn { ...state, inLobby };\n\t\t}\n\n\t\tcase 'SET_SIGN_IN_REQUIRED':\n\t\t{\n\t\t\tconst { signInRequired } = action.payload;\n\n\t\t\treturn { ...state, signInRequired };\n\t\t}\n\t\tcase 'SET_OVER_ROOM_LIMIT':\n\t\t{\n\t\t\tconst { overRoomLimit } = action.payload;\n\n\t\t\treturn { ...state, overRoomLimit };\n\t\t}\n\t\tcase 'SET_ACCESS_CODE':\n\t\t{\n\t\t\tconst { accessCode } = action.payload;\n\n\t\t\treturn { ...state, accessCode };\n\t\t}\n\n\t\tcase 'SET_JOIN_BY_ACCESS_CODE':\n\t\t{\n\t\t\tconst { joinByAccessCode } = action.payload;\n\n\t\t\treturn { ...state, joinByAccessCode };\n\t\t}\n\n\t\tcase 'SET_LOCK_DIALOG_OPEN':\n\t\t{\n\t\t\tconst { lockDialogOpen } = action.payload;\n\n\t\t\treturn { ...state, lockDialogOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_OPEN':\n\t\t{\n\t\t\tconst { settingsOpen } = action.payload;\n\n\t\t\treturn { ...state, settingsOpen };\n\t\t}\n\n\t\tcase 'SET_EXTRA_VIDEO_OPEN':\n\t\t{\n\t\t\tconst { extraVideoOpen } = action.payload;\n\n\t\t\treturn { ...state, extraVideoOpen };\n\t\t}\n\n\t\tcase 'SET_HELP_OPEN':\n\t\t{\n\t\t\tconst { helpOpen } = action.payload;\n\n\t\t\treturn { ...state, helpOpen };\n\t\t}\n\n\t\tcase 'SET_ABOUT_OPEN':\n\t\t{\n\t\t\tconst { aboutOpen } = action.payload;\n\n\t\t\treturn { ...state, aboutOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_TAB':\n\t\t{\n\t\t\tconst { tab } = action.payload;\n\n\t\t\treturn { ...state, currentSettingsTab: tab };\n\t\t}\n\n\t\tcase 'SET_ROOM_ACTIVE_SPEAKER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\n\t\t\treturn { ...state, activeSpeakerId: peerId };\n\t\t}\n\n\t\tcase 'FILE_SHARING_SUPPORTED':\n\t\t{\n\t\t\tconst { supported } = action.payload;\n\n\t\t\treturn { ...state, torrentSupport: supported };\n\t\t}\n\n\t\tcase 'TOGGLE_JOINED':\n\t\t{\n\t\t\tconst joined = true;\n\n\t\t\treturn { ...state, joined };\n\t\t}\n\n\t\tcase 'TOGGLE_FULLSCREEN_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.fullScreenConsumer;\n\n\t\t\treturn { ...state, fullScreenConsumer: currentConsumer ? null : consumerId };\n\t\t}\n\n\t\tcase 'TOGGLE_WINDOW_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.windowConsumer;\n\n\t\t\tif (currentConsumer === consumerId)\n\t\t\t\treturn { ...state, windowConsumer: null };\n\t\t\telse\n\t\t\t\treturn { ...state, windowConsumer: consumerId };\n\t\t}\n\n\t\tcase 'SET_TOOLBARS_VISIBLE':\n\t\t{\n\t\t\tconst { toolbarsVisible } = action.payload;\n\n\t\t\treturn { ...state, toolbarsVisible };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_MODE':\n\t\t\treturn { ...state, mode: action.payload.mode };\n\t\t\n\t\tcase 'SET_FIXED_PEER':\n\t\t\treturn { ...state, fixed: action.payload.fixed };\n\n\t\tcase 'SET_SELECTED_PEER':\n\t\t{\n\t\t\tconst { selectedPeerId } = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\n\t\t\t\tselectedPeerId : state.selectedPeerId === selectedPeerId ?\n\t\t\t\t\tnull : selectedPeerId\n\t\t\t};\n\t\t}\n\n\t\t\n\t\tcase 'SET_SPOTLIGHTS':\n\t\t{\n\t\t\tconst { spotlights } = action.payload;\n\n\t\t\treturn { ...state, spotlights };\n\t\t}\n\n\t\tcase 'CLEAR_SPOTLIGHTS':\n\t\t{\n\t\t\treturn { ...state, spotlights: [] };\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, lobbyPeersPromotionInProgress: action.payload.flag };\n\n\t\tcase 'MUTE_ALL_IN_PROGRESS':\n\t\t\treturn { ...state, muteAllInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllVideoInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllScreenSharingInProgress: action.payload.flag };\n\n\t\tcase 'CLOSE_MEETING_IN_PROGRESS':\n\t\t\treturn { ...state, closeMeetingInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_CHAT_IN_PROGRESS':\n\t\t\treturn { ...state, clearChatInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_FILE_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, clearFileSharingInProgress: action.payload.flag };\n\n\t\tcase 'SET_ROOM_PERMISSIONS':\n\t\t{\n\t\t\tconst { roomPermissions } = action.payload;\n\n\t\t\treturn { ...state, roomPermissions };\n\t\t}\n\n\t\tcase 'SET_ALLOW_WHEN_ROLE_MISSING':\n\t\t{\n\t\t\tconst { allowWhenRoleMissing } = action.payload;\n\n\t\t\treturn { ...state, allowWhenRoleMissing };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default room;\n","const initialState =\n{\n\tid                    : null,\n\tpicture               : null,\n\tbrowser               : null,\n\troles                 : [ 'normal' ], // Default role\n\tcanSendMic            : false,\n\tcanSendWebcam         : false,\n\tcanShareScreen        : false,\n\tcanShareFiles         : false,\n\taudioDevices          : null,\n\twebcamDevices         : null,\n\twebcamInProgress      : false,\n\taudioInProgress       : false,\n\tscreenShareInProgress : false,\n\tdisplayNameInProgress : false,\n\tloginEnabled          : false,\n\traisedHand            : false,\n\traisedHandInProgress  : false,\n\tloggedIn              : false,\n\tisSpeaking            : false,\n\tisAutoMuted           : true\n};\n\nconst me = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId,\n\t\t\t\tloginEnabled\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tid : peerId,\n\t\t\t\tloginEnabled\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_BROWSER':\n\t\t{\n\t\t\tconst { browser } = action.payload;\n\n\t\t\treturn { ...state, browser };\n\t\t}\n\n\t\tcase 'LOGGED_IN':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, loggedIn: flag };\n\t\t}\n\n\t\tcase 'ADD_ROLE':\n\t\t{\n\t\t\tif (state.roles.includes(action.payload.role))\n\t\t\t\treturn state;\n\n\t\t\tconst roles = [ ...state.roles, action.payload.role ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((role) =>\n\t\t\t\trole !== action.payload.role);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'SET_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\n\t\tcase 'SET_MEDIA_CAPABILITIES':\n\t\t{\n\t\t\tconst {\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_AUDIO_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_OUTPUT_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioOutputDevices: devices };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, webcamDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, audioInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, webcamInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARE_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, screenShareInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHand: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHandInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, displayNameInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_IS_SPEAKING':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isSpeaking: flag };\n\t\t}\n\n\t\tcase 'SET_AUTO_MUTED':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isAutoMuted: flag };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default me;\n","const initialState = {};\n\nconst producers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PRODUCER':\n\t\t{\n\t\t\tconst { producer } = action.payload;\n\n\t\t\treturn { ...state, [producer.id]: producer };\n\t\t}\n\n\t\tcase 'REMOVE_PRODUCER':\n\t\t{\n\t\t\tconst { producerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[producerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PRODUCER_PAUSED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_RESUMED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_TRACK':\n\t\t{\n\t\t\tconst { producerId, track } = action.payload;\n\t\t\tconst producer = state[producerId];\n\t\t\tconst newProducer = { ...producer, track };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_SCORE':\n\t\t{\n\t\t\tconst { producerId, score } = action.payload;\n\n\t\t\tconst producer = state[producerId];\n\n\t\t\tconst newProducer = { ...producer, score };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default producers;\n","const initialState = {};\n\nconst peer = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t\treturn action.payload.peer;\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, peerVideoInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn { ...state, peerAudioInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\t\treturn { ...state, peerScreenInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\t\treturn { ...state, peerKickInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHand          : action.payload.raisedHand,\n\t\t\t\traisedHandTimestamp : action.payload.raisedHandTimestamp\n\t\t\t};\n\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHandInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst consumers = [ ...state.consumers, action.payload.consumer.id ];\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst consumers = state.consumers.filter((consumer) =>\n\t\t\t\tconsumer !== action.payload.consumerId);\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'SET_PEER_PICTURE':\n\t\t{\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\t}\n\n\t\tcase 'ADD_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = [ ...state.roles, action.payload.role ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((role) =>\n\t\t\t\trole !== action.payload.role);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerAudioInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerVideoInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerScreenSharingInProgress : action.payload.flag\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst peers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peer.id]: peer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\tcase 'SET_PEER_PICTURE':\n\t\tcase 'ADD_CONSUMER':\n\t\tcase 'ADD_PEER_ROLE':\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\t{\n\t\t\tconst oldPeer = state[action.payload.peerId];\n\n\t\t\tif (!oldPeer)\n\t\t\t{\n\t\t\t\tthrow new Error('no Peer found');\n\t\t\t}\n\n\t\t\treturn { ...state, [oldPeer.id]: peer(oldPeer, action) };\n\t\t}\n\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst oldPeer = state[action.payload.peerId];\n\n\t\t\t// NOTE: This means that the Peer was closed before, so it's ok.\n\t\t\tif (!oldPeer)\n\t\t\t\treturn state;\n\n\t\t\treturn { ...state, [oldPeer.id]: peer(oldPeer, action) };\n\t\t}\n\n\t\tcase 'CLEAR_PEERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peers;\n","const lobbyPeer = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t\treturn { id: action.payload.peerId };\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, promotionInProgress: action.payload.flag };\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst lobbyPeers = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peerId]: lobbyPeer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_LOBBY_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t{\n\t\t\tconst oldLobbyPeer = state[action.payload.peerId];\n\n\t\t\tif (!oldLobbyPeer)\n\t\t\t{\n\t\t\t\t// Tried to update non-existent lobbyPeer. Has probably been promoted, or left.\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, [oldLobbyPeer.id]: lobbyPeer(oldLobbyPeer, action) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default lobbyPeers;\n","const initialState = {};\n\nconst consumers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst { consumer } = action.payload;\n\n\t\t\treturn { ...state, [consumer.id]: consumer };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[consumerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PAUSED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_RESUMED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_CURRENT_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tcurrentSpatialLayer  : spatialLayer,\n\t\t\t\tcurrentTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PREFERRED_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tpreferredSpatialLayer  : spatialLayer,\n\t\t\t\tpreferredTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PRIORITY':\n\t\t{\n\t\t\tconst { consumerId, priority } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, priority };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_TRACK':\n\t\t{\n\t\t\tconst { consumerId, track } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, track };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_SCORE':\n\t\t{\n\t\t\tconst { consumerId, score } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tif (!consumer)\n\t\t\t\treturn state;\n\n\t\t\tconst newConsumer = { ...consumer, score };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'CLEAR_CONSUMERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default consumers;\n","const initialState = {};\n\nconst peerVolumes = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, [peerId]: -100 };\n\t\t}\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\tconst { peer } = action.payload;\n\n\t\t\treturn { ...state, [peer.id]: -100 };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_VOLUME':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst dBs = action.payload.volume < -100 ? -100 : action.payload.volume;\n\n\t\t\treturn { ...state, [peerId]: Math.round(dBs) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peerVolumes;\n","const notifications = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NOTIFICATION':\n\t\t{\n\t\t\tconst { notification } = action.payload;\n\n\t\t\treturn [ ...state, notification ];\n\t\t}\n\n\t\tcase 'REMOVE_NOTIFICATION':\n\t\t{\n\t\t\tconst { notificationId } = action.payload;\n\n\t\t\treturn state.filter((notification) => notification.id !== notificationId);\n\t\t}\n\n\t\tcase 'REMOVE_ALL_NOTIFICATIONS':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default notifications;\n","export function createNewMessage(text, sender, name, picture)\n{\n\treturn {\n\t\ttype : 'message',\n\t\ttext,\n\t\ttime : Date.now(),\n\t\tname,\n\t\tsender,\n\t\tpicture\n\t};\n}","import\n{\n\tcreateNewMessage\n} from './helper';\n\nconst chat = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NEW_USER_MESSAGE':\n\t\t{\n\t\t\tconst { text } = action.payload;\n\n\t\t\tconst message = createNewMessage(text, 'client', 'Me', undefined);\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tconst { message } = action.payload;\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_CHAT_HISTORY':\n\t\t{\n\t\t\tconst { chatHistory } = action.payload;\n\n\t\t\treturn [ ...state, ...chatHistory ];\n\t\t}\n\n\t\tcase 'CLEAR_CHAT':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default chat;\n","const initialState =\n{\n\ttoolAreaOpen   : false,\n\tcurrentToolTab : 'chat', // chat, settings, users\n\tunreadMessages : 0,\n\tunreadFiles    : 0\n};\n\nconst toolarea = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'TOGGLE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = !state.toolAreaOpen;\n\t\t\tconst unreadMessages = toolAreaOpen && state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolAreaOpen && state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'OPEN_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = true;\n\t\t\tconst unreadMessages = state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'CLOSE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = false;\n\n\t\t\treturn { ...state, toolAreaOpen };\n\t\t}\n\n\t\tcase 'SET_TOOL_TAB':\n\t\t{\n\t\t\tconst { toolTab } = action.payload;\n\t\t\tconst unreadMessages = toolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, currentToolTab: toolTab, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'chat')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadMessages: state.unreadMessages + 1 };\n\t\t}\n\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'files')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadFiles: state.unreadFiles + 1 };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default toolarea;\n","const files = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tconst { peerId, magnetUri } = action.payload;\n\n\t\t\tconst newFile = {\n\t\t\t\tactive    : false,\n\t\t\t\tprogress  : 0,\n\t\t\t\tfiles     : null,\n\t\t\t\tpeerId    : peerId,\n\t\t\t\tmagnetUri : magnetUri\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'ADD_FILE_HISTORY':\n\t\t{\n\t\t\tconst { fileHistory } = action.payload;\n\t\t\tconst newFileHistory = {};\n\n\t\t\t// eslint-disable-next-line\n\t\t\tfileHistory.map((file) =>\n\t\t\t{\n\t\t\t\tconst newFile =\n\t\t\t\t{\n\t\t\t\t\tactive   : false,\n\t\t\t\t\tprogress : 0,\n\t\t\t\t\tfiles    : null,\n\t\t\t\t\t...file\n\t\t\t\t};\n\n\t\t\t\tnewFileHistory[file.magnetUri] = newFile;\n\t\t\t});\n\n\t\t\treturn { ...state, ...newFileHistory };\n\t\t}\n\n\t\tcase 'SET_FILE_ACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: true };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_INACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: false };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_PROGRESS':\n\t\t{\n\t\t\tconst { magnetUri, progress } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, progress: progress };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_DONE':\n\t\t{\n\t\t\tconst { magnetUri, sharedFiles } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = {\n\t\t\t\t...file,\n\t\t\t\tfiles    : sharedFiles,\n\t\t\t\tprogress : 1,\n\t\t\t\tactive   : false,\n\t\t\t\ttimeout  : false\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'CLEAR_FILES':\n\t\t\treturn {};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default files;\n","const initialState =\n{\n\tdisplayName             : 'Guest',\n\tselectedWebcam          : null,\n\tselectedAudioDevice     : null,\n\tadvancedMode            : false,\n\tsampleRate              : 48000,\n\tchannelCount            : 1,\n\tvolume                  : 1.0,\n\tautoGainControl         : false,\n\techoCancellation        : true,\n\tnoiseSuppression        : true,\n\tvoiceActivatedUnmute    : false,\n\tnoiseThreshold          : -50,\n\tsampleSize              : 16,\n\t// low, medium, high, veryhigh, ultra\n\tresolution              : window.config.defaultResolution || 'medium',\n\tframeRate               : window.config.defaultFrameRate || 15,\n\tscreenSharingResolution : window.config.defaultScreenResolution || 'veryhigh',\n\tscreenSharingFrameRate  : window.config.defaultScreenSharingFrameRate || 5,\n\tlastN                   : 4,\n\tpermanentTopBar         : true,\n\thiddenControls          : false,\n\tshowNotifications       : true,\n\tnotificationSounds      : true,\n\tbuttonControlBar        : window.config.buttonControlBar || false,\n\tdrawerOverlayed         : window.config.drawerOverlayed || true,\n\t...window.config.defaultAudio\n};\n\nconst settings = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'CHANGE_WEBCAM':\n\t\t{\n\t\t\treturn { ...state, selectedWebcam: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_OUTPUT_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioOutputDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME':\n\t\t{\n\t\t\tconst { displayName } = action.payload;\n\n\t\t\treturn { ...state, displayName };\n\t\t}\n\n\t\tcase 'TOGGLE_ADVANCED_MODE':\n\t\t{\n\t\t\tconst advancedMode = !state.advancedMode;\n\n\t\t\treturn { ...state, advancedMode };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_RATE':\n\t\t{\n\t\t\tconst { sampleRate } = action.payload;\n\n\t\t\treturn { ...state, sampleRate };\n\t\t}\n\n\t\tcase 'SET_CHANNEL_COUNT':\n\t\t{\n\t\t\tconst { channelCount } = action.payload;\n\n\t\t\treturn { ...state, channelCount };\n\t\t}\n\n\t\tcase 'SET_VOLUME':\n\t\t{\n\t\t\tconst { volume } = action.payload;\n\n\t\t\treturn { ...state, volume };\n\t\t}\n\n\t\tcase 'SET_AUTO_GAIN_CONTROL':\n\t\t{\n\t\t\tconst { autoGainControl } = action.payload;\n\n\t\t\treturn { ...state, autoGainControl };\n\t\t}\n\n\t\tcase 'SET_ECHO_CANCELLATION':\n\t\t{\n\t\t\tconst { echoCancellation } = action.payload;\n\n\t\t\treturn { ...state, echoCancellation };\n\t\t}\n\n\t\tcase 'SET_NOISE_SUPPRESSION':\n\t\t{\n\t\t\tconst { noiseSuppression } = action.payload;\n\n\t\t\treturn { ...state, noiseSuppression };\n\t\t}\n\n\t\tcase 'SET_VOICE_ACTIVATED_UNMUTE':\n\t\t{\n\t\t\tconst { voiceActivatedUnmute } = action.payload;\n\n\t\t\treturn { ...state, voiceActivatedUnmute };\n\t\t}\n\n\t\tcase 'SET_NOISE_THRESHOLD':\n\t\t{\n\t\t\tconst { noiseThreshold } = action.payload;\n\n\t\t\treturn { ...state, noiseThreshold };\n\t\t}\n\n\t\tcase 'SET_DEFAULT_AUDIO':\n\t\t{\n\t\t\tconst { audio } = action.payload;\n\n\t\t\treturn { ...state, audio };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_SIZE':\n\t\t{\n\t\t\tconst { sampleSize } = action.payload;\n\n\t\t\treturn { ...state, sampleSize };\n\t\t}\n\n\t\tcase 'SET_LAST_N':\n\t\t{\n\t\t\tconst { lastN } = action.payload;\n\n\t\t\treturn { ...state, lastN };\n\t\t}\n\n\t\tcase 'TOGGLE_PERMANENT_TOPBAR':\n\t\t{\n\t\t\tconst permanentTopBar = !state.permanentTopBar;\n\n\t\t\treturn { ...state, permanentTopBar };\n\t\t}\n\n\t\tcase 'TOGGLE_BUTTON_CONTROL_BAR':\n\t\t{\n\t\t\tconst buttonControlBar = !state.buttonControlBar;\n\n\t\t\treturn { ...state, buttonControlBar };\n\t\t}\n\n\t\tcase 'TOGGLE_DRAWER_OVERLAYED':\n\t\t{\n\t\t\tconst drawerOverlayed = !state.drawerOverlayed;\n\n\t\t\treturn { ...state, drawerOverlayed };\n\t\t}\n\n\t\tcase 'TOGGLE_HIDDEN_CONTROLS':\n\t\t{\n\t\t\tconst hiddenControls = !state.hiddenControls;\n\n\t\t\treturn { ...state, hiddenControls };\n\t\t}\n\n\t\tcase 'TOGGLE_NOTIFICATION_SOUNDS':\n\t\t{\n\t\t\tconst notificationSounds = !state.notificationSounds;\n\n\t\t\treturn { ...state, notificationSounds };\n\t\t}\n\n\t\tcase 'TOGGLE_SHOW_NOTIFICATIONS':\n\t\t{\n\t\t\tconst showNotifications = !state.showNotifications;\n\n\t\t\treturn { ...state, showNotifications };\n\t\t}\n\n\t\tcase 'SET_VIDEO_RESOLUTION':\n\t\t{\n\t\t\tconst { resolution } = action.payload;\n\n\t\t\treturn { ...state, resolution };\n\t\t}\n\n\t\tcase 'SET_VIDEO_FRAME_RATE':\n\t\t{\n\t\t\tconst { frameRate } = action.payload;\n\n\t\t\treturn { ...state, frameRate };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_RESOLUTION':\n\t\t{\n\t\t\tconst { screenSharingResolution } = action.payload;\n\n\t\t\treturn { ...state, screenSharingResolution };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_FRAME_RATE':\n\t\t{\n\t\t\tconst { screenSharingFrameRate } = action.payload;\n\n\t\t\treturn { ...state, screenSharingFrameRate };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default settings;\n","const initialState = {};\n\nconst transports = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_TRANSPORT_STATS':\n\t\t{\n\t\t\tconst { transport, type } = action.payload;\n\n\t\t\treturn { ...state, [type]: transport[0] };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default transports;\n","import { combineReducers } from 'redux';\nimport room from './room';\nimport me from './me';\nimport producers from './producers';\nimport peers from './peers';\nimport lobbyPeers from './lobbyPeers';\nimport consumers from './consumers';\nimport peerVolumes from './peerVolumes';\nimport notifications from './notifications';\nimport chat from './chat';\nimport toolarea from './toolarea';\nimport files from './files';\nimport settings from './settings';\nimport transports from './transports';\n\nexport default combineReducers({\n\troom,\n\tme,\n\tproducers,\n\tconsumers,\n\ttransports,\n\tpeers,\n\tlobbyPeers,\n\tpeerVolumes,\n\tnotifications,\n\tchat,\n\ttoolarea,\n\tfiles,\n\tsettings\n});\n","import {\n\tcreateStore,\n\tapplyMiddleware,\n\tcompose\n} from 'redux';\nimport thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport rootReducer from './reducers/rootReducer';\n\nconst persistConfig =\n{\n\tkey             : 'root',\n\tstorage         : storage,\n\tstateReconciler : autoMergeLevel2,\n\twhitelist       : [ 'settings' ]\n};\n\nconst reduxMiddlewares =\n[\n\tthunk\n];\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production')\n{\n\tconst reduxLogger = createLogger(\n\t\t{\n\t\t\t// filter VOLUME level actions from log\n\t\t\tpredicate : (getState, action) => !(action.type === 'SET_PEER_VOLUME'),\n\t\t\tduration  : true,\n\t\t\ttimestamp : false,\n\t\t\tlevel     : 'log',\n\t\t\tlogErrors : true\n\t\t});\n\n\treduxMiddlewares.push(reduxLogger);\n}\n\nconst composeEnhancers =\n\ttypeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) :\n\t\tcompose;\n\nconst enhancer = composeEnhancers(\n\tapplyMiddleware(...reduxMiddlewares)\n);\n\nconst pReducer = persistReducer(persistConfig, rootReducer);\n\nexport const store = createStore(\n\tpReducer,\n\tenhancer\n);\n\nexport const persistor = persistStore(store);","import debug from 'debug';\n\nconst APP_NAME = 'multiparty-meeting';\n\nexport default class Logger\n{\n\tconstructor(prefix)\n\t{\n\t\tif (prefix)\n\t\t{\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._debug = debug(APP_NAME);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\n\t\t}\n\n\t\t/* eslint-disable no-console */\n\t\tthis._debug.log = console.info.bind(console);\n\t\tthis._warn.log = console.warn.bind(console);\n\t\tthis._error.log = console.error.bind(console);\n\t\t/* eslint-enable no-console */\n\t}\n\n\tget debug()\n\t{\n\t\treturn this._debug;\n\t}\n\n\tget warn()\n\t{\n\t\treturn this._warn;\n\t}\n\n\tget error()\n\t{\n\t\treturn this._error;\n\t}\n}\n"],"sourceRoot":""}