{"version":3,"sources":["images/avatar-empty.jpeg","components/appPropTypes.js","actions/toolareaActions.js","components/FullScreen.js","components/Notifications/Notifications.js","components/Selectors.js","permissions.js","components/MeetingDrawer/Chat/ChatModerator.js","components/MeetingDrawer/Chat/Message.js","components/MeetingDrawer/Chat/MessageList.js","components/MeetingDrawer/Chat/ChatInput.js","components/MeetingDrawer/Chat/Chat.js","components/MeetingDrawer/FileSharing/File.js","components/MeetingDrawer/FileSharing/FileList.js","components/MeetingDrawer/FileSharing/FileSharingModerator.js","components/MeetingDrawer/FileSharing/FileSharing.js","components/MeetingDrawer/ParticipantList/ListPeer.js","components/MeetingDrawer/ParticipantList/ListMe.js","components/MeetingDrawer/ParticipantList/ListModerator.js","components/Containers/Volume.js","components/MeetingDrawer/ParticipantList/ParticipantList.js","components/MeetingDrawer/MeetingDrawer.js","components/Controls/EditableInput.js","components/VideoContainers/VideoView.js","components/Containers/Peer.js","components/Containers/Me.js","components/MeetingViews/Democratic.js","components/Containers/SpeakerPeer.js","components/MeetingViews/Filmstrip.js","components/PeerAudio/PeerAudio.js","components/PeerAudio/AudioPeers.js","components/VideoContainers/FullScreenView.js","components/VideoWindow/NewWindow.js","components/VideoContainers/FullView.js","components/VideoWindow/VideoWindow.js","components/AccessControl/LockDialog/ListLobbyPeer.js","components/AccessControl/LockDialog/LockDialog.js","components/Settings/MediaSettings.js","components/Settings/AppearenceSettings.js","components/Settings/AdvancedSettings.js","components/Settings/Settings.js","components/Controls/TopBar.js","components/Controls/ExtraVideo.js","components/Controls/ButtonControlBar.js","components/Controls/Help.js","components/Controls/About.js","components/Room.js"],"names":["module","exports","PropTypes","shape","state","oneOf","isRequired","activeSpeakerId","string","id","canSendMic","bool","canSendWebcam","webcamInProgress","source","deviceLabel","type","paused","track","any","codec","displayName","consumers","arrayOf","peerId","locallyPaused","remotelyPaused","remotelyLocked","profile","timeout","number","component","text","sender","data","picture","file","magnet","me","notify","func","setToolTab","toolTab","payload","key","fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror","webkit","moz","ms","FullScreen","document","this","vendor","Object","keys","element","handler","addEventListener","removeEventListener","bind","Boolean","val","toLowerCase","notificationPosition","window","config","Notifications","displayed","storeDisplayed","notifications","newNotifications","currentNotifications","props","notExists","i","filter","length","forEach","notification","includes","enqueueSnackbar","variant","autoHideDuration","anchorOrigin","vertical","horizontal","removeNotification","Component","withSnackbar","connect","dispatch","notificationId","notificationActions","areStatesEqual","next","prev","meRolesSelect","roles","roomPermissionsSelect","room","roomPermissions","roomAllowWhenRoleMissing","allowWhenRoleMissing","producersSelect","producers","consumersSelect","spotlightsSelector","spotlights","peersSelector","peers","getPeerConsumers","getAllConsumers","peersKeySelector","createSelector","peersValueSelector","values","lobbyPeersKeySelector","lobbyPeers","screenProducersSelector","producer","extraVideoProducersSelector","micProducerSelector","find","webcamProducerSelector","screenProducerSelector","spotlightScreenConsumerSelector","consumer","spotlightExtraVideoConsumerSelector","passiveMicConsumerSelector","spotlightsLengthSelector","spotlightPeersSelector","spotlightSortedPeersSelector","peer","raisedHand","sort","a","b","String","localeCompare","raisedHandSortedPeers","raisedHandTimestamp","peersSortedSelector","participantListSelector","raisedHands","peersLengthSelector","raisedHandsSelector","reduce","videoBoxesSelector","spotlightsLength","screenProducers","screenConsumers","extraVideoProducers","extraVideoConsumers","meProducersSelector","micProducer","webcamProducer","screenProducer","makePeerConsumerSelector","allConsumers","consumersArray","map","consumerId","micConsumer","webcamConsumer","screenConsumer","makePermissionSelector","permission","some","role","permissions","withRoomContext","hasPermission","isChatModerator","withStyles","theme","root","display","padding","spacing","boxShadow","backgroundColor","listheader","fontWeight","actionButton","marginLeft","intl","useIntl","roomClient","classes","className","defaultMessage","Button","aria-label","formatMessage","color","disabled","clearChatInProgress","onClick","clearChat","linkRenderer","marked","Renderer","link","href","title","marginBottom","flexShrink","selfMessage","remoteMessage","marginRight","margin","content","avatar","borderRadius","height","alignSelf","self","time","name","Paper","classnames","alt","src","Typography","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","parse","renderer","ALLOWED_TAGS","ALLOWED_ATTR","MessageList","node","scrollTop","scrollHeight","offsetHeight","nextProps","chat","prevProps","prevState","shouldScroll","value","Date","myPicture","ref","message","index","EmptyAvatar","getTimeString","React","flexDirection","alignItems","overflowY","settings","canChat","input","flex","iconButton","useState","setMessage","createNewMessage","now","InputBase","placeholder","onChange","e","target","onKeyPress","ev","preventDefault","sendMessage","sendChatMessage","autoFocus","IconButton","width","File","canShareFiles","magnetUri","fileContent","files","sharedFile","fileInfo","button","saveFile","active","decode","dn","handleDownload","progress","PureComponent","FileList","entries","filePicture","injectIntl","isFileSharingModerator","clearFileSharingInProgress","clearFileSharing","browser","tabOpen","toolarea","currentToolTab","canShare","shareButtonsWrapper","handleFileChange","event","shareFiles","buttonDescription","buttonGalleryDescription","accept","htmlFor","platform","initialState","overflow","cursor","marginTop","peerInfo","fontSize","paddingLeft","flexGrow","indicators","buttons","green","isModerator","spotlight","children","webcamEnabled","micEnabled","screenVisible","style","raisedHandInProgress","stopPropagation","lowerPeerHand","Tooltip","placement","peerScreenInProgress","modifyPeerConsumer","peerVideoInProgress","peerAudioInProgress","peerKickInProgress","kickPeer","stopPeerAudioInProgress","mutePeer","stopPeerVideoInProgress","stopPeerVideo","setFixedPeer","makeModerator","stopPeerScreenSharingInProgress","stopPeerScreenSharing","myId","console","log","indexOf","setRaisedHand","divider","lockTooltip","silenced","size","muteAllInProgress","muteAllPeers","disabledButton","unsilenceRoom","silenceRoom","stopAllVideoInProgress","stopAllPeerVideo","stopAllScreenSharingInProgress","stopAllPeerScreenSharing","closeMeetingInProgress","closeMeeting","peerVolumes","noiseThreshold","volume","Math","round","volumeLarge","position","top","bottom","right","justifyContent","largeBar","background","transitionProperty","transitionDuration","volumeSmall","float","backgroundSize","smallBar","backgroundRepeat","transform","small","ParticipantList","advancedMode","participants","selectedPeerId","list","flipKey","flipId","listItem","selected","setSelectedPeer","ParticipantListContainer","listStyleType","borderBottom","tabs","mapDispatchToProps","toolareaActions","unreadMessages","unreadFiles","appBar","tabsHeader","smallerFont","maxWidth","minWidth","smallerBadge","withTheme","closeDrawer","AppBar","Tabs","indicatorColor","textColor","Tab","label","Badge","badgeContent","direction","EditableInput","propName","classLoading","classInvalid","editProps","shouldBlockWhileLoading","change","logger","Logger","VideoView","videoWidth","videoHeight","_audioTrack","_videoTrack","_videoResolutionTimer","isMe","isScreen","isExtraVideo","showQuality","showPeerInfo","videoContain","videoVisible","videoMultiLayer","audioScore","videoScore","consumerCurrentSpatialLayer","consumerCurrentTemporalLayer","consumerPreferredSpatialLayer","consumerPreferredTemporalLayer","audioCodec","videoCodec","onChangeDisplayName","netInfo","quality","red","score","producerScore","orange","yellow","info","media","box","hidden","Fragment","recv","send","iceSelectedTuple","sendBitrate","toFixed","bytesSent","recvBitrate","bytesReceived","remoteIp","localIp","displayNameEdit","maxLength","autoCorrect","spellCheck","newDisplayName","displayNameStatic","video","contain","autoPlay","playsInline","muted","controls","videoTrack","audioTrack","_setTracks","clearInterval","videoElement","refs","oncanplay","onplay","onpause","_hideVideoResolution","audioElement","stream","MediaStream","addTrack","srcObject","setState","videoCanPlay","play","catch","error","warn","_showVideoResolution","setInterval","objectFit","userSelect","opacity","zIndex","gap","gridTemplateAreas","gridArea","justifySelf","border","windowConsumer","activeSpeaker","toggleConsumerFullscreen","roomActions","toggleConsumerWindow","touchAction","backgroundImage","backgroundPosition","borderColor","order","fab","smallContainer","pointerEvents","transition","viewContainer","videoInfo","hover","setHover","touchTimeout","smallScreen","useMediaQuery","breakpoints","down","rootStyle","onMouseOver","onMouseOut","onTouchStart","clearTimeout","onTouchEnd","setTimeout","Fab","consumerSpatialLayers","spatialLayers","consumerTemporalLayers","temporalLayers","currentSpatialLayer","currentTemporalLayer","preferredSpatialLayer","preferredTemporalLayer","abs","canShareScreen","transports","noiseVolume","meTag","left","ptt","textAlign","micState","micTip","webcamState","webcamTip","screenState","screenTip","screenShareTooltipOpen","screenShareTooltipSetOpen","screenShareTooltipHandleClose","screenShareInProgress","spacingStyle","curr","useEffect","poll","getTransportStats","isSpeaking","buttonControlBar","hiddenControls","audioInProgress","voiceActivatedUnmute","isAutoMuted","updateMic","start","muteMic","unmuteMic","disableWebcam","updateWebcam","open","onClose","onOpen","updateScreenSharing","disableScreenSharing","changeDisplayName","disableExtraVideo","Democratic","updateDimensions","peersRef","current","n","boxes","x","y","clientWidth","clientHeight","toolbarsVisible","permanentTopBar","rows","ceil","peerWidth","peerHeight","resizeTimeout","createRef","spotlightsPeers","showingToolBar","hiddenToolBar","toolAreaOpen","flexWrap","alignContent","paddingTop","Filmstrip","lastSpeaker","getActivePeerId","peerIds","isSharingCamera","newState","rootContainer","availableWidth","availableSpeakerHeight","availableFilmstripHeight","activePeerContainer","speakerWidth","speakerHeight","filmStripContainer","filmStripHeight","filmStripWidth","activePeerId","speakerStyle","peerStyle","speaker","filmStrip","Grid","container","justify","item","filmItem","spotlightsElement","gridTemplateColumns","gridTemplateRows","PeerAudio","_audioOutputDevice","audioOutputDevice","_setTrack","_setOutputDevice","audio","setSinkId","AudioPeersContainer","micConsumers","selectedAudioOutputDevice","data-component","fullScreenConsumer","icon","incompatibleVideo","consumerVisible","visible","NewWindow","handleToggleFullscreen","fullscreen","documentElement","handleFullscreenChange","createElement","windowCheckerInterval","released","mounted","ReactDOM","createPortal","data-tip","data-place","data-type","openChild","obj","url","features","onBlock","center","outerWidth","screenX","outerHeight","screenY","screenLeft","undefined","screen","screenTop","innerWidth","innerHeight","push","join","closed","release","body","appendChild","copyStyles","Array","from","styleSheets","styleSheet","rules","cssRules","err","newStyleEl","cssRule","cssText","returnText","split","line","slice","location","origin","createTextNode","head","newLinkEl","rel","close","onUnload","defaultProps","FullView","videoProfile","loading","VideoWindowContainer","promotionInProgress","lobbyPeersPromotionInProgress","canPromote","ListItem","ListItemAvatar","Avatar","ListItemText","primary","promoteLobbyPeer","handleCloseLockDialog","handleAccessCode","dialogPaper","lock","Dialog","lockDialogOpen","paper","DialogTitle","List","dense","subheader","ListSubheader","DialogContent","DialogContentText","gutterBottom","DialogActions","promoteAllLobbyPeers","NoiseSlider","rail","mark","markActive","Slider","setEchoCancellation","settingsActions","setAutoGainControl","setNoiseSuppression","setVoiceActivatedUnmute","setting","palette","switchLabel","nested","paddingBottom","paddingRight","formControl","webcams","audioDevices","audioOutputDevices","audioSettingsOpen","setAudioSettingsOpen","videoSettingsOpen","setVideoSettingsOpen","resolutions","webcamDevices","autoComplete","FormControl","Select","selectedWebcam","restart","newDeviceId","displayEmpty","autoWidth","selectEmpty","webcam","MenuItem","deviceId","FormHelperText","Collapse","in","resolution","newResolution","screenSharingFrameRate","newFrameRate","selectedAudioDevice","audioOutputSupportedBrowsers","changeAudioOutputDevice","audioOutputInProgress","audioOutput","FormControlLabel","control","Switch","checked","echoCancellation","labelPlacement","autoGainControl","noiseSuppression","slider","min","max","valueLabelDisplay","_setNoiseThreshold","marks","onTogglePermanentTopBar","onToggleHiddenControls","onToggleShowNotifications","onToggleButtonControlBar","onToggleDrawerOverlayed","handleChangeMode","isMobile","modes","mode","drawerOverlayed","showNotifications","onToggleAdvancedMode","onToggleNotificationSounds","notificationSounds","lockLastN","lastN","changeMaxSpotlights","maxLastN","_","handleCloseSettings","setSettingsTab","currentSettingsTab","settingsOpen","confirm","PulsingBadge","badge","secondary","main","animation","hasExtraVideoPermission","hasLockPermission","hasPromotionPermission","peersLength","loggedIn","loginEnabled","unread","canProduceExtraVideo","canLock","setToolbarsVisible","setFilmStrip","dmode","setSettingsOpen","setExtraVideoOpen","extraVideoOpen","setHelpOpen","helpOpen","setAboutOpen","aboutOpen","setLockDialogOpen","toggleToolArea","openUsersTab","persistentDrawerOpen","menuButton","logo","up","show","hide","grow","sectionDesktop","sectionMobile","moreAction","mobileMoreAnchorEl","setMobileMoreAnchorEl","anchorEl","setAnchorEl","currentMenu","setCurrentMenu","handleMenuClose","onFullscreen","isMenuOpen","isMobileMenuOpen","locked","fullscreenTooltip","loginTooltip","Toolbar","noWrap","getRoomId","dummy","select","execCommand","navigator","clipboard","writeText","alert","removeChild","aria-owns","aria-haspopup","rm","unlockRoom","lockRoom","logout","login","currentTarget","Popover","transformOrigin","onExited","getContentAnchorEl","Menu","menu","handleMenuOpen","handleCloseExtraVideo","videoDevices","videoDevice","setVideoDevice","addExtraVideo","fixed","move","handRaiseTip","pageNavigate","shortcuts","fromCharCode","handleCloseHelp","whiteSpace","handleCloseAbout","dividers","paragraph","align","Link","process","Divider","light","supportUrl","privacyUrl","TIMEOUT","hideTimeout","Room","waitForHide","idle","handleMovement","View","filmstrip","democratic","isElectron","buttonText","CssBaseline","Hidden","implementation","SwipeableDrawer","anchor","drawerPaper","ModalProps","keepMounted","drawer","Drawer","os","backgroundAttachment"],"mappings":"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","file":"static/js/room.dcf14283.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avatar-empty.23a3776b.jpeg\";","import PropTypes from 'prop-types';\n\nexport const Room = PropTypes.shape(\n\t{\n\t\tstate : PropTypes.oneOf(\n\t\t\t[ 'new', 'connecting', 'connected', 'closed' ]).isRequired,\n\t\tactiveSpeakerId : PropTypes.string\n\t});\n\nexport const Me = PropTypes.shape(\n\t{\n\t\tid               : PropTypes.string.isRequired,\n\t\tcanSendMic       : PropTypes.bool.isRequired,\n\t\tcanSendWebcam    : PropTypes.bool.isRequired,\n\t\twebcamInProgress : PropTypes.bool.isRequired\n\t});\n\nexport const Producer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tsource      : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tdeviceLabel : PropTypes.string,\n\t\ttype        : PropTypes.oneOf([ 'front', 'back', 'screen', 'extravideo' ]),\n\t\tpaused      : PropTypes.bool.isRequired,\n\t\ttrack       : PropTypes.any,\n\t\tcodec       : PropTypes.string.isRequired\n\t});\n\nexport const Peer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tdisplayName : PropTypes.string,\n\t\tconsumers   : PropTypes.arrayOf(PropTypes.string).isRequired\n\t});\n\nexport const Consumer = PropTypes.shape(\n\t{\n\t\tid             : PropTypes.string.isRequired,\n\t\tpeerId         : PropTypes.string.isRequired,\n\t\tsource         : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tlocallyPaused  : PropTypes.bool.isRequired,\n\t\tremotelyPaused : PropTypes.bool.isRequired,\n\t\tremotelyLocked : PropTypes.bool.isRequired,\n\t\tprofile        : PropTypes.oneOf([ 'none', 'default', 'low', 'medium', 'high' ]),\n\t\ttrack          : PropTypes.any,\n\t\tcodec          : PropTypes.string\n\t});\n\nexport const Notification = PropTypes.shape(\n\t{\n\t\tid      : PropTypes.string.isRequired,\n\t\ttype    : PropTypes.oneOf([ 'info', 'error' ]).isRequired,\n\t\ttimeout : PropTypes.number\n\t});\n\nexport const Message = PropTypes.shape(\n\t{\n\t\ttype      : PropTypes.string,\n\t\tcomponent : PropTypes.string,\n\t\ttext      : PropTypes.string,\n\t\tsender    : PropTypes.string\n\t});\n\nexport const FileEntryProps = PropTypes.shape(\n\t{\n\t\tdata : PropTypes.shape({\n\t\t\tid      : PropTypes.string.isRequired,\n\t\t\tpicture : PropTypes.string,\n\t\t\tfile    : PropTypes.shape({\n\t\t\t\tmagnet : PropTypes.string.isRequired\n\t\t\t}).isRequired,\n\t\t\tme : PropTypes.bool\n\t\t}).isRequired,\n\t\tnotify : PropTypes.func.isRequired\n\t});","export const toggleToolArea = () =>\n\t({\n\t\ttype : 'TOGGLE_TOOL_AREA'\n\t});\n\nexport const openToolArea = () =>\n\t({\n\t\ttype : 'OPEN_TOOL_AREA'\n\t});\n\nexport const closeToolArea = () =>\n\t({\n\t\ttype : 'CLOSE_TOOL_AREA'\n\t});\n\nexport const setToolTab = (toolTab) =>\n\t({\n\t\ttype    : 'SET_TOOL_TAB',\n\t\tpayload : { toolTab }\n\t});","const key = {\n\tfullscreenEnabled : 0,\n\tfullscreenElement : 1,\n\trequestFullscreen : 2,\n\texitFullscreen    : 3,\n\tfullscreenchange  : 4,\n\tfullscreenerror   : 5\n};\n\nconst webkit = [\n\t'webkitFullscreenEnabled',\n\t'webkitFullscreenElement',\n\t'webkitRequestFullscreen',\n\t'webkitExitFullscreen',\n\t'webkitfullscreenchange',\n\t'webkitfullscreenerror'\n];\n\nconst moz = [\n\t'mozFullScreenEnabled',\n\t'mozFullScreenElement',\n\t'mozRequestFullScreen',\n\t'mozCancelFullScreen',\n\t'mozfullscreenchange',\n\t'mozfullscreenerror'\n];\n\nconst ms = [\n\t'msFullscreenEnabled',\n\t'msFullscreenElement',\n\t'msRequestFullscreen',\n\t'msExitFullscreen',\n\t'MSFullscreenChange',\n\t'MSFullscreenError'\n];\n\nexport default class FullScreen\n{\n\tconstructor(document)\n\t{\n\t\tthis.document = document;\n\t\tthis.vendor = (\n\t\t\t('fullscreenEnabled' in this.document && Object.keys(key)) ||\n\t\t\t(webkit[0] in this.document && webkit) ||\n\t\t\t(moz[0] in this.document && moz) ||\n\t\t\t(ms[0] in this.document && ms) ||\n\t\t\t[]\n\t\t);\n\t}\n\n\trequestFullscreen(element)\n\t{\n\t\telement[this.vendor[key.requestFullscreen]]();\n\t}\n\n\trequestFullscreenFunction(element)\n\t{\n\t\t// eslint-disable-next-line\n\t\telement[this.vendor[key.requestFullscreen]];\n\t}\n\n\taddEventListener(type, handler)\n\t{\n\t\tthis.document.addEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tremoveEventListener(type, handler)\n\t{\n\t\tthis.document.removeEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tget exitFullscreen()\n\t{\n\t\treturn this.document[this.vendor[key.exitFullscreen]].bind(this.document);\n\t}\n\n\tget fullscreenEnabled()\n\t{\n\t\treturn Boolean(this.document[this.vendor[key.fullscreenEnabled]]);\n\t}\n\tset fullscreenEnabled(val) {}\n\n\tget fullscreenElement()\n\t{\n\t\treturn this.document[this.vendor[key.fullscreenElement]];\n\t}\n\tset fullscreenElement(val) {}\n\n\tget onfullscreenchange()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenchange(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()] = handler;\n\t}\n\n\tget onfullscreenerror()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenerror(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()] = handler;\n\t}\n}\n","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSnackbar } from 'notistack';\nimport * as notificationActions from '../../actions/notificationActions';\n\nconst notificationPosition = window.config.notificationPosition || 'right';\n\nclass Notifications extends Component\n{\n\tdisplayed = [];\n\n\tstoreDisplayed = (id) =>\n\t{\n\t\tthis.displayed = [ ...this.displayed, id ];\n\t};\n\n\tshouldComponentUpdate({ notifications: newNotifications = [] })\n\t{\n\t\tconst { notifications: currentNotifications } = this.props;\n\n\t\tlet notExists = false;\n\n\t\tfor (let i = 0; i < newNotifications.length; i += 1)\n\t\t{\n\t\t\tif (notExists) continue;\n\n\t\t\tnotExists = notExists ||\n\t\t\t\t!currentNotifications.filter(({ id }) => newNotifications[i].id === id).length;\n\t\t}\n\n\t\treturn notExists;\n\t}\n\n\tcomponentDidUpdate()\n\t{\n\t\tconst { notifications = [] } = this.props;\n\n\t\tnotifications.forEach((notification) =>\n\t\t{\n\t\t\t// Do nothing if snackbar is already displayed\n\t\t\tif (this.displayed.includes(notification.id)) return;\n\t\t\t// Display snackbar using notistack\n\t\t\tthis.props.enqueueSnackbar(notification.text,\n\t\t\t\t{\n\t\t\t\t\tvariant          : notification.type,\n\t\t\t\t\tautoHideDuration : notification.timeout,\n\t\t\t\t\tanchorOrigin     : {\n\t\t\t\t\t\tvertical   : 'bottom',\n\t\t\t\t\t\thorizontal : notificationPosition\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\t// Keep track of snackbars that we've displayed\n\t\t\tthis.storeDisplayed(notification.id);\n\t\t\t// Dispatch action to remove snackbar from redux store\n\t\t\tthis.props.removeNotification(notification.id);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\treturn null;\n\t}\n}\n\nNotifications.propTypes =\n{\n\tnotifications      : PropTypes.array.isRequired,\n\tenqueueSnackbar    : PropTypes.func.isRequired,\n\tremoveNotification : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tnotifications : state.notifications\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tremoveNotification : (notificationId) =>\n\t\t\tdispatch(notificationActions.removeNotification({ notificationId }))\n\t});\n\nexport default withSnackbar(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.notifications === next.notifications\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(Notifications)\n);\n","import { createSelector } from 'reselect';\n\nconst meRolesSelect = (state) => state.me.roles;\nconst roomPermissionsSelect = (state) => state.room.roomPermissions;\nconst roomAllowWhenRoleMissing = (state) => state.room.allowWhenRoleMissing;\nconst producersSelect = (state) => state.producers;\nconst consumersSelect = (state) => state.consumers;\nconst spotlightsSelector = (state) => state.room.spotlights;\nconst peersSelector = (state) => state.peers;\nconst lobbyPeersSelector = (state) => state.lobbyPeers;\nconst getPeerConsumers = (state, id) =>\n\t(state.peers[id] ? state.peers[id].consumers : null);\nconst getAllConsumers = (state) => state.consumers;\nconst peersKeySelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.keys(peers)\n);\n\nexport const peersValueSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers)\n);\n\nexport const lobbyPeersKeySelector = createSelector(\n\tlobbyPeersSelector,\n\t(lobbyPeers) => Object.keys(lobbyPeers)\n);\n\nexport const micProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'screen')\n);\n\nexport const extraVideoProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'extravideo')\n);\n\nexport const micProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'screen')\n);\n\nexport const micConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'mic')\n);\n\nexport const webcamConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'webcam')\n);\n\nexport const screenConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'screen')\n);\n\nexport const spotlightScreenConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'screen' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const spotlightExtraVideoConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'extravideo' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const passiveMicConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'mic' && !spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const spotlightsLengthSelector = createSelector(\n\tspotlightsSelector,\n\t(spotlights) => spotlights.length\n);\n\nexport const spotlightPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersKeySelector,\n\t(spotlights, peers) => peers.filter((peerId) => spotlights.includes(peerId))\n);\n\nexport const spotlightSortedPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nconst raisedHandSortedPeers = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.filter((peer) => peer.raisedHand)\n\t\t.sort((a, b) => a.raisedHandTimestamp - b.raisedHandTimestamp)\n);\n\nconst peersSortedSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => !spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const participantListSelector = createSelector(\n\traisedHandSortedPeers,\n\tspotlightSortedPeersSelector,\n\tpeersSortedSelector,\n\t(raisedHands, spotlights, peers) =>\n\t\t[ ...raisedHands, ...spotlights, ...peers ]\n);\n\nexport const peersLengthSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers).length\n);\n\nexport const passivePeersSelector = createSelector(\n\tpeersValueSelector,\n\tspotlightsSelector,\n\t(peers, spotlights) => peers.filter((peer) => !spotlights.includes(peer.id))\n\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const raisedHandsSelector = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.reduce((a, b) => (a + (b.raisedHand ? 1 : 0)), 0)\n);\n\nexport const videoBoxesSelector = createSelector(\n\tspotlightsLengthSelector,\n\tscreenProducersSelector,\n\tspotlightScreenConsumerSelector,\n\textraVideoProducersSelector,\n\tspotlightExtraVideoConsumerSelector,\n\t(\n\t\tspotlightsLength,\n\t\tscreenProducers,\n\t\tscreenConsumers,\n\t\textraVideoProducers,\n\t\textraVideoConsumers\n\t) =>\n\t\tspotlightsLength + 1 + screenProducers.length +\n\t\tscreenConsumers.length + extraVideoProducers.length +\n\t\textraVideoConsumers.length\n);\n\nexport const meProducersSelector = createSelector(\n\tmicProducerSelector,\n\twebcamProducerSelector,\n\tscreenProducerSelector,\n\textraVideoProducersSelector,\n\t(micProducer, webcamProducer, screenProducer, extraVideoProducers) =>\n\t{\n\t\treturn {\n\t\t\tmicProducer,\n\t\t\twebcamProducer,\n\t\t\tscreenProducer,\n\t\t\textraVideoProducers\n\t\t};\n\t}\n);\n\nexport const makePeerConsumerSelector = () =>\n{\n\treturn createSelector(\n\t\tgetPeerConsumers,\n\t\tgetAllConsumers,\n\t\t(consumers, allConsumers) =>\n\t\t{\n\t\t\tif (!consumers)\n\t\t\t\treturn null;\n\n\t\t\tconst consumersArray = consumers\n\t\t\t\t.map((consumerId) => allConsumers[consumerId]);\n\t\t\tconst micConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'mic');\n\t\t\tconst webcamConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'webcam');\n\t\t\tconst screenConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'screen');\n\t\t\tconst extraVideoConsumers =\n\t\t\t\tconsumersArray.filter((consumer) => consumer.source === 'extravideo');\n\n\t\t\treturn { micConsumer, webcamConsumer, screenConsumer, extraVideoConsumers };\n\t\t}\n\t);\n};\n\n// Very important that the Components that use this\n// selector need to check at least these state changes:\n//\n// areStatesEqual : (next, prev) =>\n// {\n// \t\treturn (\n// \t\t\tprev.room.roomPermissions === next.room.roomPermissions &&\n// \t\t\tprev.room.allowWhenRoleMissing === next.room.allowWhenRoleMissing &&\n// \t\t\tprev.peers === next.peers &&\n// \t\t\tprev.me.roles === next.me.roles\n// \t\t);\n// }\nexport const makePermissionSelector = (permission) =>\n{\n\treturn createSelector(\n\t\tmeRolesSelect,\n\t\troomPermissionsSelect,\n\t\troomAllowWhenRoleMissing,\n\t\tpeersValueSelector,\n\t\t(roles, roomPermissions, allowWhenRoleMissing, peers) =>\n\t\t{\n\t\t\tif (!roomPermissions)\n\t\t\t\treturn false;\n\n\t\t\tconst permitted = roles.some((role) =>\n\t\t\t\troomPermissions[permission].includes(role)\n\t\t\t);\n\n\t\t\tif (permitted)\n\t\t\t\treturn true;\n\n\t\t\tif (!allowWhenRoleMissing)\n\t\t\t\treturn false;\n\n\t\t\t// Allow if config is set, and no one is present\n\t\t\tif (allowWhenRoleMissing.includes(permission) &&\n\t\t\t\tpeers.filter(\n\t\t\t\t\t(peer) =>\n\t\t\t\t\t\tpeer.roles.some(\n\t\t\t\t\t\t\t(role) => roomPermissions[permission].includes(role)\n\t\t\t\t\t\t)\n\t\t\t\t).length === 0\n\t\t\t)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t}\n\t);\n};","export const permissions = {\n\t// The role(s) have permission to lock/unlock a room\n\tCHANGE_ROOM_LOCK : 'CHANGE_ROOM_LOCK',\n\t// The role(s) have permission to promote a peer from the lobby\n\tPROMOTE_PEER     : 'PROMOTE_PEER',\n\t// The role(s) have permission to send chat messages\n\tSEND_CHAT        : 'SEND_CHAT',\n\t// The role(s) have permission to moderate chat\n\tMODERATE_CHAT    : 'MODERATE_CHAT',\n\t// The role(s) have permission to share screen\n\tSHARE_SCREEN     : 'SHARE_SCREEN',\n\t// The role(s) have permission to produce extra video\n\tEXTRA_VIDEO      : 'EXTRA_VIDEO',\n\t// The role(s) have permission to share files\n\tSHARE_FILE       : 'SHARE_FILE',\n\t// The role(s) have permission to moderate files\n\tMODERATE_FILES   : 'MODERATE_FILES',\n\t// The role(s) have permission to moderate room (e.g. kick user)\n\tMODERATE_ROOM    : 'MODERATE_ROOM'\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst ChatModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisChatModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isChatModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearChat',\n\t\t\t\t\tdefaultMessage : 'Clear chat'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearChatInProgress}\n\t\t\t\tonClick={() => roomClient.clearChat()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearChat'\n\t\t\t\t\tdefaultMessage='Clear chat'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nChatModerator.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\tisChatModerator : PropTypes.bool,\n\troom            : PropTypes.object,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisChatModerator : hasPermission(state),\n\t\t\troom            : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ChatModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport DOMPurify from 'dompurify';\nimport marked from 'marked';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useIntl } from 'react-intl';\n\nconst linkRenderer = new marked.Renderer();\n\nlinkRenderer.link = (href, title, text) =>\n{\n\ttitle = title ? title : href;\n\ttext = text ? text : href;\n\n\treturn `<a target='_blank' href='${ href }' title='${ title }'>${ text }</a>`;\n};\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tflexShrink   : 0\n\t\t},\n\t\tselfMessage :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t},\n\t\tremoteMessage :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\t'& p' :\n\t\t\t{\n\t\t\t\tmargin : 0\n\t\t\t}\n\t\t},\n\t\tcontent :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(1)\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\talignSelf    : 'center'\n\t\t}\n\t});\n\nconst Message = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tself,\n\t\tpicture,\n\t\ttext,\n\t\ttime,\n\t\tname,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper\n\t\t\tclassName={classnames(\n\t\t\t\tclasses.root,\n\t\t\t\tself ? classes.selfMessage : classes.remoteMessage\n\t\t\t)}\n\t\t>\n\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName={classes.text}\n\t\t\t\t\tvariant='subtitle1'\n\t\t\t\t\t// eslint-disable-next-line react/no-danger\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html : DOMPurify.sanitize(\n\t\t\t\t\t\tmarked.parse(\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\t{ renderer: linkRenderer }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tALLOWED_TAGS : [ 'a' ],\n\t\t\t\t\t\t\tALLOWED_ATTR : [ 'href', 'target', 'title' ]\n\t\t\t\t\t\t}\n\t\t\t\t\t) }}\n\t\t\t\t/>\n\t\t\t\t<Typography variant='caption'>\n\t\t\t\t\t{ self ?\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t:\n\t\t\t\t\t\tname\n\t\t\t\t\t} - {time}\n\t\t\t\t</Typography>\n\t\t\t</div>\n\t\t</Paper>\n\t);\n};\n\nMessage.propTypes =\n{\n\tself    : PropTypes.bool,\n\tpicture : PropTypes.string,\n\ttext    : PropTypes.string,\n\ttime    : PropTypes.object,\n\tname    : PropTypes.string,\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Message);","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedTime } from 'react-intl';\nimport Message from './Message';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass MessageList extends React.Component\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.chat.length !== this.props.chat.length)\n\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\tgetTimeString(time)\n\t{\n\t\treturn (<FormattedTime value={new Date(time)} />);\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tchat,\n\t\t\tmyPicture,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{\n\t\t\t\t\tchat.map((message, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconst picture = (message.sender === 'response' ?\n\t\t\t\t\t\t\tmessage.picture : myPicture) || EmptyAvatar;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tself={message.sender === 'client'}\n\t\t\t\t\t\t\t\tpicture={picture}\n\t\t\t\t\t\t\t\ttext={message.text}\n\t\t\t\t\t\t\t\ttime={this.getTimeString(message.time)}\n\t\t\t\t\t\t\t\tname={message.name}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nMessageList.propTypes =\n{\n\tchat      : PropTypes.array,\n\tmyPicture : PropTypes.string,\n\tclasses   : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tchat      : state.chat,\n\t\tmyPicture : state.me.picture\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.chat === next.chat &&\n\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MessageList));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tdisplay      : 'flex',\n\t\t\talignItems   : 'center',\n\t\t\tborderRadius : 0\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tmarginLeft : 8,\n\t\t\tflex       : 1\n\t\t},\n\t\ticonButton :\n\t\t{\n\t\t\tpadding : 10\n\t\t}\n\t});\n\nconst ChatInput = (props) =>\n{\n\tconst [ message, setMessage ] = useState('');\n\n\tconst intl = useIntl();\n\n\tconst createNewMessage = (text, sender, name, picture) =>\n\t\t({\n\t\t\ttype : 'message',\n\t\t\ttext,\n\t\t\ttime : Date.now(),\n\t\t\tname,\n\t\t\tsender,\n\t\t\tpicture\n\t\t});\n\n\tconst handleChange = (e) =>\n\t{\n\t\tsetMessage(e.target.value);\n\t};\n\n\tconst {\n\t\troomClient,\n\t\tdisplayName,\n\t\tpicture,\n\t\tcanChat,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<InputBase\n\t\t\t\tclassName={classes.input}\n\t\t\t\tplaceholder={intl.formatMessage({\n\t\t\t\t\tid             : 'label.chatInput',\n\t\t\t\t\tdefaultMessage : 'Enter chat message...'\n\t\t\t\t})}\n\t\t\t\tvalue={message || ''}\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonKeyPress={(ev) =>\n\t\t\t\t{\n\t\t\t\t\tif (ev.key === 'Enter')\n\t\t\t\t\t{\n\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tautoFocus\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tcolor='primary'\n\t\t\t\tclassName={classes.iconButton}\n\t\t\t\taria-label='Send'\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<SendIcon />\n\t\t\t</IconButton>\n\t\t</Paper>\n\t);\n};\n\nChatInput.propTypes =\n{\n\troomClient  : PropTypes.object.isRequired,\n\tdisplayName : PropTypes.string,\n\tpicture     : PropTypes.string,\n\tcanChat     : PropTypes.bool.isRequired,\n\tclasses     : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SEND_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tdisplayName : state.settings.displayName,\n\t\t\tpicture     : state.me.picture,\n\t\t\tcanChat     : hasPermission(state)\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(\n\tconnect(\n\t\tmakeMapStateToProps,\n\t\tnull,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.room === next.room &&\n\t\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\t\tprev.peers === next.peers &&\n\t\t\t\t\tprev.settings.displayName === next.settings.displayName &&\n\t\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(withStyles(styles)(ChatInput))\n);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport ChatModerator from './ChatModerator';\nimport MessageList from './MessageList';\nimport ChatInput from './ChatInput';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%',\n\t\t\toverflowY     : 'auto'\n\t\t}\n\t});\n\nconst Chat = (props) =>\n{\n\tconst {\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<ChatModerator />\n\t\t\t<MessageList />\n\t\t\t<ChatInput />\n\t\t</Paper>\n\t);\n};\n\nChat.propTypes =\n{\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Chat);","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport magnet from 'magnet-uri';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\talignItems           : 'center',\n\t\t\twidth                : '100%',\n\t\t\tpadding              : theme.spacing(1),\n\t\t\tboxShadow            : '0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)',\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tmarginBottom : theme.spacing(1)\n\t\t\t}\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tfileContent :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center'\n\t\t},\n\t\tfileInfo :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center',\n\t\t\tpadding    : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t}\n\t});\n\nclass File extends React.PureComponent\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tdisplayName,\n\t\t\tpicture,\n\t\t\tcanShareFiles,\n\t\t\tmagnetUri,\n\t\t\tfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\n\t\t\t\t<div className={classes.fileContent}>\n\t\t\t\t\t{ file.files &&\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='filesharing.finished'\n\t\t\t\t\t\t\t\t\tdefaultMessage='File finished downloading'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t{ file.files.map((sharedFile, i) => (\n\t\t\t\t\t\t\t\t<div className={classes.fileInfo} key={i}>\n\t\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t\t{sharedFile.name}\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.saveFile(sharedFile);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='filesharing.save'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Save'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t}\n\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='filesharing.sharedFile'\n\t\t\t\t\t\t\tdefaultMessage='{displayName} shared a file'\n\t\t\t\t\t\t\tvalues={{\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t{ (!file.active && !file.files) &&\n\t\t\t\t\t\t<div className={classes.fileInfo}>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t{ magnet.decode(magnetUri).dn }\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{ canShareFiles ?\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\troomClient.handleDownload(magnetUri);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='filesharing.download'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Download'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='label.fileSharingUnsupported'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='File sharing not supported'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.timeout &&\n\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='filesharing.missingSeeds'\n\t\t\t\t\t\t\t\tdefaultMessage={\n\t\t\t\t\t\t\t\t\t`If this process takes a long time, there might not \n\t\t\t\t\t\t\t\t\tbe anyone seeding this torrent. Try asking someone to \n\t\t\t\t\t\t\t\t\treupload the file that you want.`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.active &&\n\t\t\t\t\t\t<progress value={file.progress} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFile.propTypes = {\n\troomClient    : PropTypes.object.isRequired,\n\tmagnetUri     : PropTypes.string.isRequired,\n\tdisplayName   : PropTypes.string.isRequired,\n\tpicture       : PropTypes.string,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\tfile          : PropTypes.object.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { magnetUri }) =>\n{\n\treturn {\n\t\tfile          : state.files[magnetUri],\n\t\tcanShareFiles : state.me.canShareFiles\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(File)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { injectIntl } from 'react-intl';\nimport File from './File';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass FileList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tfiles,\n\t\t\tme,\n\t\t\tpeers,\n\t\t\tintl,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ Object.entries(files).map(([ magnetUri, file ]) =>\n\t\t\t\t{\n\t\t\t\t\tlet displayName;\n\n\t\t\t\t\tlet filePicture;\n\n\t\t\t\t\tif (me.id === file.peerId)\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilePicture = me.picture;\n\t\t\t\t\t}\n\t\t\t\t\telse if (peers[file.peerId])\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = peers[file.peerId].displayName;\n\t\t\t\t\t\tfilePicture = peers[file.peerId].picture;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.unknown',\n\t\t\t\t\t\t\tdefaultMessage : 'Unknown'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<File\n\t\t\t\t\t\t\tkey={magnetUri}\n\t\t\t\t\t\t\tmagnetUri={magnetUri}\n\t\t\t\t\t\t\tdisplayName={displayName}\n\t\t\t\t\t\t\tpicture={filePicture || EmptyAvatar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFileList.propTypes =\n{\n\tfiles   : PropTypes.object.isRequired,\n\tme      : appPropTypes.Me.isRequired,\n\tpeers   : PropTypes.object.isRequired,\n\tintl    : PropTypes.object.isRequired,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tfiles : state.files,\n\t\tme    : state.me,\n\t\tpeers : state.peers\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(injectIntl(FileList)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst FileSharingModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisFileSharingModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isFileSharingModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearFileSharing',\n\t\t\t\t\tdefaultMessage : 'Clear files'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearFileSharingInProgress}\n\t\t\t\tonClick={() => roomClient.clearFileSharing()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearFileSharing'\n\t\t\t\t\tdefaultMessage='Clear files'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nFileSharingModerator.propTypes =\n{\n\troomClient             : PropTypes.any.isRequired,\n\tisFileSharingModerator : PropTypes.bool,\n\troom                   : PropTypes.object,\n\tclasses                : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_FILES);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisFileSharingModerator : hasPermission(state),\n\t\t\troom                   : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharingModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport FileList from './FileList';\nimport FileSharingModerator from './FileSharingModerator';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%'\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tdisplay : 'none'\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshareButtonsWrapper :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst FileSharing = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst handleFileChange = async (event) =>\n\t{\n\t\tif (event.target.files.length > 0)\n\t\t{\n\t\t\tawait props.roomClient.shareFiles(event.target.files);\n\t\t}\n\t};\n\n\tconst {\n\t\tcanShareFiles,\n\t\tbrowser,\n\t\tcanShare,\n\t\tclasses\n\t} = props;\n\n\tconst buttonDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareFile',\n\t\t\tdefaultMessage : 'Share file'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\tconst buttonGalleryDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareGalleryFile',\n\t\t\tdefaultMessage : 'Share image'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<FileSharingModerator />\n\t\t\t<div className={classes.shareButtonsWrapper} >\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\t// Need to reset to be able to share same file twice\n\t\t\t\t\tonClick={(e) => (e.target.value = null)}\n\t\t\t\t\tid='share-files-button'\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\taccept='image/*'\n\t\t\t\t\tid='share-files-gallery-button'\n\t\t\t\t/>\n\t\t\t\t<label htmlFor='share-files-button'>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t>\n\t\t\t\t\t\t{buttonDescription}\n\t\t\t\t\t</Button>\n\t\t\t\t</label>\n\t\t\t\t{\n\t\t\t\t\t(browser.platform === 'mobile') && canShareFiles && canShare && <label htmlFor='share-files-gallery-button'>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{buttonGalleryDescription}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</label>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<FileList />\n\t\t</Paper>\n\t);\n};\n\nFileSharing.propTypes = {\n\troomClient    : PropTypes.any.isRequired,\n\tbrowser       : PropTypes.object.isRequired,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\ttabOpen       : PropTypes.bool.isRequired,\n\tcanShare      : PropTypes.bool.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SHARE_FILE);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tcanShareFiles : state.me.canShareFiles,\n\t\t\tbrowser       : state.me.browser,\n\t\t\ttabOpen       : state.toolarea.currentToolTab === 'files',\n\t\t\tcanShare      : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharing)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { green } from '@material-ui/core/colors';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport FixedSpotLightIcon from '@material-ui/icons/AspectRatio';\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\nimport ExitIcon from '@material-ui/icons/ExitToApp';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '.7rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(.7),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tindicators :\n\t\t{\n\t\t\tdisplay : 'flex',\n\t\t\tpadding : theme.spacing(.7)\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(.7)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor      : 'rgba(0, 153, 0, 1)',\n\t\t\tmarginLeft : theme.spacing(2)\n\t\t}\n\t});\n\nconst ListPeer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisModerator,\n\t\tspotlight,\n\t\tpeer,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tchildren,\n\t\tclasses\n\t} = props;\n\n\tconst webcamEnabled = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='Peer avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{peer.displayName}\n\t\t\t</div>\n\t\t\t{ peer.raisedHand &&\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\tdisabled={!isModerator || peer.raisedHandInProgress}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.lowerPeerHand(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t}\n\t\t\t{ spotlight &&\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\tdisabled\n\t\t\t\t>\n\t\t\t\t\t<RecordVoiceOverIcon />\n\t\t\t\t</IconButton>\n\t\t\t}\n\t\t\t{ screenConsumer && spotlight &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteScreenSharing',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant share'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.muteScreenSharing',\n\t\t\t\t\t\t\tdefaultMessage : 'Mute participant share'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tcolor={screenVisible ? 'primary' : 'secondary'}\n\t\t\t\t\t\tdisabled={peer.peerScreenInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\tscreenVisible ?\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', true) :\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ screenVisible ?\n\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ spotlight &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideo',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant video'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Mute participant video'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tcolor={webcamEnabled ? 'primary' : 'secondary'}\n\t\t\t\t\t\tdisabled={peer.peerVideoInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\twebcamEnabled ?\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', true) :\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ webcamEnabled ?\n\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\tdefaultMessage : 'Mute participant'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant'\n\t\t\t\t\t})}\n\t\t\t\t\tcolor={micEnabled ? 'primary' : 'secondary'}\n\t\t\t\t\tdisabled={peer.peerAudioInProgress}\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t\t{ isModerator &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.kickParticipant',\n\t\t\t\t\t\tdefaultMessage : 'Kick out participant'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.kickParticipant',\n\t\t\t\t\t\t\tdefaultMessage : 'Kick out participant'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tdisabled={peer.peerKickInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.kickPeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ExitIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && micConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantAudioModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant audio globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerAudioInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.mutePeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !micConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && webcamConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideoModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant video globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerVideoInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.stopPeerVideo(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !webcamConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && webcamConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideoModerator',\n\t\t\t\t\t\tdefaultMessage : 'Fixed Spotlight'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerVideoInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.setFixedPeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !webcamConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<FixedSpotLightIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<FixedSpotLightIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.makeModerator',\n\t\t\t\t\t\tdefaultMessage : 'Make Moderator'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerVideoInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.makeModerator(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ true ?\n\t\t\t\t\t\t\t<AssignmentIndIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<AssignmentIndIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && screenConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteScreenSharingModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant screen share globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerScreenSharingInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.stopPeerScreenSharing(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !screenConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nListPeer.propTypes =\n{\n\troomClient     : PropTypes.any.isRequired,\n\tadvancedMode   : PropTypes.bool,\n\tisModerator    : PropTypes.bool,\n\tspotlight      : PropTypes.bool,\n\tpeer           : appPropTypes.Peer.isRequired,\n\tmicConsumer    : appPropTypes.Consumer,\n\twebcamConsumer : appPropTypes.Consumer,\n\tscreenConsumer : appPropTypes.Consumer,\n\tchildren       : PropTypes.object,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer : state.peers[id],\n\t\t\t...getPeerConsumers(state, id)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { useIntl } from 'react-intl';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport FixedSpotLightIcon from '@material-ui/icons/AspectRatio';\nimport { green } from '@material-ui/core/colors';\n\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '.7rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(.7),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(.7)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst ListMe = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\troles,\n\t\tme,\n\t\tmyId,\n\t\tsettings,\n\t\tclasses\n\t} = props;\n\n\tconst picture = me.picture || EmptyAvatar;\n\tconsole.log(\"roles: \"+ roles)\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='My avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{settings.displayName}\n\t\t\t</div>\n\t\t\t{ roles.indexOf('moderator')>-1 &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideoModerator',\n\t\t\t\t\t\tdefaultMessage : 'Fixed Spotlight'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\t\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.setFixedPeer(myId);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t\t<FixedSpotLightIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tclassnames(me.raisedHand ? classes.green : null, classes.buttons)\n\t\t\t\t\t}\n\t\t\t\t\tdisabled={me.raisedHandInProgress}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.setRaisedHand(!me.raisedHand);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\n\t\t\n\t\t</div>\n\t\t\n\t);\n};\n\nListMe.propTypes =\n{\n\troomClient : PropTypes.object.isRequired,\n\tme         : appPropTypes.Me.isRequired,\n\tmyId       : PropTypes.string.isRequired,\n\troles \t   : PropTypes.object.isRequired,\n\tsettings   : PropTypes.object.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\tme       : state.me,\n\tmyId     : state.me.id,\n\troles\t : state.me.roles,\n\tsettings : state.settings\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListMe)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Button from '@material-ui/core/Button';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\nimport CancelPresentationIcon from '@material-ui/icons/CancelPresentation';\nimport StopScreenShareIcon from '@material-ui/icons/StopScreenShare';\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { spacing } from '@material-ui/system';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding : theme.spacing(.5),\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(1)\n\t\t}\n\t});\n\nconst ListModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tme,\n\t\tpeer,\n\t\tclasses\n\t} = props;\n\nconst lockTooltip = !room.silenced ?\n\tintl.formatMessage({\n\t\tid             : 'tooltip.unLockRoom',\n\t\tdefaultMessage : 'Silence lock room'\n\t})\n\t:\n\tintl.formatMessage({\n\t\tid             : 'tooltip.lockRoom',\n\t\tdefaultMessage : 'Remove silence lock'\n\t});\t\n\t\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'room.muteAll',\n\t\t\t\t\tdefaultMessage : 'Mute All'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.muteAll',\n\t\t\t\t\tdefaultMessage : 'Mute all'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='default'\n\t\t\t\tsize=\"small\"\n\t\t\t\tdisabled={room.muteAllInProgress}\n\t\t\t\tonClick={() => roomClient.muteAllPeers()}\n\t\t\t>\n\t\t\t\t<VolumeOffIcon fontSize=\"small\"></VolumeOffIcon>\n\n\t\t\t\t<div className={classes.divider} />\n\t\t\t\t\n\t\t\t<Tooltip title={lockTooltip}>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={lockTooltip}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();  \n\t\t\t\t\t\t\t\t\t\tif (room.silenced)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.unsilenceRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.silenceRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ room.silenced ?\n\t\t\t\t\t\t\t\t\t\t<LockIcon fontSize=\"small\" />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\n\t\t\t</Button>\n\t\t\n\t\t\t</Tooltip>\n\t\t\n\t\t\t\t\t<div className={classes.divider} />\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllVideo',\n\t\t\t\t\tdefaultMessage : 'Stop all video'\n\t\t\t\t})}\n\t\t\t>\n\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllVideo',\n\t\t\t\t\tdefaultMessage : 'Stop all video'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='default'\n\t\t\t\tsize=\"small\"\n\t\t\t\tdisabled={room.stopAllVideoInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerVideo()}\n\t\t\t>\n\t\t\t\t<VideocamOffIcon fontSize=\"small\"></VideocamOffIcon>\n\t\t\t</Button>\n\t\t\t</Tooltip>\n\t\t\t\t<div className={classes.divider} />\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'room.removeSpotLight',\n\t\t\t\t\tdefaultMessage : 'Remove Spotlight'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.removeSpotLight',\n\t\t\t\t\tdefaultMessage : 'Remove Spotlight'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='default'\n\t\t\t\tsize=\"small\"\n\t\t\t\tdisabled={room.stopAllVideoInProgress}\n\t\t\t\tonClick={() => roomClient.setFixedPeer(\"none\")}\n\t\t\t>\n\t\t\t\t<CancelPresentationIcon fontSize=\"small\"></CancelPresentationIcon>\n\t\t\t</Button>\n\t\t\t</Tooltip>\n\t\t\t\t<div className={classes.divider} />\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllScreenSharing',\n\t\t\t\t\tdefaultMessage : 'Stop all screen sharing'\n\t\t\t\t})}\n\t\t\t>\t\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllScreenSharing',\n\t\t\t\t\tdefaultMessage : 'Stop all screen sharing'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='default'\n\t\t\t\tsize=\"small\"\n\t\t\t\tdisabled={room.stopAllScreenSharingInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerScreenSharing()}\n\t\t\t>\n\t\t\t\t<StopScreenShareIcon fontSize=\"small\"></StopScreenShareIcon>\n\t\t\t</Button>\n\t\t\t</Tooltip>\n\t\t\t<div className={classes.divider} />\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'room.closeMeeting',\n\t\t\t\t\tdefaultMessage : 'Close meeting'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.closeMeeting',\n\t\t\t\t\tdefaultMessage : 'Close meeting'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='default'\n\t\t\t\tsize=\"small\"\n\t\t\t\tdisabled={room.closeMeetingInProgress}\n\t\t\t\tonClick={() => roomClient.closeMeeting()}\n\t\t\t>\n\t\t\t\t<PowerSettingsNewIcon fontSize=\"small\"></PowerSettingsNewIcon>\n\t\t\t</Button>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n};\n\nListModerator.propTypes =\n{\n\troomClient : PropTypes.any.isRequired,\n\troom       : PropTypes.object.isRequired,\n\tme         : appPropTypes.Me.isRequired,\n\tpeer       : appPropTypes.Peer.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\troom : state.room,\n\tme       : state.me,\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListModerator)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\tvolumeLarge :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tright          : 2,\n\t\t\twidth          : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tlargeBar :\n\t\t{\n\t\t\twidth              : 6,\n\t\t\tborderRadius       : 6,\n\t\t\tbackground         : 'rgba(yellow, 0.65)',\n\t\t\ttransitionProperty : 'height background-color',\n\t\t\ttransitionDuration : '0.25s',\n\t\t\t'&.level0'         :\n\t\t\t{\n\t\t\t\theight          : 0,\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level1' :\n\t\t\t{\n\t\t\t\theight          : '10%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level2' :\n\t\t\t{\n\t\t\t\theight          : '20%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level3' :\n\t\t\t{\n\t\t\t\theight          : '30%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level4' :\n\t\t\t{\n\t\t\t\theight          : '40%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level5' :\n\t\t\t{\n\t\t\t\theight          : '50%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level6' :\n\t\t\t{\n\t\t\t\theight          : '60%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level7' :\n\t\t\t{\n\t\t\t\theight          : '70%',\n\t\t\t\tbackgroundColor : 'rgba(255, 100, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level8' :\n\t\t\t{\n\t\t\t\theight          : '80%',\n\t\t\t\tbackgroundColor : 'rgba(255, 60, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level9' :\n\t\t\t{\n\t\t\t\theight          : '90%',\n\t\t\t\tbackgroundColor : 'rgba(255, 30, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level10' :\n\t\t\t{\n\t\t\t\theight          : '100%',\n\t\t\t\tbackgroundColor : 'rgba(255, 0, 0, 0.65)'\n\t\t\t}\n\t\t},\n\t\tvolumeSmall :\n\t\t{\n\t\t\tfloat          : 'right',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\twidth          : '1vmin',\n\t\t\tposition       : 'relative',\n\t\t\tbackgroundSize : '75%'\n\t\t},\n\t\tsmallBar :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tbackgroundSize     : '75%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\twidth              : 3,\n\t\t\tborderRadius       : 2,\n\t\t\ttransitionDuration : '0.25s',\n\t\t\tposition           : 'absolute',\n\t\t\ttop                : '50%',\n\t\t\ttransform          : 'translateY(-50%)',\n\t\t\t'&.level0'         : { height: 0 },\n\t\t\t'&.level1'         : { height: '0.2vh' },\n\t\t\t'&.level2'         : { height: '0.4vh' },\n\t\t\t'&.level3'         : { height: '0.6vh' },\n\t\t\t'&.level4'         : { height: '0.8vh' },\n\t\t\t'&.level5'         : { height: '1.0vh' },\n\t\t\t'&.level6'         : { height: '1.2vh' },\n\t\t\t'&.level7'         : { height: '1.4vh' },\n\t\t\t'&.level8'         : { height: '1.6vh' },\n\t\t\t'&.level9'         : { height: '1.8vh' },\n\t\t\t'&.level10'        : { height: '2.0vh' }\n\t\t}\n\t});\n\nconst Volume = (props) =>\n{\n\tconst {\n\t\tsmall,\n\t\tvolume,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={small ? classes.volumeSmall : classes.volumeLarge}>\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tsmall ? classes.smallBar : classes.largeBar, `level${volume}`\n\t\t\t\t)}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nVolume.propTypes =\n{\n\tsmall   : PropTypes.bool,\n\tvolume  : PropTypes.number,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, props) =>\n{\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tif (state.peerVolumes[props.id]>state.settings.noiseThreshold)\n\t\t{\n\t\t\treturn {\n\t\t\t\tvolume : Math.round((state.peerVolumes[props.id]+100) / 10)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn { volume: 0 };\n\t\t}\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default connect(\n\tmakeMapStateToProps\n)(withStyles(styles)(Volume));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tparticipantListSelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport PropTypes from 'prop-types';\nimport { Flipper, Flipped } from 'react-flip-toolkit';\nimport { FormattedMessage } from 'react-intl';\nimport ListPeer from './ListPeer';\nimport ListMe from './ListMe';\nimport ListModerator from './ListModerator';\nimport Volume from '../../Containers/Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth     : '100%',\n\t\t\toverflowY : 'auto',\n\t\t\tpadding   : theme.spacing(1)\n\t\t},\n\t\tlist :\n\t\t{\n\t\t\tlistStyleType   : 'none',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tlistItem :\n\t\t{\n\t\t\twidth        : '100%',\n\t\t\toverflow     : 'hidden',\n\t\t\tcursor       : 'pointer',\n\t\t\t'&.selected' :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(55, 126, 255, 1)'\n\t\t\t},\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tborderBottom : '1px solid #CBCBCB'\n\t\t\t}\n\t\t}\n\t});\n\nclass ParticipantList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tadvancedMode,\n\t\t\tisModerator,\n\t\t\tparticipants,\n\t\t\tspotlights,\n\t\t\tselectedPeerId,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ isModerator &&\n\t\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<ListModerator />\n\t\t\t\t\t</ul>\n\t\t\t\t}\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='Me'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<ListMe />\n\t\t\t\t</ul>\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.participants'\n\t\t\t\t\t\t\tdefaultMessage='Participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<Flipper\n\t\t\t\t\t\tflipKey={participants}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ participants.map((peer) => (\n\t\t\t\t\t\t\t<Flipped key={peer.id} flipId={peer.id}>\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={peer.id}\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.listItem, {\n\t\t\t\t\t\t\t\t\t\tselected : peer.id === selectedPeerId\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={() => roomClient.setSelectedPeer(peer.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ spotlights.includes(peer.id) ?\n\t\t\t\t\t\t\t\t\t\t<ListPeer\n\t\t\t\t\t\t\t\t\t\t\tid={peer.id}\n\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\tisModerator={isModerator}\n\t\t\t\t\t\t\t\t\t\t\tspotlight\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Volume small id={peer.id} />\n\t\t\t\t\t\t\t\t\t\t</ListPeer>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<ListPeer\n\t\t\t\t\t\t\t\t\t\t\tid={peer.id}\n\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\tisModerator={isModerator}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</Flipped>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Flipper>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nParticipantList.propTypes =\n{\n\troomClient     : PropTypes.any.isRequired,\n\tadvancedMode   : PropTypes.bool,\n\tisModerator    : PropTypes.bool,\n\tparticipants   : PropTypes.array,\n\tspotlights     : PropTypes.array,\n\tselectedPeerId : PropTypes.string,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_ROOM);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tisModerator    : hasPermission(state),\n\t\t\tparticipants   : participantListSelector(state),\n\t\t\tspotlights     : state.room.spotlights,\n\t\t\tselectedPeerId : state.room.selectedPeerId\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst ParticipantListContainer = withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ParticipantList)));\n\nexport default ParticipantListContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { raisedHandsSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl } from 'react-intl';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Badge from '@material-ui/core/Badge';\nimport Chat from './Chat/Chat';\nimport FileSharing from './FileSharing/FileSharing';\nimport ParticipantList from './ParticipantList/ParticipantList';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst tabs =\n[\n\t'chat',\n\t'files',\n\t'users'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : '#ffffff96'\n\t\t},\n\t\tappBar :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row'\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\t//flexGrow : 1,\n\t\t\twidth\t : '100%'\n\t\t},\n\t\tsmallerFont:\n\t\t{\n\t\t\tfontSize    : '.7rem',\n\t\t\twidth:\t'25px',\t\t\n\t\t\tmaxWidth: '100px',\n\t\t\tminWidth: '85px'\n\n\t\t},\n\n\t\tsmallerBadge:\n\t\t{\n\t\t\tfontSize    : '.7rem',\n\t\t\tmaxWidth: '75px',\n\t\t\tminWidth: '55px'\n\n\t\t}\n\n\t});\n\nconst MeetingDrawer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tcurrentToolTab,\n\t\tunreadMessages,\n\t\tunreadFiles,\n\t\traisedHands,\n\t\tcloseDrawer,\n\t\tsetToolTab,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<AppBar\n\t\t\t\tposition='static'\n\t\t\t\tcolor='default'\n\t\t\t\tclassName={classes.appBar}\n\t\t\t>\n\t\t\t\t<Tabs\n\t\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\t\tvalue={tabs.indexOf(currentToolTab)}\n\t\t\t\t\tonChange={(event, value) => setToolTab(tabs[value])}\n\t\t\t\t\tindicatorColor='primary'\n\t\t\t\t\ttextColor='primary'\n\t\t\t\t\tvariant='fullWidth'\n\t\t\t\t>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tclassName={classes.smallerFont}\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge className={classes.smallerBadge} color='secondary' badgeContent={unreadMessages}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.chat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Chat'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tclassName={classes.smallerFont}\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge className={classes.smallerBadge} color='secondary' badgeContent={unreadFiles}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.filesharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'File sharing'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tclassName={classes.smallerFont}\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge className={classes.smallerBadge} color='secondary' badgeContent={raisedHands}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Tabs>\n\t\t\t\t<IconButton onClick={closeDrawer}>\n\t\t\t\t\t{theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n\t\t\t\t</IconButton>\n\t\t\t</AppBar>\n\t\t\t{currentToolTab === 'chat' && <Chat />}\n\t\t\t{currentToolTab === 'files' && <FileSharing />}\n\t\t\t{currentToolTab === 'users' && <ParticipantList />}\n\t\t</div>\n\t);\n};\n\nMeetingDrawer.propTypes =\n{\n\tcurrentToolTab : PropTypes.string.isRequired,\n\tsetToolTab     : PropTypes.func.isRequired,\n\tunreadMessages : PropTypes.number.isRequired,\n\tunreadFiles    : PropTypes.number.isRequired,\n\traisedHands    : PropTypes.number.isRequired,\n\tcloseDrawer    : PropTypes.func.isRequired,\n\tclasses        : PropTypes.object.isRequired,\n\ttheme          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tcurrentToolTab : state.toolarea.currentToolTab,\n\t\tunreadMessages : state.toolarea.unreadMessages,\n\t\tunreadFiles    : state.toolarea.unreadFiles,\n\t\traisedHands    : raisedHandsSelector(state)\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetToolTab : toolareaActions.setToolTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(MeetingDrawer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { RIEInput } from 'riek';\n\nexport default class EditableInput extends React.Component\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\tvalue,\n\t\t\tpropName,\n\t\t\tclassName,\n\t\t\tclassLoading,\n\t\t\tclassInvalid,\n\t\t\teditProps,\n\t\t\tonChange\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<RIEInput\n\t\t\t\tvalue={value}\n\t\t\t\tpropName={propName}\n\t\t\t\tclassName={className}\n\t\t\t\tclassLoading={classLoading}\n\t\t\t\tclassInvalid={classInvalid}\n\t\t\t\tshouldBlockWhileLoading\n\t\t\t\teditProps={editProps}\n\t\t\t\tchange={(data) => onChange(data)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.value === this.props.value)\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n}\n\nEditableInput.propTypes =\n{\n\tvalue        : PropTypes.string,\n\tpropName     : PropTypes.string.isRequired,\n\tclassName    : PropTypes.string,\n\tclassLoading : PropTypes.string,\n\tclassInvalid : PropTypes.string,\n\teditProps    : PropTypes.any,\n\tonChange     : PropTypes.func.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport EditableInput from '../Controls/EditableInput';\nimport Logger from '../../Logger';\nimport { yellow, orange, red } from '@material-ui/core/colors';\nimport SignalCellularOffIcon from '@material-ui/icons/SignalCellularOff';\nimport SignalCellular0BarIcon from '@material-ui/icons/SignalCellular0Bar';\nimport SignalCellular1BarIcon from '@material-ui/icons/SignalCellular1Bar';\nimport SignalCellular2BarIcon from '@material-ui/icons/SignalCellular2Bar';\nimport SignalCellular3BarIcon from '@material-ui/icons/SignalCellular3Bar';\n\nconst logger = new Logger('VideoView');\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'cover',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'var(--peer-video-bg-color)',\n\t\t\t'&.isMe'           :\n\t\t\t{\n\t\t\t\ttransform : 'scaleX(-1)'\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t},\n\t\t\t'&.contain' :\n\t\t\t{\n\t\t\t\tobjectFit       : 'contain',\n\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 1)'\n\t\t\t}\n\t\t},\n\t\tinfo :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'space-between'\n\t\t},\n\t\tmedia :\n\t\t{\n\t\t\tdisplay            : 'flex',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s'\n\t\t},\n\t\tbox :\n\t\t{\n\t\t\tpadding      : theme.spacing(0.5),\n\t\t\tborderRadius : 2,\n\t\t\tuserSelect   : 'none',\n\t\t\tmargin       : 0,\n\t\t\tcolor        : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize     : '0.8em',\n\n\t\t\t'&.left' :\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.25)',\n\t\t\t\t\tdisplay         : 'grid',\n\t\t\t\t\tgap             : '1px 5px',\n\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tgridTemplateAreas : '\\\n\t\t\t\t\"AcodL\t\tAcod\tAcod\tAcod\tAcod\" \\\n\t\t\t\t\t\"VcodL\t\tVcod\tVcod\tVcod\tVcod\" \\\n\t\t\t\t\t\"ResL\t\tRes\t\tRes\t\tRes\t\tRes\" \\\n\t\t\t\t\t\"RecvL\t\tRecvBps RecvBps RecvSum RecvSum\" \\\n\t\t\t\t\t\"SendL\t\tSendBps SendBps SendSum SendSum\" \\\n\t\t\t\t\t\"IPlocL\t\tIPloc\tIPloc\tIPloc\tIPloc\" \\\n\t\t\t\t\t\"IPsrvL\t\tIPsrv\tIPsrv\tIPsrv\tIPsrv\" \\\n\t\t\t\t\t\"STLcurrL\tSTLcurr\tSTLcurr STLcurr STLcurr\" \\\n\t\t\t\t\t\"STLprefL\tSTLpref STLpref STLpref STLpref\"',\n\n\t\t\t\t\t'& .AcodL'    : { gridArea: 'AcodL' },\n\t\t\t\t\t'& .Acod'     : { gridArea: 'Acod' },\n\t\t\t\t\t'& .VcodL'    : { gridArea: 'VcodL' },\n\t\t\t\t\t'& .Vcod'     : { gridArea: 'Vcod' },\n\t\t\t\t\t'& .ResL'     : { gridArea: 'ResL' },\n\t\t\t\t\t'& .Res'      : { gridArea: 'Res' },\n\t\t\t\t\t'& .RecvL'    : { gridArea: 'RecvL' },\n\t\t\t\t\t'& .RecvBps'  : { gridArea: 'RecvBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .RecvSum'  : { gridArea: 'RecvSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendL'    : { gridArea: 'SendL' },\n\t\t\t\t\t'& .SendBps'  : { gridArea: 'SendBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendSum'  : { gridArea: 'SendSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .IPlocL'   : { gridArea: 'IPlocL' },\n\t\t\t\t\t'& .IPloc'    : { gridArea: 'IPloc' },\n\t\t\t\t\t'& .IPsrvL'   : { gridArea: 'IPsrvL' },\n\t\t\t\t\t'& .IPsrv'    : { gridArea: 'IPsrv' },\n\t\t\t\t\t'& .STLcurrL' : { gridArea: 'STLcurrL' },\n\t\t\t\t\t'& .STLcurr'  : { gridArea: 'STLcurr' },\n\t\t\t\t\t'& .STLprefL' : { gridArea: 'STLprefL' },\n\t\t\t\t\t'& .STLpref'  : { gridArea: 'STLpref' }\n\n\t\t\t\t},\n\t\t\t'&.right' :\n\t\t\t{\n\t\t\t\tmarginLeft : 'auto',\n\t\t\t\twidth      : 30\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t}\n\t\t},\n\t\tpeer :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdisplayNameEdit :\n\t\t{\n\t\t\tfontSize        : 14,\n\t\t\tfontWeight      : 400,\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.85)',\n\t\t\tborder          : 'none',\n\t\t\tborderBottom    : '1px solid #aeff00',\n\t\t\tbackgroundColor : 'transparent'\n\t\t},\n\t\tdisplayNameStatic :\n\t\t{\n\t\t\tuserSelect : 'none',\n\t\t\tcursor     : 'text',\n\t\t\tfontSize   : 14,\n\t\t\tfontWeight : 400,\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.85)',\n\t\t\t'&:hover'  :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgb(174, 255, 0, 0.25)'\n\t\t\t}\n\t\t}\n\t});\n\nclass VideoView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state =\n\t\t{\n\t\t\tvideoWidth  : null,\n\t\t\tvideoHeight : null\n\t\t};\n\n\t\t// Latest received audio track\n\t\t// @type {MediaStreamTrack}\n\t\tthis._audioTrack = null;\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\t// Periodic timer for showing video resolution.\n\t\tthis._videoResolutionTimer = null;\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tisMe,\n\t\t\tisScreen,\n\t\t\tisExtraVideo,\n\t\t\tshowQuality,\n\t\t\tdisplayName,\n\t\t\tshowPeerInfo,\n\t\t\tvideoContain,\n\t\t\tadvancedMode,\n\t\t\tvideoVisible,\n\t\t\tvideoMultiLayer,\n\t\t\taudioScore,\n\t\t\tvideoScore,\n\t\t\tconsumerCurrentSpatialLayer,\n\t\t\tconsumerCurrentTemporalLayer,\n\t\t\tconsumerPreferredSpatialLayer,\n\t\t\tconsumerPreferredTemporalLayer,\n\t\t\taudioCodec,\n\t\t\tvideoCodec,\n\t\t\tonChangeDisplayName,\n\t\t\tchildren,\n\t\t\tclasses,\n\t\t\tnetInfo\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tvideoWidth,\n\t\t\tvideoHeight\n\t\t} = this.state;\n\n\t\tlet quality = null;\n\n\t\tif (showQuality)\n\t\t{\n\t\t\tquality = <SignalCellularOffIcon style={{ color: red[500] }}/>;\n\n\t\t\tif (videoScore || audioScore)\n\t\t\t{\n\t\t\t\tconst score = videoScore ? videoScore : audioScore;\n\n\t\t\t\tswitch (isMe ? score.score : score.producerScore)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 1:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular0BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular1BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 5:\n\t\t\t\t\tcase 6:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular2BarIcon style={{ color: orange[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 9:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular3BarIcon style={{ color: yellow[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = null;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.info}>\n\t\t\t\t\t<div className={classes.media}>\n\t\t\t\t\t\t<div className={classnames(classes.box, 'left', { hidden: !advancedMode })}>\n\t\t\t\t\t\t\t{ audioCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'AcodL'}>Acod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Acod'}>\n\t\t\t\t\t\t\t\t\t\t{audioCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'VcodL'}>Vcod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Vcod'}>\n\t\t\t\t\t\t\t\t\t\t{videoCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ (videoVisible && videoWidth !== null) &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'ResL'}>Res: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Res'}>\n\t\t\t\t\t\t\t\t\t\t{videoWidth}x{videoHeight}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ isMe && !isScreen && !isExtraVideo &&\n\t\t\t\t\t\t\t\t\t(netInfo.recv && netInfo.send && netInfo.send.iceSelectedTuple) &&\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvL'}>Recv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.sendBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.bytesSent/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'SendL'}>Send: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.recvBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.bytesReceived/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPlocL'}>IPloc: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPloc'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.remoteIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrvL'}>IPsrv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrv'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.localIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoMultiLayer &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurrL'}>STLcurr: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurr'}>{consumerCurrentSpatialLayer} {consumerCurrentTemporalLayer}</span>\n\n\t\t\t\t\t\t\t\t\t<span className={'STLprefL'}>STLpref: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLpref'}>{consumerPreferredSpatialLayer} {consumerPreferredTemporalLayer}</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ showQuality &&\n\t\t\t\t\t\t\t<div className={classnames(classes.box, 'right')}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tquality\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{ showPeerInfo &&\n\t\t\t\t\t\t<div className={classes.peer}>\n\t\t\t\t\t\t\t<div className={classes.box}>\n\t\t\t\t\t\t\t\t{ isMe ?\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<EditableInput\n\t\t\t\t\t\t\t\t\t\t\tvalue={displayName}\n\t\t\t\t\t\t\t\t\t\t\tpropName='newDisplayName'\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.displayNameEdit}\n\t\t\t\t\t\t\t\t\t\t\tclassLoading='loading'\n\t\t\t\t\t\t\t\t\t\t\tclassInvalid='invalid'\n\t\t\t\t\t\t\t\t\t\t\tshouldBlockWhileLoading\n\t\t\t\t\t\t\t\t\t\t\teditProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tmaxLength   : 30,\n\t\t\t\t\t\t\t\t\t\t\t\tautoCorrect : 'off',\n\t\t\t\t\t\t\t\t\t\t\t\tspellCheck  : false\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t({ newDisplayName }) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeDisplayName(newDisplayName)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<span className={classes.displayNameStatic}>\n\t\t\t\t\t\t\t\t\t\t{displayName}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<video\n\t\t\t\t\tref='videoElement'\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden  : !videoVisible,\n\t\t\t\t\t\t'isMe'  : isMe && !isScreen,\n\t\t\t\t\t\tcontain : videoContain\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted\n\t\t\t\t\tcontrols={false}\n\t\t\t\t/>\n\n\t\t\t\t<audio\n\t\t\t\t\tref='audioElement'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted={isMe}\n\t\t\t\t\tcontrols={false}\n\t\t\t\t/>\n\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack, audioTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack, audioTrack);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tclearInterval(this._videoResolutionTimer);\n\n\t\tconst { videoElement } = this.refs;\n\n\t\tif (videoElement)\n\t\t{\n\t\t\tvideoElement.oncanplay = null;\n\t\t\tvideoElement.onplay = null;\n\t\t\tvideoElement.onpause = null;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack, audioTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack, audioTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack, audioTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack && this._audioTrack === audioTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\t\tthis._audioTrack = audioTrack;\n\n\t\tclearInterval(this._videoResolutionTimer);\n\t\tthis._hideVideoResolution();\n\n\t\tconst { videoElement, audioElement } = this.refs;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\n\t\t\tvideoElement.srcObject = stream;\n\n\t\t\tvideoElement.oncanplay = () => this.setState({ videoCanPlay: true });\n\n\t\t\tvideoElement.onplay = () =>\n\t\t\t{\n\t\t\t\taudioElement.play()\n\t\t\t\t\t.catch((error) => logger.warn('audioElement.play() [error:\"%o]', error));\n\t\t\t};\n\n\t\t\tvideoElement.play()\n\t\t\t\t.catch((error) => logger.warn('videoElement.play() [error:\"%o]', error));\n\n\t\t\tthis._showVideoResolution();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideoElement.srcObject = null;\n\t\t}\n\n\t\tif (audioTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(audioTrack);\n\t\t\taudioElement.srcObject = stream;\n\n\t\t\taudioElement.play()\n\t\t\t\t.catch((error) => logger.warn('audioElement.play() [error:\"%o]', error));\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudioElement.srcObject = null;\n\t\t}\n\t}\n\n\t_showVideoResolution()\n\t{\n\t\tthis._videoResolutionTimer = setInterval(() =>\n\t\t{\n\t\t\tconst { videoWidth, videoHeight } = this.state;\n\t\t\tconst { videoElement } = this.refs;\n\n\t\t\t// Don't re-render if nothing changed.\n\t\t\tif (\n\t\t\t\tvideoElement.videoWidth === videoWidth &&\n\t\t\t\tvideoElement.videoHeight === videoHeight\n\t\t\t)\n\t\t\t\treturn;\n\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tvideoWidth  : videoElement.videoWidth,\n\t\t\t\t\tvideoHeight : videoElement.videoHeight\n\t\t\t\t});\n\t\t}, 1000);\n\t}\n\n\t_hideVideoResolution()\n\t{\n\t\tthis.setState({ videoWidth: null, videoHeight: null });\n\t}\n}\n\nVideoView.propTypes =\n{\n\tisMe                           : PropTypes.bool,\n\tisScreen                       : PropTypes.bool,\n\tisExtraVideo   \t               : PropTypes.bool,\n\tshowQuality                    : PropTypes.bool,\n\tdisplayName                    : PropTypes.string,\n\tshowPeerInfo                   : PropTypes.bool,\n\tvideoContain                   : PropTypes.bool,\n\tadvancedMode                   : PropTypes.bool,\n\tvideoTrack                     : PropTypes.any,\n\taudioTrack                     : PropTypes.any,\n\tvideoVisible                   : PropTypes.bool.isRequired,\n\tconsumerSpatialLayers          : PropTypes.number,\n\tconsumerTemporalLayers         : PropTypes.number,\n\tconsumerCurrentSpatialLayer    : PropTypes.number,\n\tconsumerCurrentTemporalLayer   : PropTypes.number,\n\tconsumerPreferredSpatialLayer  : PropTypes.number,\n\tconsumerPreferredTemporalLayer : PropTypes.number,\n\tvideoMultiLayer                : PropTypes.bool,\n\taudioScore                     : PropTypes.any,\n\tvideoScore                     : PropTypes.any,\n\taudioCodec                     : PropTypes.string,\n\tvideoCodec                     : PropTypes.string,\n\tonChangeDisplayName            : PropTypes.func,\n\tchildren                       : PropTypes.object,\n\tclasses                        : PropTypes.object.isRequired,\n\tnetInfo               \t\t\t\t\t\t   : PropTypes.object\n};\n\nexport default withStyles(styles)(VideoView);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport * as roomActions from '../../actions/roomActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport NewWindowIcon from '@material-ui/icons/OpenInNew';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 4\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 3\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'flex-end',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 0.3s',\n\t\t\ttouchAction     : 'none',\n\t\t\t'&.hover'       :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 20,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst Peer = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tadvancedMode,\n\t\tpeer,\n\t\tactiveSpeaker,\n\t\tbrowser,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\textraVideoConsumers,\n\t\ttoggleConsumerFullscreen,\n\t\ttoggleConsumerWindow,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\twindowConsumer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused &&\n\t\t!micConsumer.remotelyLocked\n\t);\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n\tconst rootStyle =\n\t{\n\t\t'margin' : spacing,\n\t\t...style\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={rootStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor={micEnabled ? 'default' : 'secondary'}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioTrack={micConsumer && micConsumer.track}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ extraVideoConsumers.map((consumer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={consumer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!screenVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === screenConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(screenConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!screenVisible}\n\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(screenConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nPeer.propTypes =\n{\n\troomClient               : PropTypes.any.isRequired,\n\tadvancedMode             : PropTypes.bool,\n\tpeer                     : appPropTypes.Peer,\n\tmicConsumer              : appPropTypes.Consumer,\n\twebcamConsumer           : appPropTypes.Consumer,\n\tscreenConsumer           : appPropTypes.Consumer,\n\textraVideoConsumers      : PropTypes.arrayOf(appPropTypes.Consumer),\n\twindowConsumer           : PropTypes.string,\n\tactiveSpeaker            : PropTypes.bool,\n\tbrowser                  : PropTypes.object.isRequired,\n\tspacing                  : PropTypes.number,\n\tstyle                    : PropTypes.object,\n\tsmallContainer           : PropTypes.bool,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoggleConsumerWindow     : PropTypes.func.isRequired,\n\tclasses                  : PropTypes.object.isRequired,\n\ttheme                    : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer           : state.peers[id],\n\t\t\t...getPeerConsumers(state, id),\n\t\t\twindowConsumer : state.room.windowConsumer,\n\t\t\tactiveSpeaker  : id === state.room.activeSpeakerId,\n\t\t\tbrowser        : state.me.browser\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t},\n\t\ttoggleConsumerWindow : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerWindow(consumer.id));\n\t\t}\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.windowConsumer === next.room.windowConsumer &&\n\t\t\t\tprev.me.browser === next.me.browser\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Peer)));\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tmeProducersSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin        : theme.spacing(1),\n\t\t\tpointerEvents : 'auto'\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tmeTag :\n\t\t{\n\t\t\tposition   : 'absolute',\n\t\t\tfloat      : 'left',\n\t\t\ttop        : '50%',\n\t\t\tleft       : '50%',\n\t\t\ttransform  : 'translate(-50%, -50%)',\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.5)',\n\t\t\tfontSize   : '7em',\n\t\t\tzIndex     : 30,\n\t\t\tmargin     : 0,\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t'&.hover'  :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t},\n\t\t\t'&.smallContainer' :\n\t\t\t{\n\t\t\t\tfontSize : '3em'\n\t\t\t}\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'flex-end',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tzIndex         : 21,\n\t\t\ttouchAction    : 'none',\n\t\t\tpointerEvents  : 'none',\n\t\t\t'&.hide'       :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t\topacity    : 0\n\t\t\t},\n\t\t\t'&.hover' :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tptt :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\tfloat           : 'left',\n\t\t\ttop             : '25%',\n\t\t\tleft            : '50%',\n\t\t\ttransform       : 'translate(-50%, 0%)',\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize        : '1.3em',\n\t\t\tbackgroundColor : 'rgba(245, 0, 87, 0.70)',\n\t\t\tmargin          : '4px',\n\t\t\tpadding         : theme.spacing(2),\n\t\t\tzIndex          : 1200,\n\t\t\tborderRadius    : '20px',\n\t\t\ttextAlign       : 'center',\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 1s ease',\n\t\t\tpointerEvents   : 'none',\n\t\t\t'&.enabled'     :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s',\n\t\t\t\topacity    : 1\n\t\t\t}\n\t\t}\n\t});\n\nconst Me = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tme,\n\t\tsettings,\n\t\tactiveSpeaker,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\tadvancedMode,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\textraVideoProducers,\n\t\tcanShareScreen,\n\t\ttransports,\n\t\tnoiseVolume,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamProducer) &&\n\t\t!webcamProducer.locallyPaused &&\n\t\t!webcamProducer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenProducer) &&\n\t\t!screenProducer.locallyPaused &&\n\t\t!screenProducer.remotelyPaused\n\t);\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused && !micProducer.remotelyPaused)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\tconst [\n\t\tscreenShareTooltipOpen,\n\t\tscreenShareTooltipSetOpen\n\t] = React.useState(false);\n\n\tconst screenShareTooltipHandleClose = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(false);\n\t};\n\n\tconst screenShareTooltipHandleOpen = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(true);\n\t};\n\n\tif (screenState === 'off' && me.screenShareInProgress && screenShareTooltipOpen)\n\t{\n\t\tscreenShareTooltipHandleClose();\n\t}\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\tlet audioScore = null;\n\n\tif (micProducer && micProducer.score)\n\t{\n\t\taudioScore =\n\t\t\tmicProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tlet videoScore = null;\n\n\tif (webcamProducer && webcamProducer.score)\n\t{\n\t\tvideoScore =\n\t\t\twebcamProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tuseEffect(() =>\n\t{\n\t\tlet poll;\n\n\t\tconst interval = 1000;\n\n\t\tif (advancedMode)\n\t\t{\n\t\t\tpoll = setInterval(() => roomClient.getTransportStats(), interval);\n\t\t}\n\n\t\treturn () => clearInterval(poll);\n\t}, [ roomClient, advancedMode ]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\n\t\t\t\t{ me.browser.platform !== 'mobile' && smallContainer &&\n\t\t\t\t<div className={classnames(\n\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t{ me.browser.platform !== 'mobile' && !smallContainer &&\n\t\t\t\t\t\t<div className={classnames(\n\t\t\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<p className={\n\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t\t{ !settings.buttonControlBar &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<Tooltip title={micTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tmicState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute && !me.isAutoMuted ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted ? 'secondary' : 'primary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ opacity: noiseVolume }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute && !me.isAutoMuted? 'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted && settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'secondary' : 'primary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={me.isAutoMuted && settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ opacity: noiseVolume }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: { opacity: 1 }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip open={screenShareTooltipOpen}\n\t\t\t\t\t\t\t\t\t\tonClose={screenShareTooltipHandleClose}\n\t\t\t\t\t\t\t\t\t\tonOpen={screenShareTooltipHandleOpen}\n\t\t\t\t\t\t\t\t\t\ttitle={screenTip} placement='left'\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ (screenState === 'on' || screenState === 'unsupported') &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ screenState === 'off' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'default'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ (screenState === 'on' || screenState === 'unsupported') &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ screenState === 'off' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tisMe\n\t\t\t\t\t\tVideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tvideoTrack={webcamProducer && webcamProducer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micProducer && micProducer.codec}\n\t\t\t\t\t\tvideoCodec={webcamProducer && webcamProducer.codec}\n\t\t\t\t\t\tnetInfo={transports && transports}\n\t\t\t\t\t\taudioScore={audioScore}\n\t\t\t\t\t\tvideoScore={videoScore}\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ micState === 'muted' ? null : <Volume id={me.id} /> }\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ extraVideoProducers.map((producer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={producer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\t\tisExtraVideo\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tvideoTrack={producer && producer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={producer && producer.codec}\n\t\t\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t{ screenProducer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\tisScreen\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tvideoTrack={screenProducer && screenProducer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenProducer && screenProducer.codec}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nMe.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tme                  : appPropTypes.Me.isRequired,\n\tsettings            : PropTypes.object,\n\tactiveSpeaker       : PropTypes.bool,\n\tmicProducer         : appPropTypes.Producer,\n\twebcamProducer      : appPropTypes.Producer,\n\tscreenProducer      : appPropTypes.Producer,\n\textraVideoProducers : PropTypes.arrayOf(appPropTypes.Producer),\n\tspacing             : PropTypes.number,\n\tstyle               : PropTypes.object,\n\tsmallContainer      : PropTypes.bool,\n\tcanShareScreen      : PropTypes.bool.isRequired,\n\tnoiseVolume         : PropTypes.number,\n\tclasses             : PropTypes.object.isRequired,\n\ttheme               : PropTypes.object.isRequired,\n\ttransports          : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SHARE_SCREEN);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tlet volume;\n\n\t\t// noiseVolume under threshold\n\t\tif (state.peerVolumes[state.me.id] < state.settings.noiseThreshold)\n\t\t{\n\t\t\t// noiseVolume mapped to range 0.5 ... 1 (threshold switch)\n\t\t\tvolume = 1 + ((Math.abs(state.peerVolumes[state.me.id] -\n\t\t\t\tstate.settings.noiseThreshold) / (-120 -\n\t\t\t\tstate.settings.noiseThreshold)));\n\t\t}\n\t\t// noiseVolume over threshold: no noise but voice\n\t\telse { volume = 0; }\n\n\t\treturn {\n\t\t\tme             : state.me,\n\t\t\t...meProducersSelector(state),\n\t\t\tsettings       : state.settings,\n\t\t\tactiveSpeaker  : state.me.id === state.room.activeSpeakerId,\n\t\t\tcanShareScreen : hasPermission(state),\n\t\t\ttransports     : state.transports,\n\t\t\tnoiseVolume    : volume\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tMath.round(prev.peerVolumes[prev.me.id]) ===\n\t\t\t\t\tMath.round(next.peerVolumes[next.me.id]) &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.transports === next.transports\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Me)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tspotlightPeersSelector,\n\tvideoBoxesSelector\n} from '../Selectors';\nimport classnames from 'classnames';\nimport { withRoomContext } from '../../RoomContext';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Peer from '../Containers/Peer';\nimport Me from '../Containers/Me';\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\n\n\nconst RATIO = 1.334;\nconst PADDING = 60;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tflexWrap       : 'wrap',\n\t\t\toverflow       : 'hidden',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\talignContent   : 'center'\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : 60,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tbuttonControlBar :\n\t\t{\n\t\t\tpaddingLeft                    : 60,\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tpaddingLeft : 0\n\t\t\t}\n\t\t}\n\t});\n\nclass Democratic extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.peersRef = React.createRef();\n\t}\n\n\tupdateDimensions = () =>\n\t{\n\t\tif (!this.peersRef.current)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst n = this.props.boxes;\n\n\t\tif (n === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst width =\n\t\t\tthis.peersRef.current.clientWidth - (this.props.buttonControlBar ? PADDING : 0);\n\t\tconst height =\n\t\t\tthis.peersRef.current.clientHeight -\n\t\t\t(this.props.toolbarsVisible || this.props.permanentTopBar ? PADDING : 0);\n\n\t\tlet x, y, space;\n\n\t\tfor (let rows = 1; rows < 100; rows = rows + 1)\n\t\t{\n\t\t\tx = width / Math.ceil(n / rows);\n\t\t\ty = x / RATIO;\n\t\t\tif (height < (y * rows))\n\t\t\t{\n\t\t\t\ty = height / rows;\n\t\t\t\tx = RATIO * y;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tspace = height - (y * (rows));\n\t\t\tif (space < y)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (Math.ceil(this.state.peerWidth) !== Math.ceil(0.94 * x))\n\t\t{\n\t\t\tthis.setState({\n\t\t\t\tpeerWidth  : 0.94 * x,\n\t\t\t\tpeerHeight : 0.94 * y\n\t\t\t});\n\t\t}\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t\tthis.updateDimensions();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tadvancedMode,\n\t\t\tspotlightsPeers,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tbuttonControlBar,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst style =\n\t\t{\n\t\t\t'width'  : this.state.peerWidth ? this.state.peerWidth : 0,\n\t\t\t'height' : this.state.peerHeight ? this.state.peerHeight : 0\n\t\t};\n\t\tconst fullW = \n\t\t{\n\t\t\t'width'\t: '100%',\n\t\t\t'display' : 'flex', \n\t\t\t'justifyContent': 'center',\n\t\t\t'align-self': 'flex-end'\n\n\t\t}\n\t\tconst flexPage = \n\t\t{\n\t\t\t'color' : 'white',\n\t\t\t'display' : 'inline-flex',\n\t\t\t\n\t\t}\n\n\t\tconst svgSize =\n\t\t{\n\t\t\t'font-size' : '1rem !important'\n\t\t}\n\t\treturn (\n\t\t\t\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar,\n\t\t\t\t\tbuttonControlBar ? classes.buttonControlBar : null\n\t\t\t\t)}\n\t\t\t\tref={this.peersRef}\n\t\t\t>\n\t\t\t\t<Me\n\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\tspacing={6}\n\t\t\t\t\tstyle={style}\n\t\t\t\t/>\n\t\t\t\t{ spotlightsPeers.map((peer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\tkey={peer}\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={peer}\n\t\t\t\t\t\t\tspacing={6}\n\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDemocratic.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\tadvancedMode     : PropTypes.bool,\n\tboxes            : PropTypes.number,\n\tspotlightsPeers  : PropTypes.array.isRequired,\n\ttoolbarsVisible  : PropTypes.bool.isRequired,\n\tpermanentTopBar  : PropTypes.bool.isRequired,\n\tbuttonControlBar : PropTypes.bool.isRequired,\n\ttoolAreaOpen     : PropTypes.bool.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tboxes            : videoBoxesSelector(state),\n\t\tspotlightsPeers  : spotlightPeersSelector(state),\n\t\ttoolbarsVisible  : state.room.toolbarsVisible,\n\t\tpermanentTopBar  : state.settings.permanentTopBar,\n\t\tbuttonControlBar : state.settings.buttonControlBar,\n\t\ttoolAreaOpen     : state.toolarea.toolAreaOpen\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Democratic)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.webcam'         :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition   : 'relative',\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst SpeakerPeer = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tpeer,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tspacing,\n\t\tstyle,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam'\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen')}\n\t\t\t\t>\n\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo} style={style}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ screenVisible &&\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nSpeakerPeer.propTypes =\n{\n\tadvancedMode   : PropTypes.bool,\n\tpeer           : appPropTypes.Peer,\n\tmicConsumer    : appPropTypes.Consumer,\n\twebcamConsumer : appPropTypes.Consumer,\n\tscreenConsumer : appPropTypes.Consumer,\n\tspacing        : PropTypes.number,\n\tstyle          : PropTypes.object,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\treturn {\n\t\tpeer : state.peers[id],\n\t\t...getPeerConsumers(state, id)\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(SpeakerPeer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {\n\tvideoBoxesSelector\n} from '../Selectors';\nimport { withRoomContext } from '../../RoomContext';\nimport Me from '../Containers/Me';\nimport Peer from '../Containers/Peer';\nimport SpeakerPeer from '../Containers/SpeakerPeer';\nimport Grid from '@material-ui/core/Grid';\nimport ArrowLeftTwoToneIcon from '@material-ui/icons/ArrowBack';\nimport ArrowRightTwoToneIcon from '@material-ui/icons/ArrowForward';\n\nconst RATIO = 1.334;\nconst PADDING_V = 40;\nconst PADDING_H = 0;\nconst FILMSTRING_PADDING_V = 10;\nconst FILMSTRING_PADDING_H = 0;\n\n\t\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight              : '100%',\n\t\t\twidth               : '100%',\n\t\t\tdisplay             : 'grid',\n\t\t\toverflow            : 'hidden',\n\t\t\tgridTemplateColumns : '1fr',\n\t\t\tgridTemplateRows    : '1fr 0.25fr'\n\t\t},\n\t\tspeaker :\n\t\t{\n\t\t\tgridArea       : '1 / 1 / 1 / 1',\n\t\t\tdisplay        : 'flex',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tfilmStrip :\n\t\t{\n\t\t\tgridArea : '2 / 1 / 2 / 1'\n\t\t},\n\t\tfilmItem :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tborder       : 'var(--peer-border)',\n\t\t\t'&.selected' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t},\n\t\t\t'&.active' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t}\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : 60,\n\t\t\ttransition : 'padding .5s'\n\t\t}\n\t});\n\nclass Filmstrip extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.rootContainer = React.createRef();\n\n\t\tthis.activePeerContainer = React.createRef();\n\n\t\tthis.filmStripContainer = React.createRef();\n\t}\n\n\tstate = {\n\t\tlastSpeaker : null\n\t};\n\t// Find the name of the peer which is currently speaking. This is either\n\t// the latest active speaker, or the manually selected peer, or, if no\n\t// person has spoken yet, the first peer in the list of peers.\n\tgetActivePeerId = () =>\n\t{\n\t\tconst {\n\t\t\tselectedPeerId,\n\t\t\tpeers\n\t\t} = this.props;\n\n\t\tconst { lastSpeaker } = this.state;\n\n\t\tif (selectedPeerId && peers[selectedPeerId])\n\t\t{\n\t\t\treturn this.props.selectedPeerId;\n\t\t}\n\t\t\n\t\t\n\t\tif (selectedPeerId == this.props.myId)\n\t\t{\n\t\t\treturn this.props.selectedPeerId;\n\t\t}\n\n\t\tif (lastSpeaker && peers[lastSpeaker])\n\t\t{\n\t\t\treturn this.state.lastSpeaker;\n\t\t}\n\n\t\tconst peerIds = Object.keys(peers);\n\n\t\tif (peerIds.length > 0)\n\t\t{\n\t\t\treturn peerIds[0];\n\t\t}\n\t};\n\n\tisSharingCamera = (peerId) => this.props.peers[peerId] &&\n\t\tthis.props.peers[peerId].consumers.some((consumer) =>\n\t\t\tthis.props.consumers[consumer].source === 'screen');\n\n\tupdateDimensions = () =>\n\t{\n\t\tconst newState = {};\n\n\t\tconst root = this.rootContainer.current;\n\n\t\tif (!root)\n\t\t\treturn;\n\n\t\tconst availableWidth = root.clientWidth;\n\t\t// Grid is:\n\t\t// 4/5 speaker\n\t\t// 1/5 filmstrip\n\t\tconst availableSpeakerHeight = (root.clientHeight * 0.8) -\n\t\t\t(this.props.toolbarsVisible || this.props.permanentTopBar ? PADDING_V : PADDING_H);\n\n\t\tconst availableFilmstripHeight = root.clientHeight * 0.2;\n\n\t\tconst speaker = this.activePeerContainer.current;\n\n\t\tif (speaker)\n\t\t{\n\t\t\tlet speakerWidth = (availableWidth - PADDING_H);\n\n\t\t\tlet speakerHeight = speakerWidth / RATIO;\n\n\t\t\tif (this.isSharingCamera(this.getActivePeerId()))\n\t\t\t{\n\t\t\t\tspeakerWidth /= 2;\n\t\t\t\tspeakerHeight = speakerWidth / RATIO;\n\t\t\t}\n\n\t\t\tif (speakerHeight > (availableSpeakerHeight - PADDING_V))\n\t\t\t{\n\t\t\t\tspeakerHeight = (availableSpeakerHeight - PADDING_V);\n\t\t\t\tspeakerWidth = speakerHeight * RATIO;\n\t\t\t}\n\n\t\t\tnewState.speakerWidth = speakerWidth;\n\t\t\tnewState.speakerHeight = speakerHeight;\n\t\t}\n\n\t\tconst filmStrip = this.filmStripContainer.current;\n\n\t\tif (filmStrip)\n\t\t{\n\t\t\tlet filmStripHeight = availableFilmstripHeight - FILMSTRING_PADDING_V;\n\n\t\t\tlet filmStripWidth = filmStripHeight * RATIO;\n\n\t\t\tif (\n\t\t\t\t(filmStripWidth * this.props.boxes) >\n\t\t\t\t(availableWidth - FILMSTRING_PADDING_H)\n\t\t\t)\n\t\t\t{\n\t\t\t\tfilmStripWidth = (availableWidth - FILMSTRING_PADDING_H) /\n\t\t\t\t\tthis.props.boxes;\n\t\t\t\tfilmStripHeight = filmStripWidth / RATIO;\n\t\t\t}\n\n\t\t\tnewState.filmStripWidth = filmStripWidth;\n\t\t\tnewState.filmStripHeight = filmStripHeight;\n\t\t}\n\n\t\tthis.setState({\n\t\t\t...newState\n\t\t});\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.props.activeSpeakerId != null &&\n\t\t\t\tthis.props.activeSpeakerId !== this.props.myId\n\t\t\t)\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\t\tthis.setState({\n\t\t\t\t\tlastSpeaker : this.props.activeSpeakerId\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.updateDimensions();\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tpeers,\n\t\t\tmyId,\n\t\t\tadvancedMode,\n\t\t\tspotlights,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst activePeerId = this.getActivePeerId();\n\n\t\tconst speakerStyle =\n\t\t{\n\t\t\twidth  : this.state.speakerWidth,\n\t\t\theight : this.state.speakerHeight\n\t\t};\n\n\t\tconst peerStyle =\n\t\t{\n\t\t\twidth  : this.state.filmStripWidth,\n\t\t\theight : this.state.filmStripHeight\n\t\t};\n\n\t\tconst fullW = \n\t\t{\n\t\t\t'align'\t: 'center',\n\t\t\t'color' : 'white',\n\t\t\t'display' : 'flex', \n\t\t\t'justifyContent': 'center'\n\t\t};\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar\n\t\t\t\t)}\n\t\t\t\tref={this.rootContainer}\n\t\t\t>\n\t\t\t\t<div className={classes.speaker} ref={this.activePeerContainer}>\n\t\t\t\t\t{ peers[activePeerId] &&\n\t\t\t\t\t\t<SpeakerPeer\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={activePeerId}\n\t\t\t\t\t\t\tstyle={speakerStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{ activePeerId === myId &&\n\t\t\t\t\t\t<Me\n\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\tstyle={speakerStyle}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\n\t\t\t\t<div className={classes.filmStrip} ref={this.filmStripContainer}>\n\t\t\t\t\t<Grid container justify='center' spacing={0}>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\tactive : myId === activePeerId\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Me\n\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t{ Object.keys(peers).map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (spotlights.find((spotlightsElement) => spotlightsElement === peerId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Grid key={peerId} item>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={peerId}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => roomClient.setSelectedPeer(peerId)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\t\t\t\tselected : this.props.selectedPeerId === peerId,\n\t\t\t\t\t\t\t\t\t\t\t\tactive   : peerId === activePeerId\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\t\tid={peerId}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn ('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFilmstrip.propTypes = {\n\troomClient      : PropTypes.any.isRequired,\n\tactiveSpeakerId : PropTypes.string,\n\tadvancedMode    : PropTypes.bool,\n\tpeers           : PropTypes.object.isRequired,\n\tconsumers       : PropTypes.object.isRequired,\n\tmyId            : PropTypes.string.isRequired,\n\tselectedPeerId  : PropTypes.string,\n\tspotlights      : PropTypes.array.isRequired,\n\tboxes           : PropTypes.number,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tpermanentTopBar : PropTypes.bool,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tactiveSpeakerId : state.room.activeSpeakerId,\n\t\tselectedPeerId  : state.room.selectedPeerId,\n\t\tpeers           : state.peers,\n\t\tconsumers       : state.consumers,\n\t\tmyId            : state.me.id,\n\t\tspotlights      : state.room.spotlights,\n\t\tboxes           : videoBoxesSelector(state),\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.selectedPeerId === next.room.selectedPeerId &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.me.id === next.me.id\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Filmstrip)));","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class PeerAudio extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received audio track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._audioTrack = null;\n\t\tthis._audioOutputDevice = null;\n\t}\n\n\trender()\n\t{\n\t\treturn (\n\t\t\t<audio\n\t\t\t\tref='audio'\n\t\t\t\tautoPlay\n\t\t\t/>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\tthis._setTrack(audioTrack);\n\t\tthis._setOutputDevice(audioOutputDevice);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\t\tthis._setTrack(audioTrack);\n\t\t\tthis._setOutputDevice(audioOutputDevice);\n\t\t}\n\t}\n\n\t_setTrack(audioTrack)\n\t{\n\t\tif (this._audioTrack === audioTrack)\n\t\t\treturn;\n\n\t\tthis._audioTrack = audioTrack;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tif (audioTrack)\n\t\t\t\tstream.addTrack(audioTrack);\n\n\t\t\taudio.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudio.srcObject = null;\n\t\t}\n\t}\n\n\t_setOutputDevice(audioOutputDevice)\n\t{\n\t\tif (this._audioOutputDevice === audioOutputDevice)\n\t\t\treturn;\n\n\t\tthis._audioOutputDevice = audioOutputDevice;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioOutputDevice && typeof audio.setSinkId === 'function')\n\t\t\taudio.setSinkId(audioOutputDevice);\n\t}\n}\n\nPeerAudio.propTypes =\n{\n\taudioTrack        : PropTypes.any,\n\taudioOutputDevice : PropTypes.string\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { passiveMicConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport PeerAudio from './PeerAudio';\n\nconst AudioPeers = (props) =>\n{\n\tconst {\n\t\tmicConsumers,\n\t\taudioOutputDevice\n\t} = props;\n\n\treturn (\n\t\t<div data-component='AudioPeers'>\n\t\t\t{\n\t\t\t\tmicConsumers.map((micConsumer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<PeerAudio\n\t\t\t\t\t\t\tkey={micConsumer.id}\n\t\t\t\t\t\t\taudioTrack={micConsumer.track}\n\t\t\t\t\t\t\taudioOutputDevice={audioOutputDevice}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nAudioPeers.propTypes =\n{\n\tmicConsumers      : PropTypes.array,\n\taudioOutputDevice : PropTypes.string\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tmicConsumers      : passiveMicConsumerSelector(state),\n\t\taudioOutputDevice : state.settings.selectedAudioOutputDevice\n\t});\n\nconst AudioPeersContainer = connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.settings.selectedAudioOutputDevice ===\n\t\t\t\tnext.settings.selectedAudioOutputDevice\n\t\t\t);\n\t\t}\n\t}\n)(AudioPeers);\n\nexport default AudioPeersContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport VideoView from './VideoView';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin',\n\t\t\topacity            : 0,\n\t\t\t'&.visible'        :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst FullScreenView = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\ttoggleConsumerFullscreen,\n\t\ttoolbarsVisible,\n\t\tpermanentTopBar,\n\t\tclasses\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.controls}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.button, {\n\t\t\t\t\t\tvisible : toolbarsVisible || permanentTopBar\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<VideoView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tvideoContain\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nFullScreenView.propTypes =\n{\n\tadvancedMode             : PropTypes.bool,\n\tconsumer                 : appPropTypes.Consumer,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoolbarsVisible          : PropTypes.bool,\n\tpermanentTopBar          : PropTypes.bool,\n\tclasses                  : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tconsumer        : state.consumers[state.room.fullScreenConsumer],\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.fullScreenConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.fullScreenConsumer] &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FullScreenView));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport FullScreen from '../FullScreen';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin'\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nclass NewWindow extends React.PureComponent\n{\n\tstatic defaultProps =\n\t{\n\t\turl        : '',\n\t\tname       : 'Multiparty Meeting',\n\t\ttitle      : 'Multiparty Meeting',\n\t\tfeatures   : { width: '800px', height: '600px' },\n\t\tonBlock    : null,\n\t\tonUnload   : null,\n\t\tcenter     : 'parent',\n\t\tcopyStyles : true\n\t};\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(this.window.document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.container = document.createElement('div');\n\t\tthis.window = null;\n\t\tthis.windowCheckerInterval = null;\n\t\tthis.released = false;\n\t\tthis.fullscreen = null;\n\n\t\tthis.state = {\n\t\t\tmounted    : false,\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tif (!this.state.mounted)\n\t\t\treturn null;\n\n\t\treturn ReactDOM.createPortal([\n\t\t\t<div key='newwindow' className={classes.root}>\n\t\t\t\t<div className={classes.controls}>\n\t\t\t\t\t{ this.fullscreen.fullscreenEnabled &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tonClick={this.handleToggleFullscreen}\n\t\t\t\t\t\t\tdata-tip='Fullscreen'\n\t\t\t\t\t\t\tdata-place='right'\n\t\t\t\t\t\t\tdata-type='dark'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ this.state.fullscreen ?\n\t\t\t\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<FullScreenIcon className={classes.icon} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{ this.props.children }\n\t\t\t</div>\n\t\t], this.container);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tthis.openChild();\n\t\t// eslint-disable-next-line react/no-did-mount-set-state\n\t\tthis.setState({ mounted: true });\n\n\t\tthis.fullscreen = new FullScreen(this.window.document);\n\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\t}\n\n\topenChild()\n\t{\n\t\tconst {\n\t\t\turl,\n\t\t\ttitle,\n\t\t\tname,\n\t\t\tfeatures,\n\t\t\tonBlock,\n\t\t\tcenter\n\t\t} = this.props;\n\n\t\tif (center === 'parent')\n\t\t{\n\t\t\tfeatures.left =\n\t\t\t\t(window.top.outerWidth / 2) + window.top.screenX - (features.width / 2);\n\t\t\tfeatures.top =\n\t\t\t\t(window.top.outerHeight / 2) + window.top.screenY - (features.height / 2);\n\t\t}\n\t\telse if (center === 'screen')\n\t\t{\n\t\t\tconst screenLeft =\n\t\t\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screen.left;\n\t\t\tconst screenTop =\n\t\t\t\twindow.screenTop !== undefined ? window.screenTop : window.screen.top;\n\n\t\t\tconst width = window.innerWidth\n\t\t\t\t? window.innerWidth\n\t\t\t\t: document.documentElement.clientWidth\n\t\t\t\t\t? document.documentElement.clientWidth\n\t\t\t\t\t: window.screen.width;\n\t\t\tconst height = window.innerHeight\n\t\t\t\t? window.innerHeight\n\t\t\t\t: document.documentElement.clientHeight\n\t\t\t\t\t? document.documentElement.clientHeight\n\t\t\t\t\t: window.screen.height;\n\n\t\t\tfeatures.left = (width / 2) - (features.width / 2) + screenLeft;\n\t\t\tfeatures.top = (height / 2) - (features.height / 2) + screenTop;\n\t\t}\n\n\t\tthis.window = window.open(url, name, toWindowFeatures(features));\n\n\t\tthis.windowCheckerInterval = setInterval(() =>\n\t\t{\n\t\t\tif (!this.window || this.window.closed)\n\t\t\t{\n\t\t\t\tthis.release();\n\t\t\t}\n\t\t}, 50);\n\n\t\tif (this.window)\n\t\t{\n\t\t\tthis.window.document.title = title;\n\t\t\tthis.window.document.body.appendChild(this.container);\n\n\t\t\tif (this.props.copyStyles)\n\t\t\t{\n\t\t\t\tsetTimeout(() => copyStyles(document, this.window.document), 0);\n\t\t\t}\n\n\t\t\tthis.window.addEventListener('beforeunload', () => this.release());\n\t\t}\n\t\telse if (typeof onBlock === 'function')\n\t\t{\n\t\t\tonBlock(null);\n\t\t}\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.window)\n\t\t{\n\t\t\tif (this.fullscreen && this.fullscreen.fullscreenEnabled)\n\t\t\t{\n\t\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t\t}\n\n\t\t\tthis.window.close();\n\t\t}\n\t}\n\n\trelease()\n\t{\n\t\tif (this.released)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.released = true;\n\n\t\tclearInterval(this.windowCheckerInterval);\n\n\t\tconst { onUnload } = this.props;\n\n\t\tif (typeof onUnload === 'function')\n\t\t{\n\t\t\tonUnload(null);\n\t\t}\n\t}\n}\n\nNewWindow.propTypes = {\n\tchildren   : PropTypes.node,\n\turl        : PropTypes.string,\n\tname       : PropTypes.string,\n\ttitle      : PropTypes.string,\n\tfeatures   : PropTypes.object,\n\tonUnload   : PropTypes.func,\n\tonBlock    : PropTypes.func,\n\tcenter     : PropTypes.oneOf([ 'parent', 'screen' ]),\n\tcopyStyles : PropTypes.bool,\n\tclasses    : PropTypes.object.isRequired\n};\n\nfunction copyStyles(source, target)\n{\n\tArray.from(source.styleSheets).forEach((styleSheet) =>\n\t{\n\t\tlet rules;\n\n\t\ttry\n\t\t{\n\t\t\trules = styleSheet.cssRules;\n\t\t}\n\t\tcatch (err) {}\n\n\t\tif (rules)\n\t\t{\n\t\t\tconst newStyleEl = source.createElement('style');\n\n\t\t\tArray.from(styleSheet.cssRules).forEach((cssRule) =>\n\t\t\t{\n\t\t\t\tconst { cssText, type } = cssRule;\n\n\t\t\t\tlet returnText = cssText;\n\n\t\t\t\tif ([ 3, 5 ].includes(type))\n\t\t\t\t{\n\t\t\t\t\treturnText = cssText\n\t\t\t\t\t\t.split('url(')\n\t\t\t\t\t\t.map((line) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (line[1] === '/')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn `${line.slice(0, 1)}${\n\t\t\t\t\t\t\t\t\twindow.location.origin\n\t\t\t\t\t\t\t\t}${line.slice(1)}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn line;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join('url(');\n\t\t\t\t}\n\n\t\t\t\tnewStyleEl.appendChild(source.createTextNode(returnText));\n\t\t\t});\n\n\t\t\ttarget.head.appendChild(newStyleEl);\n\t\t}\n\t\telse if (styleSheet.href)\n\t\t{\n\t\t\tconst newLinkEl = source.createElement('link');\n\n\t\t\tnewLinkEl.rel = 'stylesheet';\n\t\t\tnewLinkEl.href = styleSheet.href;\n\t\t\ttarget.head.appendChild(newLinkEl);\n\t\t}\n\t});\n}\n\nfunction toWindowFeatures(obj)\n{\n\treturn Object.keys(obj)\n\t\t.reduce((features, name) =>\n\t\t{\n\t\t\tconst value = obj[name];\n\n\t\t\tif (typeof value === 'boolean')\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value ? 'yes' : 'no'}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value}`);\n\t\t\t}\n\n\t\t\treturn features;\n\t\t}, [])\n\t\t.join(',');\n}\n\nexport default withStyles(styles)(NewWindow);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'contain',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\t'&.hidden'         :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t}\n\t\t}\n\t});\n\nclass FullView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\tthis.video = React.createRef();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tvideoVisible,\n\t\t\tvideoProfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<video\n\t\t\t\t\tref={this.video}\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden  : !videoVisible,\n\t\t\t\t\t\tloading : videoProfile === 'none'\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted={Boolean(true)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\n\t\tconst video = this.video.current;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\t\t\tvideo.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideo.srcObject = null;\n\t\t}\n\t}\n}\n\nFullView.propTypes =\n{\n\tvideoTrack   : PropTypes.any,\n\tvideoVisible : PropTypes.bool,\n\tvideoProfile : PropTypes.string,\n\tclasses      : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(FullView);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport NewWindow from './NewWindow';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullView from '../VideoContainers/FullView';\n\nconst VideoWindow = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\ttoggleConsumerWindow\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<NewWindow onUnload={toggleConsumerWindow}>\n\t\t\t<FullView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</NewWindow>\n\t);\n};\n\nVideoWindow.propTypes =\n{\n\tadvancedMode         : PropTypes.bool,\n\tconsumer             : appPropTypes.Consumer,\n\ttoggleConsumerWindow : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tconsumer : state.consumers[state.room.windowConsumer]\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerWindow : () =>\n\t\t{\n\t\t\tdispatch(roomActions.toggleConsumerWindow());\n\t\t}\n\t};\n};\n\nconst VideoWindowContainer = connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.windowConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.windowConsumer]\n\t\t\t);\n\t\t}\n\t}\n)(VideoWindow);\n\nexport default VideoWindowContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PromoteIcon from '@material-ui/icons/OpenInBrowser';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\talignItems : 'center'\n\t\t}\n\t});\n\nconst ListLobbyPeer = (props) =>\n{\n\tconst {\n\t\troomClient,\n\t\tpeer,\n\t\tpromotionInProgress,\n\t\tcanPromote,\n\t\tclasses\n\t} = props;\n\n\tconst intl = useIntl();\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\treturn (\n\t\t<ListItem\n\t\t\tclassName={classnames(classes.root)}\n\t\t\tkey={peer.peerId}\n\t\t\tbutton\n\t\t\talignItems='flex-start'\n\t\t>\n\t\t\t<ListItemAvatar>\n\t\t\t\t<Avatar alt='Peer avatar' src={picture} />\n\t\t\t</ListItemAvatar>\n\t\t\t<ListItemText\n\t\t\t\tprimary={peer.displayName}\n\t\t\t/>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.admitFromLobby',\n\t\t\t\t\tdefaultMessage : 'Click to let them in'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\tpeer.promotionInProgress ||\n\t\t\t\t\t\tpromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\troomClient.promoteLobbyPeer(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PromoteIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t</ListItem>\n\t);\n};\n\nListLobbyPeer.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tpeer                : PropTypes.object.isRequired,\n\tpromotionInProgress : PropTypes.bool.isRequired,\n\tcanPromote          : PropTypes.bool.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer                : state.lobbyPeers[id],\n\t\t\tpromotionInProgress : state.room.lobbyPeersPromotionInProgress,\n\t\t\tcanPromote          : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers && // For checking permissions\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListLobbyPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tlobbyPeersKeySelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport * as roomActions from '../../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListLobbyPeer from './ListLobbyPeer';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlock :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t}\n\t});\n\nconst LockDialog = ({\n\troomClient,\n\troom,\n\thandleCloseLockDialog,\n\tlobbyPeers,\n\tcanPromote,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={room.lockDialogOpen}\n\t\t\tonClose={() => handleCloseLockDialog(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.lobbyAdministration'\n\t\t\t\t\tdefaultMessage='Lobby administration'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t{ lobbyPeers.length > 0 ?\n\t\t\t\t<List\n\t\t\t\t\tdense\n\t\t\t\t\tsubheader={\n\t\t\t\t\t\t<ListSubheader component='div'>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.peersInLobby'\n\t\t\t\t\t\t\t\tdefaultMessage='Participants in Lobby'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\tlobbyPeers.map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (<ListLobbyPeer key={peerId} id={peerId} />);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</List>\n\t\t\t\t:\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText gutterBottom>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.lobbyEmpty'\n\t\t\t\t\t\t\tdefaultMessage='There are currently no one in the lobby'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t}\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tlobbyPeers.length === 0 ||\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\troom.lobbyPeersPromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tonClick={() => roomClient.promoteAllLobbyPeers()}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.promoteAllPeers'\n\t\t\t\t\t\tdefaultMessage='Promote all'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={() => handleCloseLockDialog(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nLockDialog.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\troom                  : appPropTypes.Room.isRequired,\n\thandleCloseLockDialog : PropTypes.func.isRequired,\n\thandleAccessCode      : PropTypes.func.isRequired,\n\tlobbyPeers            : PropTypes.array,\n\tcanPromote            : PropTypes.bool,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\troom       : state.room,\n\t\t\tlobbyPeers : lobbyPeersKeySelector(state),\n\t\t\tcanPromote : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = {\n\thandleCloseLockDialog : roomActions.setLockDialogOpen,\n\thandleAccessCode      : roomActions.setAccessCode\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(LockDialog)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Switch from '@material-ui/core/Switch';\n\nconst NoiseSlider = withStyles(\n\t{\n\t\troot :\n\t\t{\n\t\t\tcolor   : '#3880ff',\n\t\t\theight  : 2,\n\t\t\tpadding : '15px 0'\n\t\t},\n\t\ttrack : {\n\t\t\theight : 2\n\t\t},\n\t\trail : {\n\t\t\theight  : 2,\n\t\t\topacity : 0.2\n\t\t},\n\t\tmark : {\n\t\t\tbackgroundColor : '#bfbfbf',\n\t\t\theight          : 10,\n\t\t\twidth           : 3,\n\t\t\tmarginTop       : -3\n\t\t},\n\t\tmarkActive : {\n\t\t\topacity         : 1,\n\t\t\tbackgroundColor : 'currentColor'\n\t\t}\n\t})(Slider);\n\nconst styles = (theme) => ({\n\tsetting :\n\t{\n\t\tpadding : theme.spacing(2)\n\t},\n\tmargin :\n\t{\n\t\theight : theme.spacing(3)\n\t},\n\troot : {\n\t\twidth           : '100%',\n\t\tbackgroundColor : theme.palette.background.paper\n\t},\n\tswitchLabel : {\n\t\tjustifyContent : 'space-between',\n\t\tflex           : 'auto',\n\t\tdisplay        : 'flex',\n\t\tpadding        : theme.spacing(1)\n\t},\n\tnested : {\n\t\tdisplay       : 'block',\n\t\tpaddingTop    : 0,\n\t\tpaddingBottom : 0,\n\t\tpaddingLeft   : '25px',\n\t\tpaddingRight  : '25px'\n\t},\n\tformControl :\n\t{\n\t\tdisplay : 'flex'\n\t}\n});\n\nconst MediaSettings = ({\n\tsetEchoCancellation,\n\tsetAutoGainControl,\n\tsetNoiseSuppression,\n\tsetVoiceActivatedUnmute,\n\troomClient,\n\tme,\n\tvolume,\n\tsettings,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ audioSettingsOpen, setAudioSettingsOpen ] = React.useState(false);\n\tconst [ videoSettingsOpen, setVideoSettingsOpen ] = React.useState(false);\n\n\tconst resolutions = [ {\n\t\tvalue : 'low',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.low',\n\t\t\tdefaultMessage : 'Low'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'medium',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.medium',\n\t\t\tdefaultMessage : 'Medium'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'high',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.high',\n\t\t\tdefaultMessage : 'High (HD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'veryhigh',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.veryHigh',\n\t\t\tdefaultMessage : 'Very high (FHD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'ultra',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.ultra',\n\t\t\tdefaultMessage : 'Ultra (UHD)'\n\t\t})\n\t} ];\n\n\tlet webcams;\n\n\tif (me.webcamDevices)\n\t\twebcams = Object.values(me.webcamDevices);\n\telse\n\t\twebcams = [];\n\n\tlet audioDevices;\n\n\tif (me.audioDevices)\n\t\taudioDevices = Object.values(me.audioDevices);\n\telse\n\t\taudioDevices = [];\n\n\tlet audioOutputDevices;\n\n\tif (me.audioOutputDevices)\n\t\taudioOutputDevices = Object.values(me.audioOutputDevices);\n\telse\n\t\taudioOutputDevices = [];\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedWebcam || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\troomClient.updateWebcam({\n\t\t\t\t\t\t\t\t\trestart     : true,\n\t\t\t\t\t\t\t\t\tnewDeviceId : event.target.value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={webcams.length === 0 || me.webcamInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ webcams.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ webcams.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setVideoSettingsOpen(!videoSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced video settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{videoSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={videoSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.resolution || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Video resolution'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.resolution'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video resolution'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t{ /*\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.frameRate || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((frameRate) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={frameRate} value={frameRate}>\n\t\t\t\t\t\t\t\t\t\t\t\t{frameRate}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.frameRate'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video frame rate'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.screenSharingResolution || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Screen sharing resolution'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.screenSharingResolution'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing resolution'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t*/ }\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.screenSharingFrameRate || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((screenSharingFrameRate) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={screenSharingFrameRate} value={screenSharingFrameRate}>\n\t\t\t\t\t\t\t\t\t\t\t{screenSharingFrameRate}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.screenSharingFrameRate'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing frame rate'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedAudioDevice || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\troomClient.updateMic({ restart: true, newDeviceId: event.target.value });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.audio',\n\t\t\t\t\t\t\tdefaultMessage : 'Audio input device'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={audioDevices.length === 0 || me.audioInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ audioDevices.map((audio, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={audio.deviceId}>{audio.label==='' ? index+1 : audio.label }</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ audioDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t{ 'audioOutputSupportedBrowsers' in window.config &&\n\t\t\t\t\twindow.config.audioOutputSupportedBrowsers.includes(me.browser.name) &&\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.selectedAudioOutputDevice || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeAudioOutputDevice(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.audioOutput',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Audio output device'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\tdisabled={audioOutputDevices.length === 0 || me.audioOutputInProgress}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ audioOutputDevices.map((audioOutput, index) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tvalue={audioOutput.deviceId}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{audioOutput.label}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t{ audioOutputDevices.length > 0 ?\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.selectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t}\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setAudioSettingsOpen(!audioSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedAudio',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced audio settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{audioSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={audioSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<List component='div'>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.echoCancellation}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEchoCancellation(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.echoCancellation',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Echo cancellation'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.autoGainControl} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAutoGainControl(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.autoGainControl',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Auto gain control'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.noiseSuppression} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetNoiseSuppression(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseSuppression',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise suppression'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.voiceActivatedUnmute} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetVoiceActivatedUnmute(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.voiceActivatedUnmute',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Voice activated unmute'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<div className={classes.margin} />\n\t\t\t\t\t\t\t\t<Typography gutterBottom>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseThreshold',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise threshold'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}:\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<NoiseSlider className={classnames(classes.slider, classnames.setting)}\n\t\t\t\t\t\t\t\t\tkey={'noise-threshold-slider'}\n\t\t\t\t\t\t\t\t\tmin={-100}\n\t\t\t\t\t\t\t\t\tvalue={settings.noiseThreshold}\n\t\t\t\t\t\t\t\t\tmax={0}\n\t\t\t\t\t\t\t\t\tvalueLabelDisplay={'auto'}\n\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t(event, value) =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient._setNoiseThreshold(value);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmarks={[ { value: volume, label: `${volume} dB` } ]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t</React.Fragment>\n\t);\n};\n\nMediaSettings.propTypes =\n{\n\troomClient              : PropTypes.any.isRequired,\n\tsetEchoCancellation     : PropTypes.func.isRequired,\n\tsetAutoGainControl      : PropTypes.func.isRequired,\n\tsetNoiseSuppression     : PropTypes.func.isRequired,\n\tsetVoiceActivatedUnmute : PropTypes.func.isRequired,\n\tme                      : appPropTypes.Me.isRequired,\n\tvolume                  : PropTypes.number,\n\tsettings                : PropTypes.object.isRequired,\n\tclasses                 : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tme       : state.me,\n\t\tvolume   : state.peerVolumes[state.me.id],\n\t\tsettings : state.settings\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetEchoCancellation     : settingsActions.setEchoCancellation,\n\tsetAutoGainControl      : settingsActions.setAutoGainControl,\n\tsetNoiseSuppression     : settingsActions.setNoiseSuppression,\n\tsetVoiceActivatedUnmute : settingsActions.setVoiceActivatedUnmute\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.peerVolumes[prev.me.id] === next[next.me.id]\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MediaSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as settingsActions from '../../actions/settingsActions';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AppearenceSettings = ({\n\tisMobile,\n\troom,\n\tsettings,\n\tonTogglePermanentTopBar,\n\tonToggleHiddenControls,\n\tonToggleButtonControlBar,\n\tonToggleShowNotifications,\n\tonToggleDrawerOverlayed,\n\thandleChangeMode,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst modes = [ {\n\t\tvalue : 'democratic',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.democratic',\n\t\t\tdefaultMessage : 'Democratic view'\n\t\t})\n\t}, {\n\t\tvalue : 'filmstrip',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.filmstrip',\n\t\t\tdefaultMessage : 'Filmstrip view'\n\t\t})\n\t} ];\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={room.mode || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\thandleChangeMode(event.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.layout',\n\t\t\t\t\t\t\tdefaultMessage : 'Room layout'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ modes.map((mode, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={mode.value}>\n\t\t\t\t\t\t\t\t\t{mode.label}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='settings.selectRoomLayout'\n\t\t\t\t\t\t\tdefaultMessage='Select room layout'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t</form>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch checked={settings.permanentTopBar} onChange={onTogglePermanentTopBar} value='permanentTopBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.permanentTopBar',\n\t\t\t\t\tdefaultMessage : 'Permanent top bar'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.hiddenControls} onChange={onToggleHiddenControls} value='hiddenControls' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.hiddenControls',\n\t\t\t\t\tdefaultMessage : 'Hidden media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.buttonControlBar} onChange={onToggleButtonControlBar} value='buttonControlBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.buttonControlBar',\n\t\t\t\t\tdefaultMessage : 'Separate media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !isMobile &&\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\tcontrol={<Switch checked={settings.drawerOverlayed} onChange={onToggleDrawerOverlayed} value='drawerOverlayed' />}\n\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'settings.drawerOverlayed',\n\t\t\t\t\t\tdefaultMessage : 'Side drawer over content'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t}\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.showNotifications} onChange={onToggleShowNotifications} value='showNotifications' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.showNotifications',\n\t\t\t\t\tdefaultMessage : 'Show notifications'\n\t\t\t\t})}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n};\n\nAppearenceSettings.propTypes =\n{\n\tisMobile                  : PropTypes.bool.isRequired,\n\troom                      : appPropTypes.Room.isRequired,\n\tsettings                  : PropTypes.object.isRequired,\n\tonTogglePermanentTopBar   : PropTypes.func.isRequired,\n\tonToggleHiddenControls    : PropTypes.func.isRequired,\n\tonToggleButtonControlBar  : PropTypes.func.isRequired,\n\tonToggleShowNotifications : PropTypes.func.isRequired,\n\tonToggleDrawerOverlayed   : PropTypes.func.isRequired,\n\thandleChangeMode          : PropTypes.func.isRequired,\n\tclasses                   : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tisMobile : state.me.browser.platform === 'mobile',\n\t\troom     : state.room,\n\t\tsettings : state.settings\n\t});\n\nconst mapDispatchToProps = {\n\tonTogglePermanentTopBar   : settingsActions.togglePermanentTopBar,\n\tonToggleHiddenControls    : settingsActions.toggleHiddenControls,\n\tonToggleShowNotifications : settingsActions.toggleShowNotifications,\n\tonToggleButtonControlBar  : settingsActions.toggleButtonControlBar,\n\tonToggleDrawerOverlayed   : settingsActions.toggleDrawerOverlayed,\n\thandleChangeMode          : roomActions.setDisplayMode\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AppearenceSettings));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AdvancedSettings = ({\n\troomClient,\n\tsettings,\n\tonToggleAdvancedMode,\n\tonToggleNotificationSounds,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.advancedMode} onChange={onToggleAdvancedMode} value='advancedMode' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.advancedMode',\n\t\t\t\t\tdefaultMessage : 'Advanced mode'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.notificationSounds} onChange={onToggleNotificationSounds} value='notificationSounds' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.notificationSounds',\n\t\t\t\t\tdefaultMessage : 'Notification sounds'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !window.config.lockLastN &&\n\t\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.lastN || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeMaxSpotlights(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname='Last N'\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ Array.from(\n\t\t\t\t\t\t\t\t{ length: window.config.maxLastN || 10 },\n\t\t\t\t\t\t\t\t(_, i) => i + 1\n\t\t\t\t\t\t\t).map((lastN) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem key={lastN} value={lastN}>\n\t\t\t\t\t\t\t\t\t\t{lastN}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='settings.lastn'\n\t\t\t\t\t\t\t\tdefaultMessage='Number of visible videos'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</form>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nAdvancedSettings.propTypes =\n{\n\troomClient                 : PropTypes.any.isRequired,\n\tsettings                   : PropTypes.object.isRequired,\n\tonToggleAdvancedMode       : PropTypes.func.isRequired,\n\tonToggleNotificationSounds : PropTypes.func.isRequired,\n\tclasses                    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsettings : state.settings\n\t});\n\nconst mapDispatchToProps = {\n\tonToggleAdvancedMode       : settingsActions.toggleAdvancedMode,\n\tonToggleNotificationSounds : settingsActions.toggleNotificationSounds\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AdvancedSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport MediaSettings from './MediaSettings';\nimport AppearenceSettings from './AppearenceSettings';\nimport AdvancedSettings from './AdvancedSettings';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\n\nconst tabs =\n[\n\t'media',\n\t'appearence',\n\t'advanced'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t}\n\t});\n\nconst Settings = ({\n\tcurrentSettingsTab,\n\tsettingsOpen,\n\thandleCloseSettings,\n\tsetSettingsTab,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={settingsOpen}\n\t\t\tonClose={() => handleCloseSettings(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='settings.settings'\n\t\t\t\t\tdefaultMessage='Settings'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tvalue={tabs.indexOf(currentSettingsTab)}\n\t\t\t\tonChange={(event, value) => setSettingsTab(tabs[value])}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.media',\n\t\t\t\t\t\t\tdefaultMessage : 'Media'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.appearance',\n\t\t\t\t\t\tdefaultMessage : 'Appearence'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.advanced',\n\t\t\t\t\t\tdefaultMessage : 'Advanced'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{currentSettingsTab === 'media' && <MediaSettings />}\n\t\t\t{currentSettingsTab === 'appearence' && <AppearenceSettings />}\n\t\t\t{currentSettingsTab === 'advanced' && <AdvancedSettings />}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => handleCloseSettings(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nSettings.propTypes =\n{\n\tcurrentSettingsTab  : PropTypes.string.isRequired,\n\tsettingsOpen        : PropTypes.bool.isRequired,\n\thandleCloseSettings : PropTypes.func.isRequired,\n\tsetSettingsTab      : PropTypes.func.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tcurrentSettingsTab : state.room.currentSettingsTab,\n\t\tsettingsOpen       : state.room.settingsOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseSettings : roomActions.setSettingsOpen,\n\tsetSettingsTab      : roomActions.setSettingsTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.currentSettingsTab === next.room.currentSettingsTab &&\n\t\t\t\tprev.room.settingsOpen === next.room.settingsOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Settings));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {\n\tlobbyPeersKeySelector,\n\tpeersLengthSelector,\n\traisedHandsSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport Paper from '@material-ui/core/Paper';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport PeopleIcon from '@material-ui/icons/People';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport VideoCallIcon from '@material-ui/icons/VideoCall';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport HelpIcon from '@material-ui/icons/Help';\nimport InfoIcon from '@material-ui/icons/Info';\nimport BorderAllIcon from '@material-ui/icons/BorderAll';\nimport PortraitIcon from '@material-ui/icons/Portrait';\nimport ShareIcon from '@material-ui/icons/Share';\n\nconst styles = (theme) =>\n\t({\n\t\tpersistentDrawerOpen :\n\t\t{\n\t\t\twidth                          : 'calc(100% - 30vw)',\n\t\t\tmarginLeft                     : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 40vw)',\n\t\t\t\tmarginLeft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 50vw)',\n\t\t\t\tmarginLeft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 70vw)',\n\t\t\t\tmarginLeft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 90vw)',\n\t\t\t\tmarginLeft : '90vw'\n\t\t\t}\n\t\t},\n\t\tmenuButton :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : 0\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(3)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tgrow :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t},\n\t\ttitle :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tsectionDesktop : {\n\t\t\tdisplay                      : 'none',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'flex'\n\t\t\t}\n\t\t},\n\t\tsectionMobile : {\n\t\t\tdisplay                      : 'flex',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'none'\n\t\t\t}\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmargin  : theme.spacing(1, 0),\n\t\t\tpadding : theme.spacing(0, 1)\n\t\t},\n\t\tdisabledButton :\n\t\t{\n\t\t\tmargin : theme.spacing(1, 0)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t},\n\t\tmoreAction :\n\t\t{\n\t\t\tmargin : theme.spacing(0.5, 0, 0.5, 1.5)\n\t\t}\n\t});\n\twindow.addEventListener(\"hashchange\", function(e) {\n\t\t//if(e.oldURL.length > e.newURL.length)\n\t\tconsole.log(\"hashchanged\");\n\t\tconst ans = window.confirm(\"This will DISCONNECT the meeting. \\n Are you sure to disconnect?\");\n\t\tif (ans == true){} else {e.preventDefault();console.log('Stayed in meeting');}\n\t});\n\nconst PulsingBadge = withStyles((theme) =>\n\t({\n\t\tbadge :\n\t\t{\n\t\t\tbackgroundColor : theme.palette.secondary.main,\n\t\t\t'&::after'      :\n\t\t\t{\n\t\t\t\tposition     : 'absolute',\n\t\t\t\twidth        : '100%',\n\t\t\t\theight       : '100%',\n\t\t\t\tborderRadius : '50%',\n\t\t\t\tanimation    : '$ripple 1.2s infinite ease-in-out',\n\t\t\t\tborder       : `3px solid ${theme.palette.secondary.main}`,\n\t\t\t\tcontent      : '\"\"'\n\t\t\t}\n\t\t},\n\t\t'@keyframes ripple' :\n\t\t{\n\t\t\t'0%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(.8)',\n\t\t\t\topacity   : 1\n\t\t\t},\n\t\t\t'100%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(2.4)',\n\t\t\t\topacity   : 0\n\t\t\t}\n\t\t}\n\t}))(Badge);\n\nconst TopBar = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ mobileMoreAnchorEl, setMobileMoreAnchorEl ] = useState(null);\n\tconst [ anchorEl, setAnchorEl ] = useState(null);\n\tconst [ currentMenu, setCurrentMenu ] = useState(null);\n\n\tconst handleExited = () =>\n\t{\n\t\tsetCurrentMenu(null);\n\t};\n\n\tconst handleMobileMenuOpen = (event) =>\n\t{\n\t\tsetMobileMoreAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleMobileMenuClose = () =>\n\t{\n\t\tsetMobileMoreAnchorEl(null);\n\t};\n\n\tconst handleMenuOpen = (event, menu) =>\n\t{\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetCurrentMenu(menu);\n\t};\n\n\tconst handleMenuClose = () =>\n\t{\n\t\tsetAnchorEl(null);\n\n\t\thandleMobileMenuClose();\n\t};\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tpeersLength,\n\t\tlobbyPeers,\n\t\tpermanentTopBar,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tisMobile,\n\t\tmyPicture,\n\t\tloggedIn,\n\t\tloginEnabled,\n\t\tfullscreenEnabled,\n\t\tfullscreen,\n\t\tonFullscreen,\n\t\tsetSettingsOpen,\n\t\tsetFilmStrip,\n\t\tsetExtraVideoOpen,\n\t\tsetHelpOpen,\n\t\tsetAboutOpen,\n\t\tsetLockDialogOpen,\n\t\ttoggleToolArea,\n\t\topenUsersTab,\n\t\tunread,\n\t\tcanProduceExtraVideo,\n\t\tcanLock,\n\t\tcanPromote,\n\t\tclasses\n\t} = props;\n\n\tconst isMenuOpen = Boolean(anchorEl);\n\tconst isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n\tconst lockTooltip = room.locked ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.unLockRoom',\n\t\t\tdefaultMessage : 'Unlock room'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.lockRoom',\n\t\t\tdefaultMessage : 'Lock room'\n\t\t});\n\n\tconst fullscreenTooltip = fullscreen ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.leaveFullscreen',\n\t\t\tdefaultMessage : 'Leave fullscreen'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t});\n\n\tconst loginTooltip = loggedIn ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.logout',\n\t\t\tdefaultMessage : 'Log out'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.login',\n\t\t\tdefaultMessage : 'Log in'\n\t\t});\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AppBar\n\t\t\t\tposition='fixed'\n\t\t\t\tclassName={classnames(\n\t\t\t\t\troom.toolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.show : classes.hide,\n\t\t\t\t\t!(isMobile || drawerOverlayed) && toolAreaOpen ?\n\t\t\t\t\t\tclasses.persistentDrawerOpen : null\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tbadgeContent={unread}\n\t\t\t\t\t\tonClick={() => toggleToolArea()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.openDrawer',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Open drawer'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={classes.menuButton}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\tvariant='h6'\n\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t>\n\t\t\t\t\t\t{ roomClient.getRoomId() }\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tvar dummy = document.createElement('input'),\n\t\t\t\t\t\t\t    text = 'https://guruquest.gq/'+roomClient.getRoomId();\n\t\t\t\t\t\t\t\tdocument.body.appendChild(dummy);\n\t\t\t\t\t\t\t\tdummy.value = text;\n\t\t\t\t\t\t\t\tdummy.select();\n\t\t\t\t\t\t\t\tdocument.execCommand('copy');\n\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(text);\n\t\t\t\t\t\t\t\tvar done = alert(\"Room Link (\"+dummy.value+\") copied to clipboard.\\nPaste it in social media to share.\")\n\t\t\t\t\t\t\t\tdocument.body.removeChild(dummy);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ShareIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.copyRoomLink',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Copy Room Link'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<div className={classes.grow} />\n\t\t\t\t\t<div className={classes.sectionDesktop}>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.changeView',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Change View'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={\n\t\t\t\t\t\t\t\t\tisMenuOpen &&\n\t\t\t\t\t\t\t\t\tcurrentMenu === 'moreActions' ?\n\t\t\t\t\t\t\t\t\t\t'material-appbar' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconsole.log(\"room mode: \"+room.mode);\n\t\t\t\t\t\t\t\t\tvar rm = room.mode;\n\t\t\t\t\t\t\t\t\tif(rm==\"filmstrip\"){setFilmStrip(\"democratic\");}\n\t\t\t\t\t\t\t\t\telse {setFilmStrip(\"filmstrip\");}\n\t\t\t\t\t\t\t\t  console.log(\"button clicked\");\n\t\t\t\t\t\t\t\t  console.log(\"room mode: \"+room.mode);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ room.mode == \"filmstrip\" ?\n\t\t\t\t\t\t\t\t\t\t<BorderAllIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<PortraitIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t\t\t<Tooltip title={fullscreenTooltip}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tonClick={onFullscreen}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\tonClick={() => openUsersTab()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\tonClick={() => setSettingsOpen(!room.settingsOpen)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title={lockTooltip}>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lockRoom',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Lock room'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/*<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\t\t\tdefaultMessage : 'More actions'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={\n\t\t\t\t\t\t\t\t\tisMenuOpen &&\n\t\t\t\t\t\t\t\t\tcurrentMenu === 'moreActions' ?\n\t\t\t\t\t\t\t\t\t\t'material-appbar' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ExtensionIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>*/}\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Help'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={\n\t\t\t\t\t\t\t\t\tisMenuOpen &&\n\t\t\t\t\t\t\t\t\tcurrentMenu === 'moreActions' ?\n\t\t\t\t\t\t\t\t\t\t'material-appbar' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\t\tonClick={(event) => setHelpOpen(!room.helpOpen)}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<HelpIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ loginEnabled &&\n\t\t\t\t\t\t\t<Tooltip title={loginTooltip}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.login',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Log in'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t\t\t\t<Avatar src={myPicture} />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.sectionMobile}>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\tonClick={handleMobileMenuOpen}\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MoreIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.divider} />\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.leave',\n\t\t\t\t\t\t\tdefaultMessage : 'Leave'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tonClick={() => { \n\t\t\t\t\t\tconst r = (window.confirm('Leave meeting for sure?'));\n\t\t\t\t\t\tif (r== true){roomClient.close();} else {console.log('Stayed in meeting');}\n                           }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.leave'\n\t\t\t\t\t\t\tdefaultMessage='Leave'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Popover\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\topen={isMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tonExited={handleExited}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ currentMenu === 'moreActions' &&\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tdisabled={!canProduceExtraVideo}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetExtraVideoOpen(!room.extraVideoOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<VideoCallIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.addVideo',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Add video'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetHelpOpen(!room.helpOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HelpIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.help',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Help'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.help'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetAboutOpen(!room.aboutOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<InfoIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.about',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'About'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.about'\n\t\t\t\t\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t</Paper>\n\t\t\t\t}\n\t\t\t</Popover>\n\t\t\t<Menu\n\t\t\t\tanchorEl={mobileMoreAnchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n\t\t\t\topen={isMobileMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ loginEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={loginTooltip}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t<Avatar src={myPicture} />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ loggedIn ?\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.logout'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log out'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.login'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log in'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.changeView',\n\t\t\t\t\t\tdefaultMessage : 'Change View'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(\"room mode: \"+room.mode);\n\t\t\t\t\t\t\t\t\tvar rm = room.mode;\n\t\t\t\t\t\t\t\t\tif(rm==\"filmstrip\"){setFilmStrip(\"democratic\");}\n\t\t\t\t\t\t\t\t\telse {setFilmStrip(\"filmstrip\");}\n\t\t\t\t\t\t\t\t  console.log(\"button clicked\");\n\t\t\t\t\t\t\t\t  console.log(\"room mode: \"+room.mode);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t\t\t{ room.mode == \"filmstrip\" ?\n\t\t\t\t\t\t\t\t\t\t<BorderAllIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<PortraitIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.changeView'\n\t\t\t\t\t\t\tdefaultMessage='Change View'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={lockTooltip}\n\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\n\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t}\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.unLockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Unlock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.lockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Lock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t}\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetSettingsOpen(!room.settingsOpen);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.settings'\n\t\t\t\t\t\t\tdefaultMessage='Show settings'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\topenUsersTab();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t</Badge>\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.participants'\n\t\t\t\t\t\t\tdefaultMessage='Show participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tonFullscreen();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.enterFullscreen'\n\t\t\t\t\t\t\t\tdefaultMessage='Enter fullscreen'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\tdefaultMessage : 'Add video'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t>\n\t\t\t\t\t<ExtensionIcon />\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.moreActions'\n\t\t\t\t\t\t\tdefaultMessage='More actions'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t</React.Fragment>\n\t);\n};\n\nTopBar.propTypes =\n{\n\troomClient           : PropTypes.object.isRequired,\n\troom                 : appPropTypes.Room.isRequired,\n\tisMobile             : PropTypes.bool.isRequired,\n\tpeersLength          : PropTypes.number,\n\tlobbyPeers           : PropTypes.array,\n\tpermanentTopBar      : PropTypes.bool.isRequired,\n\tdrawerOverlayed      : PropTypes.bool.isRequired,\n\ttoolAreaOpen         : PropTypes.bool.isRequired,\n\tmyPicture            : PropTypes.string,\n\tloggedIn             : PropTypes.bool.isRequired,\n\tloginEnabled         : PropTypes.bool.isRequired,\n\tfullscreenEnabled    : PropTypes.bool,\n\tfullscreen           : PropTypes.bool,\n\tonFullscreen         : PropTypes.func.isRequired,\n\tsetToolbarsVisible   : PropTypes.func.isRequired,\n\tsetSettingsOpen      : PropTypes.func.isRequired,\n\tsetExtraVideoOpen    : PropTypes.func.isRequired,\n\tsetHelpOpen          : PropTypes.func.isRequired,\n\tsetAboutOpen         : PropTypes.func.isRequired,\n\tsetLockDialogOpen    : PropTypes.func.isRequired,\n\ttoggleToolArea       : PropTypes.func.isRequired,\n\topenUsersTab         : PropTypes.func.isRequired,\n\tunread               : PropTypes.number.isRequired,\n\tcanProduceExtraVideo : PropTypes.bool.isRequired,\n\tcanLock              : PropTypes.bool.isRequired,\n\tcanPromote           : PropTypes.bool.isRequired,\n\tclasses              : PropTypes.object.isRequired,\n\ttheme                : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasExtraVideoPermission =\n\t\tmakePermissionSelector(permissions.EXTRA_VIDEO);\n\n\tconst hasLockPermission =\n\t\tmakePermissionSelector(permissions.CHANGE_ROOM_LOCK);\n\n\tconst hasPromotionPermission =\n\t\tmakePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\troom            : state.room,\n\t\t\tisMobile        : state.me.browser.platform === 'mobile',\n\t\t\tpeersLength     : peersLengthSelector(state),\n\t\t\tlobbyPeers      : lobbyPeersKeySelector(state),\n\t\t\tpermanentTopBar : state.settings.permanentTopBar,\n\t\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t\tloggedIn        : state.me.loggedIn,\n\t\t\tloginEnabled    : state.me.loginEnabled,\n\t\t\tmyPicture       : state.me.picture,\n\t\t\tunread          : state.toolarea.unreadMessages +\n\t\t\t\tstate.toolarea.unreadFiles + raisedHandsSelector(state),\n\t\t\tcanProduceExtraVideo : hasExtraVideoPermission(state),\n\t\t\tcanLock              : hasLockPermission(state),\n\t\t\tcanPromote           : hasPromotionPermission(state)\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\tsetFilmStrip : (dmode) =>\n\t\t{\n\t\t\t\n\t\t\tdispatch(roomActions.setDisplayMode(dmode));\n\t\t},\n\t\tsetSettingsOpen : (settingsOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setSettingsOpen(settingsOpen));\n\t\t},\n\t\tsetExtraVideoOpen : (extraVideoOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setExtraVideoOpen(extraVideoOpen));\n\t\t},\n\t\tsetHelpOpen : (helpOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setHelpOpen(helpOpen));\n\t\t},\n\t\tsetAboutOpen : (aboutOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setAboutOpen(aboutOpen));\n\t\t},\n\t\tsetLockDialogOpen : (lockDialogOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setLockDialogOpen(lockDialogOpen));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t},\n\t\topenUsersTab : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.openToolArea());\n\t\t\tdispatch(toolareaActions.setToolTab('users'));\n\t\t}\n\t});\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.me.loggedIn === next.me.loggedIn &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.loginEnabled === next.me.loginEnabled &&\n\t\t\t\tprev.me.picture === next.me.picture &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(TopBar)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst ExtraVideo = ({\n\troomClient,\n\textraVideoOpen,\n\twebcamDevices,\n\thandleCloseExtraVideo,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ videoDevice, setVideoDevice ] = React.useState('');\n\n\tconst handleChange = (event) =>\n\t{\n\t\tsetVideoDevice(event.target.value);\n\t};\n\n\tlet videoDevices;\n\n\tif (webcamDevices)\n\t\tvideoDevices = Object.values(webcamDevices);\n\telse\n\t\tvideoDevices = [];\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={extraVideoOpen}\n\t\t\tonClose={() => handleCloseExtraVideo(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.extraVideo'\n\t\t\t\t\tdefaultMessage='Extra video'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={videoDevice}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={videoDevices.length === 0}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ videoDevices.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ videoDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t</form>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => roomClient.addExtraVideo(videoDevice)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nExtraVideo.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\textraVideoOpen        : PropTypes.bool.isRequired,\n\twebcamDevices         : PropTypes.object,\n\thandleCloseExtraVideo : PropTypes.func.isRequired,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\twebcamDevices  : state.me.webcamDevices,\n\t\textraVideoOpen : state.room.extraVideoOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseExtraVideo : roomActions.setExtraVideoOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.webcamDevices === next.me.webcamDevices &&\n\t\t\t\tprev.room.extraVideoOpen === next.room.extraVideoOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ExtraVideo)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { meProducersSelector } from '../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport PanToolOutlinedIcon from '@material-ui/icons/PanToolOutlined';\nimport ArrowLeftTwoToneIcon from '@material-ui/icons/ArrowBack';\nimport ArrowRightTwoToneIcon from '@material-ui/icons/ArrowForward';\n\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition                     : 'fixed',\n\t\t\tdisplay                      : 'flex',\n\t\t\tzIndex                       : 30,\n\t\t\t[theme.breakpoints.up('md')] :\n\t\t\t{\n\t\t\t\ttop            : '50%',\n\t\t\t\ttransform      : 'translate(0%, -50%)',\n\t\t\t\tflexDirection  : 'column',\n\t\t\t\tjustifyContent : 'center',\n\t\t\t\talignItems     : 'center',\n\t\t\t\tleft           : theme.spacing(1)\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tflexDirection : 'row',\n\t\t\t\tbottom        : theme.spacing(1),\n\t\t\t\tleft          : '50%',\n\t\t\t\ttransform     : 'translate(-50%, -0%)'\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tmove :\n\t\t{\n\t\t\tleft                           : '30vw',\n\t\t\ttop                            : '50%',\n\t\t\ttransform                      : 'translate(0%, -50%)',\n\t\t\tflexDirection                  : 'column',\n\t\t\tjustifyContent                 : 'center',\n\t\t\talignItems                     : 'center',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\tleft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\tleft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tleft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\tleft : '90vw'\n\t\t\t}\n\t\t}\n\t});\n\nconst ButtonControlBar = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\ttoolbarsVisible,\n\t\thiddenControls,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tme,\n\t\tmyId,\n\t\tfixed,\n\t\troles,\n\t\tsilenced,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused && !micProducer.remotelyPaused)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\tconst handRaiseTip = !me.raisedHand ?\n\tintl.formatMessage({\n\t\tid             : 'tooltip.unLockRoom',\n\t\tdefaultMessage : 'Raise Hand'\n\t})\n\t:\n\tintl.formatMessage({\n\t\tid             : 'tooltip.lockRoom',\n\t\tdefaultMessage : 'Lower Hand'\n\t});\t\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\t//console.log(\"varun fixed from button control:\" + fixed);\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tclassnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\thiddenControls ?\n\t\t\t\t\t\t(toolbarsVisible ? classes.show : classes.hide) :\n\t\t\t\t\t\tclasses.show,\n\t\t\t\t\ttoolAreaOpen &&\n\t\t\t\t\t\t(me.browser.platform !== 'mobile' && !drawerOverlayed) ?\n\t\t\t\t\t\tclasses.move : null\n\t\t\t\t)\n\t\t\t}\n\t\t>\n\t\t\t{ !roles.indexOf('moderator')>-1 && silenced &&\n\t\t\t<Tooltip\n\t\t\t\ttitle={handRaiseTip}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={handRaiseTip}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={me.raisedHandInProgress}\n\t\t\t\t\tcolor={\n\t\t\t\t\t\t!me.raisedHand ? 'default' : 'secondary'\n\t\t\t\t\t}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.setRaisedHand(!me.raisedHand);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ me.raisedHand ?\n\t\t\t\t\t\t<PanIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<PanToolOutlinedIcon />\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t}\n            { (roles.indexOf('moderator')>-1 || !silenced || myId == fixed) &&\n\t\t\t<Tooltip title={micTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\tcolor={micState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t<Tooltip title={webcamTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\tcolor={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t<Tooltip title='Previous video page' placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.previousPage',\n\t\t\t\t\t\tdefaultMessage : 'Previous video page'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t//color={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\troomClient.pageNavigate('previous')\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t<ArrowLeftTwoToneIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<ArrowLeftTwoToneIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t<Tooltip title='Next video page' placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.previousPage',\n\t\t\t\t\t\tdefaultMessage : 'Next video page'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t//color={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\troomClient.pageNavigate('next')\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t<ArrowRightTwoToneIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<ArrowRightTwoToneIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t<Tooltip title={screenTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\tdisabled={!me.canShareScreen || me.screenShareInProgress}\n\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'default'}\n\t\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ screenState === 'on' || screenState === 'unsupported' ?\n\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t:null\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ screenState === 'off' ?\n\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t:null\n\t\t\t\t\t\t}\n\t\t\t\t\t</Fab>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nButtonControlBar.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\tsilenced\t\t: PropTypes.bool.isRequired,\n\thiddenControls  : PropTypes.bool.isRequired,\n\tdrawerOverlayed : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tme              : appPropTypes.Me.isRequired,\n\tmyId\t\t    : PropTypes.string.isRequired,\n\tfixed\t\t    : PropTypes.string.isRequired,\n\troles \t   \t\t: PropTypes.object.isRequired,\n\tmicProducer     : appPropTypes.Producer,\n\twebcamProducer  : appPropTypes.Producer,\n\tscreenProducer  : appPropTypes.Producer,\n\tclasses         : PropTypes.object.isRequired,\n\ttheme           : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\thiddenControls  : state.settings.hiddenControls,\n\t\tsilenced\t\t: state.room.silenced,\n\t\tfixed\t\t\t: state.room.fixed,\n\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t...meProducersSelector(state),\n\t\tme              : state.me,\n\t\tmyId\t\t\t: state.me.id,\n\t\troles\t\t\t: state.me.roles\n\t});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.hiddenControls === next.settings.hiddenControls &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.me === next.me\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(ButtonControlBar)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst shortcuts=[\n\t{ key: 'h', label: 'room.help', defaultMessage: 'Help' },\n\t{ key: 'm', label: 'device.muteAudio', defaultMessage: 'Mute Audio' },\n\t{ key: 'v', label: 'device.stopVideo', defaultMessage: 'Mute Video' },\n\t{ key: '1', label: 'label.democratic', defaultMessage: 'Democratic View' },\n\t{ key: '2', label: 'label.filmstrip', defaultMessage: 'Filmstrip View' },\n\t{ key: 'space', label: 'me.mutedPTT', defaultMessage: 'Push SPACE to talk' },\n\t{ key: 'a', label: 'label.advanced', defaultMessage: 'Show advanced information' },\n\t{ key: `${String.fromCharCode(8592)} ${String.fromCharCode(8594)}`, label: 'room.browsePeersSpotlight', defaultMessage: 'Browse participants into Spotlight' }\n];\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t},\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column'\n\t\t},\n\t\tpaper : {\n\t\t\tpadding      : theme.spacing(1),\n\t\t\ttextAlign    : 'center',\n\t\t\tcolor        : theme.palette.text.secondary,\n\t\t\twhiteSpace   : 'nowrap',\n\t\t\tmarginRight  : theme.spacing(3),\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tminWidth     : theme.spacing(8)\n\t\t},\n\t\tshortcuts : {\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row',\n\t\t\talignItems    : 'center',\n\t\t\tpaddingLeft   : theme.spacing(2),\n\t\t\tpaddingRight  : theme.spacing(2)\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow     : 1,\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t}\n\t});\n\nconst Help = ({\n\thelpOpen,\n\thandleCloseHelp,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={helpOpen}\n\t\t\tonClose={() => { handleCloseHelp(false); }}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.help'\n\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tvalue={0}\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.shortcutKeys',\n\t\t\t\t\t\t\tdefaultMessage : 'Shortcut keys'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{shortcuts.map((value, index) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={index} className={classes.shortcuts}>\n\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t{value.key}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid={value.label}\n\t\t\t\t\t\t\tdefaultMessage={value.defaultMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => { handleCloseHelp(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nHelp.propTypes =\n{\n\troomClient      : PropTypes.object.isRequired,\n\thelpOpen        : PropTypes.bool.isRequired,\n\thandleCloseHelp : PropTypes.func.isRequired,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\thelpOpen : state.room.helpOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseHelp : roomActions.setHelpOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.helpOpen === next.room.helpOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Help)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\tlink :\n\t\t{\n\t\t\tdisplay      : 'block',\n\t\t\ttextAlign    : 'center',\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginBottom : theme.spacing(3)\n\t\t}\n\t});\nconst eduMeetUrl='https://wa.link/o24jrn';\nconst About = ({\n\taboutOpen,\n\thandleCloseAbout,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\topen={aboutOpen}\n\t\t\tonClose={() => handleCloseAbout(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.about'\n\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\tThis Project is Usable, but under development.\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\tIf you have any questions, contact whatsapp on 9890754591\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t<Link href={eduMeetUrl} target='_blank' rel='noreferrer' color='secondary' variant='h6'>\n\t\t\t\t\t\t{eduMeetUrl}\n\t\t\t\t\t</Link>\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' variant='body2'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.version'\n\t\t\t\t\t\tdefaultMessage='Version'\n\t\t\t\t\t/>\n\t\t\t\t\t:{` ${process.env.REACT_APP_VERSION}`}\n\t\t\t\t</DialogContentText>\n\t\t\t\t<Divider variant='middle' light className={classes.divider}/>\n\t\t\t\t{\n\t\t\t\t\twindow.config.supportUrl\n\t\t\t\t\t&&\n\t\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t\t<span>Visit for more info: </span>\n\t\t\t\t\t\t<Link href={window.config.supportUrl} target='_blank' rel='noreferrer' color='secondary'>\n\t\t\t\t\t\t\t{ window.config.supportUrl }\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t}\n\t\t\t\t<Link href={window.config.privacyUrl ? window.config.privacyUrl : 'privacy/privacy.html'} target='_blank' rel='noreferrer' color='secondary' className={classes.link}>\n\t\t\t\t\tData protection and Privacy Policy\n\t\t\t\t</Link>\n\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t\t<Button onClick={() => { handleCloseAbout(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nAbout.propTypes =\n{\n\troomClient       : PropTypes.object.isRequired,\n\taboutOpen        : PropTypes.bool.isRequired,\n\thandleCloseAbout : PropTypes.func.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\taboutOpen : state.room.aboutOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseAbout : roomActions.setAboutOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.aboutOpen === next.room.aboutOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(About)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from './appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport isElectron from 'is-electron';\nimport * as roomActions from '../actions/roomActions';\nimport * as toolareaActions from '../actions/toolareaActions';\nimport { idle } from '../utils';\nimport FullScreen from './FullScreen';\nimport { FormattedMessage } from 'react-intl';\nimport CookieConsent from 'react-cookie-consent';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport Notifications from './Notifications/Notifications';\nimport MeetingDrawer from './MeetingDrawer/MeetingDrawer';\nimport Democratic from './MeetingViews/Democratic';\nimport Filmstrip from './MeetingViews/Filmstrip';\nimport AudioPeers from './PeerAudio/AudioPeers';\nimport FullScreenView from './VideoContainers/FullScreenView';\nimport VideoWindow from './VideoWindow/VideoWindow';\nimport LockDialog from './AccessControl/LockDialog/LockDialog';\nimport Settings from './Settings/Settings';\nimport TopBar from './Controls/TopBar';\nimport WakeLock from 'react-wakelock-react16';\nimport ExtraVideo from './Controls/ExtraVideo';\nimport ButtonControlBar from './Controls/ButtonControlBar';\nimport Help from './Controls/Help';\nimport About from './Controls/About';\n\nconst TIMEOUT = window.config.hideTimeout || 5000;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdrawer :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tflexShrink                     : 0,\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tdrawerPaper :\n\t\t{\n\t\t\tbackgroundColor : '#ffffff42',\n\t\t\twidth                          : '25vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '30vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '60vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '80vw'\n\t\t\t}\n\t\t}\n\t});\n\nclass Room extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.fullscreen = new FullScreen(document);\n\n\t\tthis.state =\n\t\t{\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\twaitForHide = idle(() =>\n\t{\n\t\tthis.props.setToolbarsVisible(false);\n\t}, TIMEOUT);\n\n\thandleMovement = () =>\n\t{\n\t\t// If the toolbars were hidden, show them again when\n\t\t// the user moves their cursor.\n\t\tif (!this.props.room.toolbarsVisible)\n\t\t{\n\t\t\tthis.props.setToolbarsVisible(true);\n\t\t}\n\n\t\tthis.waitForHide();\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.addEventListener('mousemove', this.handleMovement);\n\t\twindow.addEventListener('touchstart', this.handleMovement);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.removeEventListener('mousemove', this.handleMovement);\n\t\twindow.removeEventListener('touchstart', this.handleMovement);\n\t}\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troom,\n\t\t\tbrowser,\n\t\t\tadvancedMode,\n\t\t\tshowNotifications,\n\t\t\tbuttonControlBar,\n\t\t\tdrawerOverlayed,\n\t\t\ttoolAreaOpen,\n\t\t\ttoggleToolArea,\n\t\t\tclasses,\n\t\t\ttheme\n\t\t} = this.props;\n\n\t\tconst View =\n\t\t{\n\t\t\tfilmstrip  : Filmstrip,\n\t\t\tdemocratic : Democratic\n\t\t}[room.mode];\n\n\t\tconst container = window !== undefined ? window.document.body : undefined;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.consentUnderstand'\n\t\t\t\t\t\t\t\tdefaultMessage='I understand'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\n\t\t\t\t<FullScreenView advancedMode={advancedMode} />\n\n\t\t\t\t<VideoWindow advancedMode={advancedMode} />\n\n\t\t\t\t<AudioPeers />\n\n\t\t\t\t{ showNotifications &&\n\t\t\t\t\t<Notifications />\n\t\t\t\t}\n\n\t\t\t\t<CssBaseline />\n\n\t\t\t\t<TopBar\n\t\t\t\t\tfullscreenEnabled={this.fullscreen.fullscreenEnabled}\n\t\t\t\t\tfullscreen={this.state.fullscreen}\n\t\t\t\t\tonFullscreen={this.handleToggleFullscreen}\n\t\t\t\t/>\n\n\t\t\t\t{ (browser.platform === 'mobile' || drawerOverlayed) ?\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<SwipeableDrawer\n\t\t\t\t\t\t\t\tcontainer={container}\n\t\t\t\t\t\t\t\tvariant='temporary'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tonOpen={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tModalProps={{\n\t\t\t\t\t\t\t\t\tkeepMounted : true // Better open performance on mobile.\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</SwipeableDrawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t\t:\n\t\t\t\t\t<nav className={toolAreaOpen ? classes.drawer : null}>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\t\tvariant='persistent'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t}\n\n\t\t\t\t{ browser.platform === 'mobile' && browser.os !== 'ios' &&\n\t\t\t\t\t<WakeLock />\n\t\t\t\t}\n\n\t\t\t\t<View advancedMode={advancedMode} />\n\n\t\t\t\t{ buttonControlBar &&\n\t\t\t\t\t<ButtonControlBar />\n\t\t\t\t}\n\n\t\t\t\t{ room.lockDialogOpen &&\n\t\t\t\t\t<LockDialog />\n\t\t\t\t}\n\n\t\t\t\t{ room.settingsOpen &&\n\t\t\t\t\t<Settings />\n\t\t\t\t}\n\n\t\t\t\t{ room.extraVideoOpen &&\n\t\t\t\t\t<ExtraVideo />\n\t\t\t\t}\n\t\t\t\t{ room.helpOpen &&\n\t\t\t\t\t<Help />\n\t\t\t\t}\n\t\t\t\t{ room.aboutOpen &&\n\t\t\t\t\t<About />\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nRoom.propTypes =\n{\n\troom               : appPropTypes.Room.isRequired,\n\tbrowser            : PropTypes.object.isRequired,\n\tadvancedMode       : PropTypes.bool.isRequired,\n\tshowNotifications  : PropTypes.bool.isRequired,\n\tbuttonControlBar   : PropTypes.bool.isRequired,\n\tdrawerOverlayed    : PropTypes.bool.isRequired,\n\ttoolAreaOpen       : PropTypes.bool.isRequired,\n\tsetToolbarsVisible : PropTypes.func.isRequired,\n\ttoggleToolArea     : PropTypes.func.isRequired,\n\tclasses            : PropTypes.object.isRequired,\n\ttheme              : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\troom              : state.room,\n\t\tbrowser           : state.me.browser,\n\t\tadvancedMode      : state.settings.advancedMode,\n\t\tshowNotifications : state.settings.showNotifications,\n\t\tbuttonControlBar  : state.settings.buttonControlBar,\n\t\tdrawerOverlayed   : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen      : state.toolarea.toolAreaOpen\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.settings.advancedMode === next.settings.advancedMode &&\n\t\t\t\tprev.settings.showNotifications === next.settings.showNotifications &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Room));"],"sourceRoot":""}